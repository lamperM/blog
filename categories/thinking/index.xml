<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Thinking on BLOG</title><link>https://wangloo.github.io/categories/thinking/</link><description>Recent content in Thinking on BLOG</description><generator>Hugo -- gohugo.io</generator><lastBuildDate>Sun, 17 Dec 2023 17:19:44 +0800</lastBuildDate><atom:link href="https://wangloo.github.io/categories/thinking/index.xml" rel="self" type="application/rss+xml"/><item><title>一些胡思乱想</title><link>https://wangloo.github.io/posts/thinking/growth/</link><pubDate>Sun, 17 Dec 2023 17:19:44 +0800</pubDate><guid>https://wangloo.github.io/posts/thinking/growth/</guid><description>阅读感悟 2024年1月17日
距离回青岛还有三天了，今天忙里偷闲去深圳演艺公园逛了逛， 随后经过南山图书馆，看到几篇杂志里的文章比较有趣，在这里写下一点感悟。
看说自助的这篇文章，我其实蛮认同的。初判断一个人三观和你是否相合， 其实吃饭能看出不少。
从点菜开始，选择菜品的价格是否合适？ 也就是判断这个人的家境和心态，是否考虑对方的喜好和忌口， 也是一个重要的考察点。 然后说到吃的过程中，也能透露家教品德， 对待服务员是否尊重？饭碗有没有端起来？（自己之前有忘记的时候） 是否尽量和对方同步进度？（避免出现一方等待另一方）。 当然在吃饭的途中你们会交谈，会说一些对菜品的评价等等， 这些都是衡量观念是否相同的好机会。如果是喝酒， 其实是考验人品性最重要的时刻。装好人谁都会，所以在最放松的时候， 才能看到褪去伪装下真实的性情。（所以说老丈人目标把女婿喝趴下是有道理的） 用餐结束后，逃避买单？（男方理应主动买单）是否在饭店里就当面嫌弃菜品等。 什么是教育？不仅仅是知识能力的灌输，更应该是人格品质的培养。 他们的诚实、正直、孝顺&amp;hellip;有比成绩更重要的衡量标准。
因为我是农村人，周围的邻居虽然普遍文化程度不高，但我从小受了很多关照。 以前邻里之间的和睦让我觉得比现在的生活幸福的多，我的确是不喜欢住楼房。
还想起了一位发小，他学习不好，但每到农忙季节干的活绝对是比父母多， 从来不对外有任何怨言。他单纯、质朴的性格总让我担心找另一半时会不会被欺骗&amp;hellip; 虽然目前回家的时候不多，但请我一定记住回去多看看他。
感同身受，我一直不喜欢网上聊天，总有许多敷衍的词句在里面， 不如两个人见面聊的痛快。而且，见面的好处是你能切实的观察到对方听到你的话是什么反应， 如果他表现出了厌恶的微表情，我也能做到及时的转移话题。
回顾实习结束前 2024年1月13日
在HW实习的最后一天有一件事没干妥当，就是走之前没有和性能仿真那边打个招呼。 虽然说现在功能和性能已经划分开，但毕竟已经在一起聚过，也一起讨论过工作。 应该正式的打一声招呼再走的。
闻吴起事迹反思 2024年1月12日
吴起是战国初期的军事家，所著《吴起兵法》传播广泛。 但是听百家讲坛中介绍吴起的事迹确实是很难让人赞同。
吴起最早跟随曾子，其母去世后，曾子问为何不回家守孝， 吴起回答专注学习，母亲死了就死了。 在鲁国任命时，因为其妻子是齐国人，被拒绝任命大将军。 吴起知道后，将其妻子杀害，以表忠心。 吴起最终死的很惨，在我看来缘于心恶没有孝心。 只追逐于当下的功名利禄，抛弃了人与人的爱情与亲情， 实在是狼心狗肺之人。
一瞬间我就想到了自己高中时候做的一件错事： 当时我座位的前边是一个非常调皮、爱说话的同学， 时常让我和同桌的好朋友都不得安心学习，在忍无可忍之后， 我居然自己去找班主任换了座位。
这个事情做的也算是自私，没有真正的解决问题而是选择逃避。 把自己的好朋友抛弃，虽然自己得了一方清闲但实属不义之举。 故在此进行反思，以后请做一个重情重义之人，不要被天下人耻笑。
初一、十五不能理发 2024年1月12日
今晚给父母致电告知回家的日期已定，提到今天理发时父亲反应很大， 说初一、十五不能理发，理发要选3、6、9日。这项习俗我确实不知， 长到这么大也没在意过这个，属是不应该。很多老习惯、 老习俗还是需要多了解，是否遵守且再谈，但不应该如此无知。
算命科学吗 2024年1月6日 观： 对话中原：张其成—传统文化的魅力（1）
首先只看八字一定是不科学人的，跟你同一个时辰一起出生的人有很多， 全世界有几千万。所以要看一个人的命有三个方面：天、地、人， 八卦就是这三个方面形成的。</description></item><item><title>杂乱的开发日记</title><link>https://wangloo.github.io/posts/thinking/dev_note/</link><pubDate>Sun, 17 Dec 2023 17:19:44 +0800</pubDate><guid>https://wangloo.github.io/posts/thinking/dev_note/</guid><description>零零碎碎的开发笔记，如果思考比较多应该写成单独的博文。
6.828 还能这么拷贝代码 将一段汇编代码从一个地址拷贝到另一个地址，你会怎么做？
我能想到的是利用链接脚本，将该段代码限定在某个段里，然后利用变量来定位代码所在的地址，执行拷贝。
init.c的boot_aps()提供了一种新的思路：在代码的前后定义一个全局变量，就能在外面访问到代码的地址和范围了。
转换函数的一种写法 我们经常会用到两种指代之间的转换，比如用id找到结构体指针（JOS中的envid2env），你会怎么设置函数的参数和返回值？
我以前只能想到：
1struct Env *envid2env(envid_t envid) 正常情况下返回转换完成的结构体指针，否则返回NULL。
然而，JOS提供了一种别样的实现方式：
1int 2envid2env(envid_t envid, struct Env **env_store, bool checkperm) 3{ 4 struct Env *e; 5 6 // If envid is zero, return the current environment. 7 if (envid == 0) { 8 *env_store = curenv; 9 return 0; 10 } 11 12 e = &amp;amp;envs[ENVX(envid)]; 13 if (e-&amp;gt;env_status == ENV_FREE || e-&amp;gt;env_id != envid) { 14 *env_store = 0; 15 return -E_BAD_ENV; 16 } 17 18 if (checkperm &amp;amp;&amp;amp; e !</description></item><item><title>Thinking: Config Linux Network</title><link>https://wangloo.github.io/posts/thinking/cfg_linux_ip/</link><pubDate>Fri, 08 Dec 2023 17:19:44 +0800</pubDate><guid>https://wangloo.github.io/posts/thinking/cfg_linux_ip/</guid><description>起因：今天与一位同学一起尝试去配置Linux静态IP，这中间有不少坎坷，想简单把思考的过程写下来， 复盘一下是不是应该有可以更快的定位到问题并解决的方案。
提出问题 Cl同学想要达到启动Linux后自动设置某个静态Ip的效果， 在我的理解里这并不是一件很复杂的事。
他给我的想法是在Kernel Command Line参数中指定Ip， 我之前没有看到过这种方式配网，但是网上搜了一下确实有这样的例子。 所以他目前已经完成的是:
Linux是通过Uboot起的，要增加Linux Command Line， 可能是在Uboot的bootargs中添加。 但是他在修改完bootargs并重启的时候，发现变量没有成功赋值， 即使已经成功saveenv。所以就邀请我和他一起讨论。
动手实践 了解到问题之后，我先说出了我的想法：
配置静态Ip这个事其实我第一时间想到的是以前修改/etc/network/interfaces文件的方式 但是我愿意陪他先看下为什么命令行参数没有配置上去 这是两条路，因为他的系统里没有真正的文件系统，而是initrd， 所以我提出的方案需要去解包inird的压缩文件，还是尽量先去研究为什么命令行参数没有配置上去。
为什么CMDLINE没有配置上去呢? 首先它说bootargs没有保存成功，这个我也不知道为啥， 可以先不管，即便在每次启动之前在Uboot里设置了Bootargs， 他说在启动之后Kernel的打印也没有输出配置的项目。
Uboot中Bootargs设置的值是和Kernel Command Line配套吗？ 这个我反正是不太确定。
好，那能不能通过别的方式来设置CmdLine呢？ 我们搜索找到了两种方式：
Dts中 Menuconfig中修改 没有尝试Menuconfig是因为他说“目前Menuconfig配置的CmdLine为空， 但是实际Kernel启动后又是有值输出的，那么说明肯定是其他的地方有添加。” 对于这句话我也表示认同，Menuconfig里给的说明是：“默认配置”， 所以即便添加了也无法保证会不会被其他的给冲刷掉。所以，一个根本问题就是： CmdLine配置的顺序，或者说优先级是什么？
先去Dts里改改试试吧，找到了一个chosen结点有关于bootargs的配置， 不管怎么样改了一下，发现并没有生效，和最终Kernel输出的对不上。
所以，看起来修改CmdLine这条路要失败了，只能去修改initrd试试。
修改Initrd达到目的 initrd是打包好的，用的是cpio+lz4的方式。要修改首先要把他解开， 解开到还好说，网上能搜得到命令。 但是重新压缩回去问题很多，前期我就想到了我在华为实习时期遇到的类似的问题， 压缩的算法不对、打包的版本差异都会导致Kernel无法解析重新打包的initrd而panic。
实际也遇到了这个问题，但是这有个小插曲：即便是换回原来的initrd也还是panic。 最终破案是因为需要make clean之后重新make，猜测可能是用了什么中间文件。 不得不感慨Linux Kernel的构建还是相当复杂的。
问题来了：修改/etc/network/interfaces并没有改变静态Ip， 这就使我产生了疑惑，想着可以先在系统启动之后修改试试嘛， 执行ip down和ipup发现确实没有成功修改，这不禁让我想问为什么？
此时，我们突然想到一个问题，既然shell命令能成功修改Ip， 那么就在启动时增加一个脚本去执行设置Ip的行动，不就行了吗？
确实是可以的，所以暂时先不管为什么interfaces不生效。 那就修改有关于/etc/init.d和/etc/inittab相关的知识了， 这一部分我就没参与了，网上的资料的非常全，最终是成功达到目的。
感慨 虽然成功达到了目的，但是消耗了4个小时左右的时间，我觉得这件事并不应该这么复杂。 主要原因是Linux可以配置网络的方式太多了，以至于像我们这种不是非常熟悉的人一时间不知道如何下手。</description></item></channel></rss>