<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>UBoot on BLOG</title><link>https://wangloo.github.io/tags/uboot/</link><description>Recent content in UBoot on BLOG</description><generator>Hugo -- gohugo.io</generator><lastBuildDate>Fri, 06 Sep 2024 19:28:12 +0800</lastBuildDate><atom:link href="https://wangloo.github.io/tags/uboot/index.xml" rel="self" type="application/rss+xml"/><item><title>UBoot: boom 命令的执行流</title><link>https://wangloo.github.io/posts/os/uboot/bootm/</link><pubDate>Fri, 06 Sep 2024 19:28:12 +0800</pubDate><guid>https://wangloo.github.io/posts/os/uboot/bootm/</guid><description>// bootm 命令的入口 int do_bootm(cmd_tbl_t *cmdtp, int flag, int argc, char * const argv[]) ==&amp;gt; // CONFIG_NEEDS_MANUAL_RELOC 这个选项没开，暂时不研究 ==&amp;gt; if (有其他的子命令，除了&amp;#39;:&amp;#39;,&amp;#39;#&amp;#39;) // 这里我们也一般不加 ==&amp;gt; do_bootm_subcommand() ==&amp;gt; state |= BOOTM_STATE_FINDOTHER // 这个 flag 是一定set的 ==&amp;gt; state |= BOOTM_STATE_RAMDISK // ifdef CONFIG_SYS_BOOT_RAMDISK_HIGH， // 这个是比较关键的，设置 ramdisk 搬移到高地址的 FLAG ==&amp;gt; return do_bootm_states(cmdtp, flag, argc, argv, state); do_bootm_states() ==&amp;gt; bootm_find_other ==&amp;gt; bootm_find_images // 设置 images.rd_start, images.rd_end ==&amp;gt; boot_get_ramdisk(argc, argv, &amp;amp;images, IH_INITRD_ARCH, &amp;amp;images.</description></item></channel></rss>