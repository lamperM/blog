<?xml-stylesheet href="/rss.xsl" type="text/xsl"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Homepage üåà on Soben's Secret Base</title><link>https://wangloo.github.io/</link><description>Recent content in Homepage üåà on Soben's Secret Base</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>@2019 Notepadium.</copyright><lastBuildDate>Thu, 15 Sep 2022 15:14:05 +0800</lastBuildDate><atom:link href="https://wangloo.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>git ÂÆùÂÖ∏</title><link>https://wangloo.github.io/posts/git/</link><pubDate>Tue, 13 Dec 2022 17:39:42 +0800</pubDate><guid>https://wangloo.github.io/posts/git/</guid><description>Soben's Secret Base https://wangloo.github.io/posts/git/ -&lt;h2 id="ÂêàÂπ∂Êìç‰Ωú-git-merge">ÂêàÂπ∂Êìç‰Ωú: git merge&lt;/h2>
&lt;p>merge Êúâ‰∏§ÁßçÊñπÂºè:&lt;/p>
&lt;ul>
&lt;li>fast-forward&lt;/li>
&lt;li>three-way merger&lt;/li>
&lt;/ul>
&lt;h3 id="fast-forward-merge">Fast-forward Merge&lt;/h3>
&lt;p>ÂÅáËÆæÂêàÂπ∂ÁöÑÂèåÊñπ‰∏∫&lt;code>main&lt;/code>‰∏∫&lt;code>dev&lt;/code>, Â¶ÇÊûúÂÖ∂‰∏≠‰∏Ä‰∏™ÊòØÂè¶‰∏Ä‰∏™ÁöÑÁ•ñÂÖà, Ê≠§Êó∂Áõ¥Êé•ÁßªÂä®HEADÂà∞ÂâçÊñπÂç≥ÂèØ, Áß∞‰∏∫fast-forward.&lt;/p>
&lt;p>‰æãÂ¶Ç, ÂΩìÂâçÂú®main, ÊâßË°å&lt;code>git merge dev&lt;/code>ÁöÑËøáÁ®ãÂ¶Ç‰∏ã:&lt;/p>
&lt;pre tabindex="0">&lt;code> main main
| |
M1 --- M2 ===&amp;gt; M1 --- M2 -- F1
\ |
\--- F1 dev
|
dev
&lt;/code>&lt;/pre>&lt;h3 id="three-way-merge">three-way Merge&lt;/h3>
&lt;p>ÂêàÂπ∂ÁöÑ‰∏§ËÄÖ‰∏çÊûÑÊàêÁõ¥Êé•ÁöÑÁ•ñÂÖà-Â≠©Â≠êÂÖ≥Á≥ª, ‰∫ßÁîü‰∫ÜÂàÜÂèâ. Ê≠§Êó∂ËøõË°åÂêàÂπ∂Â∞±ÈúÄË¶ÅÊúâ‰∏™Âü∫ÂáÜ(ÂèÇËÄÉ), ÂØπ‰∫é‰∏§ËæπÁõ∏ËæÉ‰∫éÂü∫ÂáÜÁöÑÊØè‰∏™diffÊù•ËØ¥:&lt;/p>
&lt;ul>
&lt;li>ÂêàÂπ∂ÁöÑ‰∏§ËÄÖÈÉΩÂú®Âü∫ÂáÜ‰∏äËøõË°å‰∫ÜÊîπÂä®, ‰∏îÊîπÂä®‰∏ç‰∏ÄËá¥, &lt;strong>Ê†áËÆ∞‰∏∫ÂÜ≤Á™Å&lt;/strong>&lt;/li>
&lt;li>Â¶ÇÊûúËØ•diff&lt;strong>‰ªÖÂú®ÂÖ∂‰∏≠‰∏ÄÊñπ&lt;/strong>ÊúâÊîπÂä®, ÈÇ£‰πàÂ∞±‰øùÁïôÊ≠§Ê¨°ÊîπÂä®&lt;/li>
&lt;/ul>
&lt;p>ÂêàÂπ∂Êó∂‰ΩøÁî®ÁöÑÂèÇËÄÉÂ∞±ÊòØ&lt;strong>‰∏§‰∏™ÂêàÂπ∂commitÁöÑÊúÄËøëÂÖ¨ÂÖ±Á•ñÂÖà&lt;/strong>, ËøôÁßçÂÄüÂä©‰∏â‰∏™commit(main, dev, ÂÖ¨ÂÖ±Á•ñÂÖà)ÊâçËÉΩÂÆåÊàêÁöÑÂêàÂπ∂Êìç‰ΩúÂ∞±Âè´ÂÅö three-way merge.&lt;/p>
&lt;p>‰æãÂ¶Ç, ÂΩìÂâçÂú®main, ÊâßË°å&lt;code>git merge dev&lt;/code>ÁöÑËøáÁ®ãÂ¶Ç‰∏ã:&lt;/p>
&lt;pre tabindex="0">&lt;code> main main
| |
M1 --- M2 --- M3 ===&amp;gt; M1 --- M2 --- M3 --- M4
\ \ /
\--- F1 \--- F1 ---
| |
dev dev
&lt;/code>&lt;/pre>&lt;blockquote>
&lt;p>three-way ÁöÑÂêàÂπ∂ÊñπÂºèÂ¶ÇÊûúÂèëÁîü‰∫ÜÂÜ≤Á™Å, ‰ºö‰∫ßÁîü‰∏ÄÊ¨°È¢ùÂ§ñÁöÑ merge commit, ‰∏ãÈù¢‰ªãÁªçÂÆÉ&lt;/p>
&lt;/blockquote>
&lt;h3 id="‰ªÄ‰πàÊÉÖÂÜµ‰∏ã-merge-commit-Ê≤°Êúâ‰ªª‰Ωïdiff">‰ªÄ‰πàÊÉÖÂÜµ‰∏ã merge commit Ê≤°Êúâ‰ªª‰Ωïdiff?&lt;/h3>
&lt;p>ÊåâÁÖß‰∏äÈù¢ÁöÑ‰æãÂ≠ê, three-way merge ÂèëÁîüÂÜ≤Á™ÅÂêé‰ºö‰∫ßÁîü‰∏ÄÊ¨°È¢ùÂ§ñÁöÑmerge commit, Âç≥M4. Â¶ÇÊûúËøôÊòØÂéªÊü•ÁúãM4 Áõ∏ËæÉÂâç‰∏ÄÊ¨°commitÁöÑdiff, ÊúâÊó∂ÊòØÊ≤°ÊúâÁöÑ, ÊúâÊó∂Âèà‰ºö‰∫ßÁîüdiff.&lt;/p>
&lt;p>Â¶ÇÊûúÂú®Ëß£ÂÜ≥ÂÜ≤Á™ÅÁöÑËøáÁ®ã‰∏≠, Êàë‰ª¨‰ªÖ‰ªÖÊòØÊé•Êî∂‰∫Ü M2,M3 ÊàñËÄÖF1ÁöÑ‰øÆÊîπ, ÈÇ£‰πàÊ≠§Êó∂merge commitÂ∞±‰∏ç‰ºöÊúâdiff.&lt;/p>
&lt;p>ÁÑ∂ËÄå, Âú®Ëß£ÂÜ≥ÂÜ≤Á™ÅÊó∂, Êàë‰ª¨‰πüÂèØ‰ª•‰∏çÈááÁî®Êù•Ëá™‰∏§Êù°Ë∑ØÂæÑÁöÑ‰øÆÊîπ, ÂÅö‰∏ÄÊ¨°Êñ∞ÁöÑ‰øÆÊîπ(ÂèØ‰ª•ËØ¥, ÂêåÊó∂Êé•Êî∂‰∏§Êù°diffÂ∞±ÊòØËøôÁßçÊÉÖÂÜµ), Ê≠§Êó∂Êü•Áúãmerge commitÁöÑdiffÂ∞±ÊòØÊúâÂÜÖÂÆπÁöÑ.&lt;/p>
- https://wangloo.github.io/posts/git/ - @2019 Notepadium.</description></item><item><title>GNU ‰∫åËøõÂà∂Â∑•ÂÖ∑ÈõÜ</title><link>https://wangloo.github.io/posts/compiler-tools/gnu_tools/</link><pubDate>Sat, 03 Dec 2022 19:08:22 +0800</pubDate><guid>https://wangloo.github.io/posts/compiler-tools/gnu_tools/</guid><description>Soben's Secret Base https://wangloo.github.io/posts/compiler-tools/gnu_tools/ -&lt;p>..&lt;/p>
&lt;h2 id="nm---ÂàóÂá∫Á¨¶Âè∑">nm - ÂàóÂá∫Á¨¶Âè∑&lt;/h2>
&lt;p>&lt;a href="https://sourceware.org/binutils/docs/binutils/nm.html">nm (GNU Binary Utilities) (sourceware.org)&lt;/a>&lt;/p>
- https://wangloo.github.io/posts/compiler-tools/gnu_tools/ - @2019 Notepadium.</description></item><item><title>Makefile ‰∏Ä‰∫õÊäÄÂ∑ß</title><link>https://wangloo.github.io/posts/compiler-tools/makefile_tricks/</link><pubDate>Sat, 03 Dec 2022 19:08:22 +0800</pubDate><guid>https://wangloo.github.io/posts/compiler-tools/makefile_tricks/</guid><description>Soben's Secret Base https://wangloo.github.io/posts/compiler-tools/makefile_tricks/ -&lt;p>..&lt;/p>
&lt;h3 id="‰ΩøÁî®shell-ÂèòÈáè">‰ΩøÁî®shell ÂèòÈáè&lt;/h3>
&lt;p>Make Â∞Ü &lt;code>$$var&lt;/code> ËΩ¨‰πâ‰∏∫&lt;code>$var&lt;/code>, ‰æõshellÂ§ÑÁêÜ.&lt;/p>
&lt;p>demo(Ê∫êËá™6.828 Ê†πÁõÆÂΩï&lt;code>GNUmakefile&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-makefile" data-lang="makefile">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#50fa7b">handin-check&lt;/span>&lt;span style="color:#ff79c6">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> @if &lt;span style="color:#8be9fd;font-style:italic">test&lt;/span> -n &lt;span style="color:#f1fa8c">&amp;#34;`git status -s`&amp;#34;&lt;/span>; &lt;span style="color:#ff79c6">then&lt;/span> &lt;span style="color:#f1fa8c">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f1fa8c">&lt;/span> git status -s; &lt;span style="color:#f1fa8c">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f1fa8c">&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">read&lt;/span> -p &lt;span style="color:#f1fa8c">&amp;#34;Untracked files will not be handed in. Continue? [y/N] &amp;#34;&lt;/span> r; &lt;span style="color:#f1fa8c">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f1fa8c">&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">test&lt;/span> &lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">$$&lt;/span>&lt;span style="color:#f1fa8c">r&amp;#34;&lt;/span> &lt;span style="color:#ff79c6">=&lt;/span> y; &lt;span style="color:#f1fa8c">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f1fa8c">&lt;/span> &lt;span style="color:#ff79c6">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>‰ª•‰∏ädemoËøò‰ΩøÁî®‰∫Ü test ÂëΩ‰ª§Êù•ÁªàÊ≠¢makeÁöÑÊâßË°å, Â¶ÇÊûúÁî®Êà∑Ê≤°ÊúâËæìÂÖ•&lt;code>y&lt;/code>, makeÂ∞Ü‰ºöÁªàÊ≠¢ÊâßË°å&lt;/p>
&lt;/blockquote>
- https://wangloo.github.io/posts/compiler-tools/makefile_tricks/ - @2019 Notepadium.</description></item><item><title>Armv8 Kernel Monitor</title><link>https://wangloo.github.io/posts/os-learning/monitor/</link><pubDate>Fri, 28 Oct 2022 22:56:19 +0800</pubDate><guid>https://wangloo.github.io/posts/os-learning/monitor/</guid><description>Soben's Secret Base https://wangloo.github.io/posts/os-learning/monitor/ -&lt;p>¬†&lt;/p>
&lt;h2 id="kernel-monitor-ÊòØ‰ªÄ‰πà">Kernel Monitor ÊòØ‰ªÄ‰πà&lt;/h2>
&lt;p>Kernel Monitor ÊòØ‰∏Ä‰∏™ÈÄÇÈÖçÊàë‰ª¨ÂæÆÂÜÖÊ†∏Êìç‰ΩúÁ≥ªÁªüÁöÑ Kernel Ë∞ÉËØïÂíåÁõëÊéßÁ≥ªÁªü. ÂÆÉËÉΩÂÆûÁé∞ÂÜÖÊ†∏ÁöÑÂä®ÊÄÅË∞ÉËØïÂíåÁõëÊéß. ÂêåÊó∂, ÂÆÉËøòÊé•ÁÆ°ÂÜÖÊ†∏ÁöÑÂêåÊ≠•ÂºÇÂ∏∏ÂíåÁ≥ªÁªüÈîôËØØ, ‰ΩøÂºÄÂèëËÄÖËÉΩÂ§ü‰∫ÜËß£ÂèëÁîüÂºÇÂ∏∏Êó∂Á≥ªÁªüÁöÑÁä∂ÊÄÅ.&lt;/p>
&lt;p>Kernel Monitor ÂÖ∑Êúâ‰∏ÄÂÆöÁöÑÂèØÊâ©Â±ïÊÄß, ‰æãÂ¶ÇÈÄöËøáÁªüËÆ°ÂÜÖÊ†∏‰∏≠Â≠òÂÇ®ÁöÑ TCB Êù•ÂÆûÊó∂ÁõëÊéßÁ≥ªÁªü‰∏≠ÊâÄÊúâÁ∫øÁ®ãÁöÑÁä∂ÊÄÅ. ÂèØÊ†πÊçÆÂºÄÂèëËÄÖÁöÑÈúÄÊ±ÇÊ∑ªÂä†ÁªüËÆ°ÁöÑÂØπË±°, Â¶Ç Endpoint, CapabilityÁ≠â.&lt;/p>
&lt;p>¬†&lt;/p>
&lt;h2 id="kernel-monitor-ÊÄª‰ΩìËÆæËÆ°">Kernel Monitor ÊÄª‰ΩìËÆæËÆ°&lt;/h2>
&lt;p>Kernel Monitor Á≥ªÁªüÂåÖÂê´ Clinet Âíå Server ‰∏§‰∏™ÈÉ®ÂàÜ. ÁÆÄÂçïÊù•ËØ¥, Client Ë¥üË¥£Â§ÑÁêÜÁî®Êà∑ËæìÂÖ•, Âπ∂Â∞ÜËæìÂÖ•ËøõË°åËß£Êûê, Â∞ÅË£Ö‰∏∫ ‰∏ÄÁ≥ªÂàóÂü∫Á°ÄÂëΩ‰ª§. ÂèëÈÄÅÁªô Server. Server Ë¥üË¥£ÊâßË°åËøô‰∫õ Âü∫Á°ÄÁöÑÂëΩ‰ª§, Â¶ÇËÆæÁΩÆÊñ≠ÁÇπ, Êü•ÁúãÊüê‰∏™Âú∞ÂùÄÁöÑÂÄºÁ≠â.&lt;/p>
&lt;p>Êï¥‰∏™Á≥ªÁªüÊúâ&lt;em>‰∏§ÁßçÊû∂ÊûÑ&lt;/em>: Êú¨Âú∞ Monitor ÂíåËøúÁ®ã Monitor.&lt;/p>
&lt;p>Êú¨Âú∞monitor ÂíåËøúÁ®ã monitor ÁöÑÂå∫Âà´ÊòØ: &lt;strong>Monitor Client ÁöÑ‰ΩçÁΩÆÂú®Âì™, ÊòØÂê¶‰∏é Server Âú®Âêå‰∏Ä‰∏™Êú∫Âô®‰∏ä&lt;/strong>.&lt;/p>
&lt;blockquote>
&lt;p>ÂÖàËØ¥ Monitor Server, ÂÆÉÂøÖÈ°ªÂµåÂÖ•Ë¶ÅË∞ÉËØïÁöÑ Kernel ‰∏≠, &lt;strong>‰Ωç‰∫é‰∏Ä‰∏™Âú∞ÂùÄÁ©∫Èó¥&lt;/strong>, Êñπ‰æøÊìç‰Ωú Kernel ÁöÑÂÜÖÂ≠ò.&lt;/p>
&lt;/blockquote>
&lt;h3 id="Êú¨Âú∞-monitor">Êú¨Âú∞ Monitor&lt;/h3>
&lt;p>Âú®Êú¨Âú∞ Monitor ‰∏≠, client Âíå sever ÈÉΩ‰Ωç‰∫éÁõÆÊ†áÊú∫(Target)‰∏ä, ÁõÆÊ†áÊú∫ÈÄöÂ∏∏ÊòØÂºÄÂèëÊùø.&lt;/p>
&lt;p>ÂØπ‰∫é AArch64 ‰ΩìÁ≥ªÁªìÊûÑÊù•ËØ¥, ÊúÄÂ§öÊúâÂõõ‰∏™ÂºÇÂ∏∏Á≠âÁ∫ß(EL0-EL3). &lt;!-- raw HTML omitted -->Client ÂèØ‰ª•ËøêË°åÂú®EL2.&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;img src="./%E6%9C%AC%E5%9C%B0monitor.png" alt="image-20221029141414942">&lt;/p>
&lt;h3 id="ËøúÁ®ã-monitor">ËøúÁ®ã Monitor&lt;/h3>
&lt;p>ËøúÁ®ã Monitor Êû∂ÊûÑÂàô‰∏çÂêå, &lt;!-- raw HTML omitted -->Clinet ËøêË°åÂú®ÂÆø‰∏ªÊú∫(Host)‰∏ä&lt;!-- raw HTML omitted -->, ÈÄöÂ∏∏ÊòØLinux. ÂÆÉ‰∏é Server ÁöÑÈÄö‰ø°ÊòØÈÄöËøáÁΩëÁªú/UARTÂÆûÁé∞ÁöÑ.&lt;/p>
&lt;p>&lt;img src="./%E8%BF%9C%E7%A8%8Bmonitor.png" alt="image-20221029142002468">&lt;/p>
&lt;blockquote>
&lt;p>Monitor Client ËøêË°åÂú®Êú¨Âú∞ÂíåËøúÁ®ãÂØπ‰∫éÂÆûÁé∞ÁöÑÈöæÂ∫¶ÂíåÁî®Êà∑‰ΩìÈ™åÊúâÂΩ±Âìç.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Â¶ÇÊûú Client ÂÆûÁé∞Âú®Êú¨Âú∞, Âàô Client Êó†ÈúÄÂÆûÁé∞ÁΩëÂè£Âíå‰∏≤Âè£ÁöÑÈ©±Âä®, ‰ΩÜMonitor ËæìÂÖ•ËæìÂá∫ÁöÑ‰∏≤Âè£‰∏éÊìç‰ΩúÁ≥ªÁªüÊú¨Ë∫´ÁöÑ‰∏≤Âè£Áõ∏Âêå, ‰ø°ÊÅØÂÜóÊùÇÂú®‰∏ÄËµ∑‰∏çÊòìÊü•Áúã; ÂêåÊó∂, Â¶ÇÊûú Client ÂÆûÁé∞Âú®Êú¨Âú∞, ÈÇ£‰πàÂØπ‰∫éELFÁöÑËß£ÊûêÈúÄË¶ÅÂú®Êó†Êìç‰ΩúÁ≥ªÁªüÊèê‰æõÁöÑÂ∫ìÊîØÊåÅ‰∏ãÂÆåÊàê, ÂèØËÉΩÊØîËæÉÂ§çÊùÇ.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Â¶ÇÊûú Client ÂÆûÁé∞Âú®ËøúÁ®ã, Âç≥‰∏∫ Linux ‰∏äÁöÑ‰∏Ä‰∏™APP. ÈÇ£‰πàÂÆÉÂíå Server ÁöÑÈÄö‰ø°Â∞±ÈúÄË¶ÅÈÄöËøáÂ§ñÈÉ®ÁöÑÁΩëÂè£ÊàñËÄÖ‰∏≤Âè£(ÂØπ‰∫éÊàë‰ª¨‰ΩøÁî®ÁöÑ64‰ΩçÂºÄÂèëÊùøÂè™ÂºïÂá∫‰∫Ü‰∏Ä‰∏™‰∏≤Âè£, ÊâÄ‰ª•Âè™ËÉΩ‰ΩøÁî®ÁΩëÂè£). ÈúÄË¶ÅÂú® Server ‰∏äÂÆûÁé∞ÁΩëÂè£ÁöÑÈ©±Âä®, ËøôÈÉ®ÂàÜÊØîËæÉÂ§çÊùÇ. ‰ΩÜÊòØÂ•ΩÂ§ÑÊòØ Client ÁöÑÂÆûÁé∞ÁÆÄÂçïÂæàÂ§ö, Âõ†‰∏∫Êúâ Linux APP ËøêË°åÁéØÂ¢ÉÁöÑÊîØÊåÅ. ÂêåÊó∂, ËøúÁ®ã Monitor Êû∂ÊûÑ‰∏ã, Monitor Âíå Êìç‰ΩúÁ≥ªÁªüËá™Ë∫´ÁöÑËæìÂÖ•ËæìÂá∫ÂàÜÂºÄ, Áî®Êà∑ÂèØËØªÊÄßÊõ¥Â•Ω.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>Server ÊòØÂµåÂÖ•Âà∞KernelÁöÑ‰ª£Á†Å‰∏≠, ‰∏éClientËøõË°å‰∫§‰∫í. ÂÆÉÊòØÊï¥‰∏™ Monitor Á≥ªÁªüÁöÑÂêéÁ´Ø, Ë¥üË¥£ÂÆûÁé∞Âü∫Á°ÄÁöÑË∞ÉËØïÊìç‰Ωú. ‰æãÂ¶Ç, ËÆæÁΩÆÊñ≠ÁÇπ, ÂÜÖÂ≠òÁöÑËØªÂÜô, ÂØÑÂ≠òÂô®ÁöÑËØªÂÜôÁ≠â.&lt;/p>
&lt;ul>
&lt;li>Áî±‰∫éServer‰∏é Kernel ‰Ωç‰∫éÂêå‰∏Ä‰∏™Âú∞ÂùÄÁ©∫Èó¥, ÊâÄ‰ª•Êü•Áúã/‰øÆÊîπÂÜÖÂ≠òÁöÑÂÄºÊòØÈùûÂ∏∏Êñπ‰æøÁöÑ. ÂØπ‰∫éÂØÑÂ≠òÂô®‰πüÊòØÂêåÁêÜ.&lt;/li>
&lt;li>Êñ≠ÁÇπ(Breakpoint), ÁõëËßÜÁÇπ(Watchpoint), ÂçïÊ≠•ÊâßË°å(Soft step)ÁöÑÂÆûÁé∞‰æùËµñ‰∏é ARMv8 Êèê‰æõÁöÑÁöÑ &lt;a href="https://developer.arm.com/-/media/Arm%20Developer%20Community/PDF/Learn%20the%20Architecture/V8A%20Self-hosted%20debug.pdf?revision=5eff4cc6-b4ca-4017-a07d-2957307058cb">self-hosted debug&lt;/a> ÊîØÊåÅ.&lt;/li>
&lt;/ul>
&lt;p>ÂêåÊó∂, Server ËøòË¥üË¥£ÁõëËßÜÁ≥ªÁªü‰∏≠ÊâÄÊúâÁöÑ ÂêåÊ≠•ÂºÇÂ∏∏ÂíåÁ≥ªÁªüÈîôËØØ. ‰∏ÄÊó¶ÂèëÁîü, ÂèØÂú® Monitor ‰∏≠Êü•ÁúãÊüê‰∫õÂÜÖÂ≠ò, ÂØÑÂ≠òÂô®ÁöÑÂÄºÂÆö‰ΩçÈóÆÈ¢òÂèëÁîüÁöÑÂéüÂõ†.&lt;/p>
&lt;h3 id="monitor-client-ËÆæËÆ°">Monitor Client ËÆæËÆ°&lt;/h3>
&lt;p>Client ÁöÑÊûÑÊàêÂèØÂàÜ‰∏∫‰∏â‰∏™Ê®°Âùó :&lt;/p>
&lt;ul>
&lt;li>Áî®Êà∑‰∫§‰∫íÊ®°Âùó&lt;/li>
&lt;li>Á¨¶Âè∑Â§ÑÁêÜÊ®°Âùó&lt;/li>
&lt;li>Ê∂àÊÅØÊî∂ÂèëÊ®°Âùó&lt;/li>
&lt;/ul>
&lt;p>Áî®Êà∑‰∫§‰∫íÊ®°ÂùóË¥üË¥£Â§ÑÁêÜÁî®Êà∑ÁöÑËæìÂÖ•ËæìÂá∫, Ë∞ÉÁî®ÂÖ∂‰ªñ‰∏§‰∏™Ê®°ÂùóÂÆåÊàêË∞ÉËØïÂëΩ‰ª§.&lt;/p>
&lt;p>Á¨¶Âè∑Â§ÑÁêÜÊ®°ÂùóË¥üË¥£Ëß£ÊûêÂèØÊâßË°åÊñá‰ª∂(ELF), Âπ∂Âª∫Á´ãÈùôÊÄÅÁ¨¶Âè∑Ë°®, Â≠òÂÇ®Á¨¶Âè∑ÂíåÂú∞ÂùÄÁöÑÂØπÂ∫îÂÖ≥Á≥ª. Â∞ÜÁî®Êà∑ËæìÂÖ•ÁöÑÁ¨¶Âè∑Ëß£Êûê‰∏∫ËôöÊãüÂú∞ÂùÄ, ÊàñËÄÖÂèçÂêëËß£Êûê.&lt;/p>
&lt;p>Ê∂àÊÅØÊî∂ÂèëÊ®°ÂùóË¥üË¥£Â§ÑÁêÜÁî®Êà∑ÁöÑËæìÂÖ•, Â∞ÜÂÖ∂ËΩ¨Âåñ‰∏∫Âü∫Á°Ä, Ê†áÂáÜÁöÑÂëΩ‰ª§, ÂèëÈÄÅÁªôServerÊâßË°å. Client Âíå Server‰πãÈó¥ÈÄö‰ø°ÁöÑÊï∞ÊçÆÂåÖÂçèËÆÆÂèØ‰ª•‰ΩøÁî® &lt;a href="https://sourceware.org/gdb/onlinedocs/gdb/Remote-Protocol.html">GDB Remote Serial Protocol&lt;/a> (‰ª•‰∏ãÁÆÄÁß∞RSPÂçèËÆÆ), ÊàñËÄÖËá™Â∑±ËßÑÂÆö‰∏Ä‰∏™ÂçèËÆÆ‰πüÊòØÂèØË°åÁöÑ.&lt;/p>
&lt;blockquote>
&lt;p>RSPÂçèËÆÆÊîØÊåÅ‰∏âÁßçÂü∫Á°ÄÂëΩ‰ª§:&lt;/p>
&lt;ol>
&lt;li>ÂØÑÂ≠òÂô®Áõ∏ÂÖ≥&lt;/li>
&lt;li>ÂÜÖÂ≠òÁõ∏ÂÖ≥&lt;/li>
&lt;li>Á®ãÂ∫èÊéßÂà∂ÂëΩ‰ª§&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;h3 id="ÂêØÁî®-monitor-Êó∂-kernel-ÂêØÂä®ÊµÅÁ®ã">ÂêØÁî® Monitor Êó∂ Kernel ÂêØÂä®ÊµÅÁ®ã&lt;/h3>
&lt;ol>
&lt;li>Kernel È¶ñÂÖàÂÅöÂøÖË¶ÅÁöÑÂàùÂßãÂåñ, GIC, ÂºÇÂ∏∏ÂêëÈáèË°®, MMUÁ≠â.&lt;/li>
&lt;li>Â∞ÜÊéßÂà∂ÊùÉ‰∫§Áªô Monitor, Á≠âÂæÖÁî®Êà∑ËæìÂÖ•.&lt;/li>
&lt;/ol>
&lt;p>¬†&lt;/p>
&lt;h2 id="kernel-debug-ËøáÁ®ãÁ§∫‰æã">Kernel debug ËøáÁ®ãÁ§∫‰æã&lt;/h2>
&lt;h3 id="Á§∫‰æã‰∏Ä-Êü•ÁúãÂèòÈáè-var-ÁöÑÂÄº">Á§∫‰æã‰∏Ä: Êü•ÁúãÂèòÈáè &lt;code>var&lt;/code> ÁöÑÂÄº&lt;/h3>
&lt;ol>
&lt;li>Áî®Êà∑ËæìÂÖ• &lt;code>print var&lt;/code> Êåá‰ª§.&lt;/li>
&lt;li>Áî±Á¨¶Âè∑Â§ÑÁêÜÊ®°Âùó, Â∞Ü&lt;code>var&lt;/code>Á¨¶Âè∑ËΩ¨‰∏∫var ËôöÊãüÂú∞ÂùÄ.&lt;/li>
&lt;li>Áî±Ê∂àÊÅØÊî∂ÂèëÊåá‰ª§Â∞ÜËØ∑Ê±ÇÂ∞ÅË£Ö‰∏∫RSPÂçèËÆÆÂåÖÊ†ºÂºè, Âπ∂ÂèëÈÄÅÂà∞ Monitor Server.&lt;/li>
&lt;li>ÊâßË°åÊµÅÁ®ã‰∫§Áªô Monitor Server, ÂÆÉËÆøÈóÆËØ•Âú∞ÂùÄ, Â∞ÜÂÜÖÂÆπÂ∞ÅË£ÖÂèëÂõû Monitor Client.&lt;/li>
&lt;li>Client ËæìÂá∫&lt;code>var&lt;/code>ÁöÑÂÄº, ÁªßÁª≠Á≠âÂæÖÁî®Êà∑ËæìÂÖ•&lt;/li>
&lt;/ol>
&lt;h3 id="Á§∫‰æã‰∫å-Ê∑ªÂä†Êñ≠ÁÇπÂà∞-main-ÂáΩÊï∞">Á§∫‰æã‰∫å: Ê∑ªÂä†Êñ≠ÁÇπÂà∞ &lt;code>main&lt;/code> ÂáΩÊï∞&lt;/h3>
&lt;ol>
&lt;li>Áî®Êà∑ËæìÂÖ• &lt;code>break main&lt;/code> Êåá‰ª§&lt;/li>
&lt;li>Áî±Á¨¶Âè∑Â§ÑÁêÜÊ®°Âùó, Ëß£ÊûêÂæóÂà∞ &lt;code>main&lt;/code> ÂáΩÊï∞ÁöÑÂú∞ÂùÄ.&lt;/li>
&lt;li>Ê∂àÊÅØÊî∂ÂèëÊ®°ÂùóÂ∞ÜËØ∑Ê±ÇÂ∞ÅË£Ö‰∏∫RSPÂåÖÊ†ºÂºè, ÂèëÈÄÅÂà∞Monitor Server.&lt;/li>
&lt;li>ÊâßË°åÊµÅÁ®ã‰∫§Áªô Server. ÂÆÉÊâßË°å &lt;em>breakpoint exception Êåá‰ª§&lt;/em>, Âπ∂ËÆæÁΩÆÁõ∏ÂÖ≥ËΩØ‰ª∂Êñ≠ÁÇπÁõ∏ÂÖ≥ÂØÑÂ≠òÂô®&lt;/li>
&lt;li>ÊâßË°åÊµÅ‰∫§Áªô Kernel, Áõ¥Âà∞ËææÂà∞Êñ≠ÁÇπÂ§Ñ(ÂèØ‰ΩøÁî®Âú∞ÂùÄ+ContextIDÂèåÈáçÈ™åËØÅ), Ëß¶ÂèëDebugÂºÇÂ∏∏&lt;/li>
&lt;li>DebugÂºÇÂ∏∏Â±û‰∫éÂêåÊ≠•ÂºÇÂ∏∏, Áî± Monitor Á≥ªÁªüÊé•ÁÆ°, ÂõûÂà∞ Client ÁªßÁª≠Á≠âÂæÖÁî®Êà∑ËæìÂÖ•&lt;/li>
&lt;/ol>
&lt;h3 id="Á§∫‰æã‰∏â-ÂçïÊ≠•ÊâßË°å">Á§∫‰æã‰∏â: ÂçïÊ≠•ÊâßË°å&lt;/h3>
&lt;ol>
&lt;li>Áî®Êà∑ËæìÂÖ• &lt;code>step&lt;/code> Êåá‰ª§&lt;/li>
&lt;li>Ê∂àÊÅØÊî∂ÂèëÊ®°ÂùóÂ∞ÜËØ∑Ê±ÇÂ∞ÅË£Ö‰∏∫RSPÂåÖÊ†ºÂºè, ÂèëÈÄÅÂà∞ Monitor Server.&lt;/li>
&lt;li>ÊâßË°åÊµÅÁ®ã‰∫§Áªô Server, ÂêØÁî® software step. ÁÑ∂ÊâßË°å‰∏ÄÊ¨°ÂºÇÂ∏∏ËøîÂõû, ÂõûÂà∞Kernel ÁªßÁª≠ÊâßË°å.&lt;/li>
&lt;li>Âõ†‰∏∫ÂêØÁî®‰∫Ü Software step, ÂõûÂà∞ Kernel ÊâßË°åÂÆå‰∏ÄÊù°Êåá‰ª§Âêé, Â∞±‰ºöËß¶Âèë DebugÂºÇÂ∏∏&lt;/li>
&lt;li>Debug ÂºÇÂ∏∏Â±û‰∫éÂêåÊ≠•ÂºÇÂ∏∏, Áî± Monitor Á≥ªÁªüÊé•ÁÆ°, ÂõûÂà∞ Client ÁªßÁª≠Á≠âÂæÖÁî®Êà∑ËæìÂÖ•&lt;/li>
&lt;/ol>
&lt;p>¬†&lt;/p>
&lt;h2 id="ÂÖ∂‰ªñÊãìÂ±ïÂäüËÉΩ">ÂÖ∂‰ªñÊãìÂ±ïÂäüËÉΩ&lt;/h2>
&lt;p>back trace&lt;/p>
&lt;p>ÊÄßËÉΩÂàÜÊûê&lt;/p>
- https://wangloo.github.io/posts/os-learning/monitor/ - @2019 Notepadium.</description></item><item><title>ARMv8-A MMU ‰ªãÁªç</title><link>https://wangloo.github.io/posts/armv8/mmu/</link><pubDate>Thu, 29 Sep 2022 08:01:33 +0800</pubDate><guid>https://wangloo.github.io/posts/armv8/mmu/</guid><description>Soben's Secret Base https://wangloo.github.io/posts/armv8/mmu/ -&lt;h2 id="introduction">Introduction&lt;/h2>
&lt;p>MMU: ‰∏ìÁî®‰∫éÂ∞ÜËôöÊãüÂú∞ÂùÄËΩ¨Êç¢‰∏∫Áâ©ÁêÜÂú∞ÂùÄ. ÈÄöÂ∏∏ÈÖçÂêàÂàÜÈ°µÊú∫Âà∂Êù•Â∑•‰Ωú.&lt;/p>
&lt;p>È°µË°®: È°µË°®‰∏≠ÁöÑË°®È°πÂåÖÂê´Êèê‰æõËôöÊãüÂú∞ÂùÄÂíåÁâ©ÁêÜÂú∞ÂùÄ‰πãÈó¥ÁöÑÊò†Â∞Ñ.&lt;/p>
&lt;p>MMUÂ∞±ÊòØÁõ¥Êé•ËÆøÈóÆÈ°µË°®, Âπ∂‰∏îÈÄöËøáÂ∞ÜÈ¢ëÁπÅ‰ΩøÁî®ÁöÑÊò†Â∞ÑÁºìÂ≠òÂà∞TLB‰∏≠.&lt;/p>
&lt;h3 id="mmu-ÁöÑÁªìÊûÑ">MMU ÁöÑÁªìÊûÑ&lt;/h3>
&lt;p>MMUÊòØ‰∏ÄÁßçÁ°¨‰ª∂, ÂèØ‰ª•ÈÄöËøáÂú®ÈÄÇÂΩìÁöÑÂÆâÂÖ®Áä∂ÊÄÅ‰∏ãÂØπÂÖ∂ËøõË°åÈÖçÁΩÆ. ÊØè‰∏™CoreÈÉΩÊúâËá™Â∑±ÁöÑMMU, ÊØè‰∏™MMUÂåÖÊã¨:&lt;/p>
&lt;ol>
&lt;li>‰∏Ä‰∏™TLB, ÁºìÂ≠òÊúÄËøëËÆøÈóÆÁöÑÊò†Â∞Ñ.&lt;/li>
&lt;li>‰∏Ä‰∏™Table Walk Unit, ‰ªéÂÜÖÂ≠ò‰∏≠Êü•ËØ¢È°µË°®, ÂæóÂà∞ÊúÄÁªàÁöÑËôöÊãüÂú∞ÂùÄ-Áâ©ÁêÜÂú∞ÂùÄÁöÑÊò†Â∞Ñ.&lt;/li>
&lt;/ol>
&lt;p>MMU ÊéßÂà∂ÁùÄÊï¥‰∏™Á≥ªÁªüÁöÑÁºìÂ≠òÁ≠ñÁï•, ÂÜÖÂ≠òÂ±ûÊÄßÂíåËÆøÈóÆÊùÉÈôê. MMUÂºÄÂêØÂêé, ËΩØ‰ª∂ÂèëÂá∫ÁöÑÊâÄÊúâÂÜÖÂ≠òËÆøÈóÆÈÉΩ‰ΩøÁî®ËôöÊãüÂú∞ÂùÄ, Ë¶ÅÊ±ÇMMU‰∏∫ÊØèÊ¨°ËÆøÈóÆËøõË°åÂú∞ÂùÄËΩ¨Êç¢.&lt;/p>
&lt;h3 id="mmu-ÁöÑÈÖçÁΩÆ">MMU ÁöÑÈÖçÁΩÆ&lt;/h3>
&lt;p>Âú®ÂêØÁî®MMUÂâç, ÂøÖÈ°ªÂëäÁü•ÂÖ∂È°µË°®Â≠òÊîæÁöÑ‰ΩçÁΩÆ.&lt;/p>
&lt;h3 id="mmu-Âú∞ÂùÄËΩ¨Êç¢ÁöÑËøáÁ®ã">MMU Âú∞ÂùÄËΩ¨Êç¢ÁöÑËøáÁ®ã&lt;/h3>
&lt;p>ÂØπ‰∫éÊØè‰∏™ËΩ¨Êç¢ËØ∑Ê±Ç, MMUÈ¶ñÂÖàÊ£ÄÊü•TLBÊòØÂê¶Â∑≤ÁªèÂØπËØ•Âú∞ÂùÄÁºìÂ≠ò, Â¶ÇÊûúËØ•Âú∞ÂùÄÊú™ÁºìÂ≠ò, ÂàôÈúÄË¶ÅÈÅçÂéÜÈ°µË°®.&lt;/p>
&lt;p>È°µË°®ÈÅçÂéÜÂçïÂÖÉÂú®È°µË°®‰∏≠ÊêúÁ¥¢Áõ∏ÂÖ≥ÁöÑÊò†Â∞ÑË°®È°π.&lt;/p>
&lt;ul>
&lt;li>‰∏ÄÊó¶ÊâæÂà∞Êò†Â∞Ñ, MMUÂ∞±‰ºöÊ£ÄÊü•ÊùÉÈôêÂíåÂ±ûÊÄß. ÂÜ≥ÂÆöÂÖÅËÆ∏Êú¨Ê¨°ËÆøÈóÆ, ÊàñËÄÖÂèëÂá∫ÊïÖÈöú‰ø°Âè∑.&lt;/li>
&lt;li>Ëã•Êú™ÊâæÂà∞Êò†Â∞Ñ, ÂàôËß¶ÂèëÁº∫È°µÂºÇÂ∏∏.&lt;/li>
&lt;/ul>
&lt;h3 id="È°µË°®ÁöÑÂ∑•‰ΩúÂéüÁêÜ">È°µË°®ÁöÑÂ∑•‰ΩúÂéüÁêÜ&lt;/h3>
&lt;p>È°µË°®ÁöÑÂ∑•‰ΩúÊñπÂºèÊòØÂ∞ÜËôöÊãüÂú∞ÂùÄÁ©∫Èó¥ÂíåÁâ©ÁêÜÂú∞ÂùÄÁ©∫Èó¥ÂàíÂàÜ‰∏∫Â§ßÂ∞èÁõ∏Á≠âÁöÑÂùó, Áß∞‰∏∫È°µÈù¢.&lt;/p>
&lt;p>È°µË°®‰∏≠ÁöÑÊØè‰∏™Ë°®È°πÂØπÂ∫îÁùÄ‰∏ÄÂùóËôöÊãüÂú∞ÂùÄÁ©∫Èó¥‰∏≠ÁöÑÂùó, Ë°®È°πÁöÑÂÄºÂ∞±ÊòØËøôÂùóËôöÊãüÂú∞ÂùÄÁ©∫Èó¥ÂØπÂ∫îÁöÑÁâ©ÁêÜÂú∞ÂùÄÂùó, ‰ª•ÂèäËÆøÈóÆÁâ©ÁêÜÂú∞ÂùÄÊó∂Ë¶Å‰ΩøÁî®ÁöÑÂ±ûÊÄß.&lt;/p>
&lt;p>Âú®Êü•Ë°®ËøáÁ®ã‰∏≠, Â∞ÜËôöÊãüÂú∞ÂùÄÂàÜ‰∏∫‰∏§ÈÉ®ÂàÜ:&lt;/p>
&lt;ul>
&lt;li>È´òÈò∂‰ΩçÁî®‰ΩúÈ°µË°®ÁöÑÁ¥¢Âºï. Áî®Êù•ÊâæÂà∞ÂØπÂ∫îÁöÑÁâ©ÁêÜÂùó&lt;/li>
&lt;li>‰ΩéÂú∞ÂùÄÊòØÂùóÂÜÖÁöÑÂÅèÁßªÈáè, ‰∏ç‰ºöÂõ†‰∏∫Êò†Â∞ÑËÄåÊîπÂèò. È°µË°®È°π‰∏≠ÁöÑÁâ©ÁêÜÂú∞ÂùÄ‰∏éËØ•ÂÅèÁßªÁªÑÂêàÂΩ¢ÊàêÁî®‰∫éËÆøÈóÆÂÜÖÂ≠òÁöÑÁâ©ÁêÜÂú∞ÂùÄ.&lt;/li>
&lt;/ul>
&lt;h4 id="Â§öÁ∫ßÈ°µË°®">Â§öÁ∫ßÈ°µË°®&lt;/h4>
&lt;p>ÂÆûÈôÖÂÆûÁé∞‰∏≠, Â§öÈááÁî®Â§öÁ∫ßÈ°µË°®ÁöÑÊñπÊ°à, ÂêÑÁ∫ßÈ°µË°®Ëá™ÂÆöÂêë‰∏ãÁªÑÊàêÊ†ëÁöÑÂΩ¢Âºè, Âçè‰ΩúÂÆûÁé∞ËôöÊãüÂà∞Áâ©ÁêÜÂú∞ÂùÄÁöÑËΩ¨Êç¢.&lt;/p>
&lt;p>Ê†ë‰∏≠ÁöÑÂàÜÊîØÊàê‰∏∫È°µÁõÆÂΩï, È°µÁõÆÂΩï‰∏≠ÁöÑË°®È°π‰∏çÊòØÁõ¥Êé•Â≠òÂÇ®ÁõÆÊ†áÁâ©ÁêÜÂú∞ÂùÄ, ËÄåÊòØ‰∏ã‰∏ÄÁ∫ßÈ°µË°®ÁöÑÂú∞ÂùÄ; ÊúÄÂêé‰∏ÄÁ∫ßÈ°µË°®ÁöÑË°®È°π‰∏≠‰øùÂ≠òÁùÄÁõÆÊ†áÁâ©ÁêÜÂú∞ÂùÄ.&lt;/p>
&lt;blockquote>
&lt;p>Â§öÁ∫ßÈ°µË°®ÊòØÂáèÂ∞èÈ°µË°®Âç†Áî®Â≠òÂÇ®Á©∫Èó¥ËøáÂ§ßÁöÑÊúâÊïàÊñπÊ°à.&lt;/p>
&lt;/blockquote>
&lt;p>È°∂Á∫ßÈ°µË°®Â∞ÜÂú∞ÂùÄÁ©∫Èó¥ÂàíÂàÜ‰∏∫Â§ßÂùó, ÊØè‰∏™Ë°®È°πÂèØ‰ª•ÊåáÂêëÂ§ßÂ∞èÁõ∏Á≠âÁöÑÂÜÖÂ≠òÂùó. ‰πüÂèØ‰ª•ÊåáÂêëÂ∞ÜÂùóËøõË°åÂÜçÊ¨°ÁªÜÂàÜÁöÑ‰∏ã‰∏ÄÁ∫ßÈ°µË°®. ÊîØÊåÅÂ§ßÂùóÁöÑ‰ºòÁÇπ:&lt;/p>
&lt;ul>
&lt;li>Â§ßÁöÑÂÜÖÂ≠òÂùóÈúÄË¶ÅÊü•Ë°®ÁöÑÊ¨°Êï∞Êõ¥Â∞ë&lt;/li>
&lt;li>ÊèêÂçáTLBÁöÑÊïàÁéá, Âõ†‰∏∫‰∏Ä‰∏™TLBË°®È°πË¶ÜÁõñÊõ¥Â§ßÁöÑÂÜÖÂ≠òÂå∫Âüü.&lt;/li>
&lt;/ul>
&lt;p>Âá°‰∫ãÈÉΩÊòØÊúâÂà©ÊúâÂºä, ‰ΩøÁî®Â§ßÂùó‰πüÂ¢ûÂä†‰∫ÜÂÜÖÂ≠òÊµ™Ë¥π, ÂÆûÈôÖ‰ΩøÁî®Êó∂ÈúÄË¶ÅÊ†πÊçÆÈúÄË¶ÅÊù•ÊùÉË°°.&lt;/p>
&lt;h2 id="ÂÜÖÂ≠òÁ±ªÂûã">ÂÜÖÂ≠òÁ±ªÂûã&lt;/h2>
&lt;h3 id="ÊôÆÈÄöÁ±ªÂûãÂÜÖÂ≠ò">ÊôÆÈÄöÁ±ªÂûãÂÜÖÂ≠ò&lt;/h3>
&lt;p>ÊôÆÈÄöÁ±ªÂûãÁöÑÂÜÖÂ≠òÊòØÂº±‰∏ÄËá¥ÊÄßÁöÑ(weakly ordered)ÂÜÖÂ≠òÊ®°Âûã, Ê≤°ÊúâÈ¢ùÂ§ñÁöÑÁ∫¶Êùü, ÂèØ‰ª•Êèê‰æõÊúÄÈ´òÁöÑÂÜÖÂ≠òËÆøÈóÆÊÄßËÉΩ.&lt;/p>
&lt;p>ÈÄöÂ∏∏‰ª£Á†ÅÊÆµ, Êï∞ÊçÆÊÆµ‰ª•ÂèäÂÖ∂‰ªñÊï∞ÊçÆÈÉΩÊîæÂú®ÊôÆÈÄöÂÜÖÂ≠ò‰∏≠.&lt;/p>
&lt;p>ÊôÆÈÄöÂÜÖÂ≠òÂÖÅËÆ∏Â§ÑÁêÜÂô®ÂÅöÂæàÂ§ö‰ºòÂåñ, Â¶ÇÂàÜÊîØÈ¢ÑÊµã, Êï∞ÊçÆÈ¢ÑÂèñ, Cache lineÈ¢ÑÂèñ, ‰π±Â∫èÊâßË°åÁ≠â.&lt;/p>
&lt;h3 id="ËÆæÂ§áÁ±ªÂûãÂÜÖÂ≠ò">ËÆæÂ§áÁ±ªÂûãÂÜÖÂ≠ò&lt;/h3>
&lt;p>CPUËÆøÈóÆËÆæÂ§áÂÜÖÂ≠ò‰ºöÊúâÂæàÂ§öÈôêÂà∂, Â¶Ç‰∏çËÉΩËøõË°åÊï∞ÊçÆÈ¢ÑÂèñÁ≠â. ËÆæÂ§áÁ±ªÂûãÁöÑÂÜÖÂ≠ò‰∏•Ê†ºÊåâÁÖßÊåá‰ª§ÁöÑÈ°∫Â∫èÊù•ÊâßË°åÁöÑ.&lt;/p>
&lt;p>ËÆæÂ§áÁ±ªÂûãÂÜÖÂÆπÈÄöÂ∏∏ÁïôÁªôËÆæÂ§áÊù•ËÆøÈóÆ, ‰æãÂ¶Ç‰∏≠Êñ≠ÊéßÂà∂Âô®(GIC), ‰∏≤Âè£, ÂÆöÊó∂Âô®Á≠â.&lt;/p>
&lt;h2 id="‰∏§Â•óÈ°µË°®">‰∏§Â•óÈ°µË°®&lt;/h2>
&lt;ul>
&lt;li>ÂΩìCPUËÆøÈóÆÁöÑÂú∞ÂùÄÂ±û‰∫é&lt;em>Áî®Êà∑Á©∫Èó¥&lt;/em>Êó∂, MMU‰ºöËá™Âä®ÈÄâÊã©&lt;strong>TTBR0&lt;/strong>ÊåáÂêëÁöÑÈ°µË°®.&lt;/li>
&lt;li>ÂΩìCPUËÆøÈóÆÁöÑÂú∞ÂùÄÂ±û‰∫é&lt;em>ÂÜÖÊ†∏Á©∫Èó¥&lt;/em>Êó∂. MMU‰ºöËá™Âä®ÈÄâÊã©&lt;strong>TTBR1&lt;/strong>ÊåáÂêëÁöÑÈ°µË°®&lt;/li>
&lt;/ul>
&lt;p>EL2ÂíåEL3Ê≤°ÊúâTTBR1, Âè™ÊúâTTBR0. ‰πüÂ∞±ÊÑèÂë≥ÁùÄ:&lt;/p>
&lt;p>‚Ä¢ If EL2 is using AArch64, it can only use Virtual Addresses in the range 0x0 to 0x0000FFFF_FFFFFFFF.
‚Ä¢ If EL3 is using AArch64, it can only use Virtual Addresses in the range 0x0 to 0x0000FFFF_FFFFFFFF.&lt;/p>
&lt;h2 id="Ë∂äÊùÉ-Ë∂äÁïå">Ë∂äÊùÉ, Ë∂äÁïå&lt;/h2>
&lt;p>Âú®Êú™‰ΩøÁî®ËôöÊãüÂú∞ÂùÄÁ©∫Èó¥‰πãÂâç, ÊâÄÊúâÁöÑÁî®Êà∑Á®ãÂ∫èÈÉΩÂèØ‰ª•ËÆøÈóÆÂÖ®ÈÉ®ÁöÑÁâ©ÁêÜÂÜÖÂ≠ò, ÊâÄ‰ª•ÊÅ∂ÊÑèÁ®ãÂ∫èÂèØ‰ª•‰øÆÊîπÂÖ∂‰ªñÁ®ãÂ∫èÁöÑÂÜÖÂ≠òÊï∞ÊçÆ, Ëøô‰ΩøÂæóÊï¥‰∏™Á≥ªÁªüÂ§Ñ‰∫éÂç±Èô©ÁöÑÁä∂ÊÄÅ. ÊØè‰∏™ËøõÁ®ãÁöÑÂú∞ÂùÄÁ©∫Èó¥ÈÉΩË¶ÅÂèóÂà∞‰øùÊä§, ‰ª•ÂÖçË¢´ÂÖ∂‰ªñËøõÁ®ãÊúâÊÑè/Êó†ÊÑèÁöÑÁ†¥Âùè.&lt;/p>
&lt;p>Áé∞‰ª£Êìç‰ΩúÁ≥ªÁªü‰∏≠, ÊØè‰∏™ËøõÁ®ãÈÉΩÊúâÁã¨Á´ãÁöÑËôöÊãüÂú∞ÂùÄÁ©∫Èó¥. Âú®ËøõÁ®ãÁöÑËßíÂ∫¶‰∏ä, ÂÆÉÊã•ÊúâÊï¥‰∏™ËôöÊãüÂú∞ÂùÄÁ©∫Èó¥. ‰∏çÂêåÁöÑËøõÁ®ãÂèØ‰ª•ÂêåÊó∂‰ΩøÁî®‰∏Ä‰∏™ËôöÊãüÂú∞ÂùÄ, MMUÈÄöËøáÈ°µË°®Â∞ÜÂÖ∂Êò†Â∞ÑÂà∞ÂêàÈÄÇÁöÑÁâ©ÁêÜÂú∞ÂùÄ.&lt;/p>
&lt;h3 id="‰∏§‰∏™Áâ©ÁêÜÂú∞ÂùÄÁ©∫Èó¥">‰∏§‰∏™Áâ©ÁêÜÂú∞ÂùÄÁ©∫Èó¥&lt;/h3>
&lt;p>ARMv8 ‰ΩìÁ≥ªÁªìÊûÑÂÆö‰πâ‰∏§‰∏™Áâ©ÁêÜÂú∞ÂùÄÁ©∫Èó¥: secure address space Âíå non-secure address space.&lt;/p>
&lt;p>ÁêÜËÆ∫‰∏ä, ÂÆâÂÖ®ÂíåÈùûÂÆâÂÖ®ÁöÑÂú∞ÂùÄÁ©∫Èó¥ÊòØÁõ∏‰∫íÁã¨Á´ãÁöÑ, ÁÑ∂ËÄåÁé∞ÂÆû‰∏≠Â§ßÂ§öÊï∞Á≥ªÁªüÈÉΩÂ∞ÜÂÆâÂÖ®ÂíåÈùûÂÆâÂÖ®ËßÜ‰∏∫ËÆøÈóÆÊéßÂà∂ÁöÑÂ±ûÊÄß. Ê≠£Â∏∏(ÈùûÂÆâÂÖ®)‰∏ñÁïåÂè™ËÉΩËÆøÈóÆÈùûÂÆâÂÖ®ÁöÑÁâ©ÁêÜÂÜÖÂ≠ò; ËÄåÂÆâÂÖ®‰∏ñÁïåÂèØ‰ª•ËÆøÈóÆËøô‰∏§‰∏™Âú∞ÂùÄÁ©∫Èó¥.&lt;/p>
&lt;h3 id="armv8-mmuÊùÉÈôêÊéßÂà∂">ARMv8 MMUÊùÉÈôêÊéßÂà∂&lt;/h3>
&lt;p>Á®ãÂ∫èËØ∑Ê±ÇÊüê‰∏™Âú∞ÂùÄÊó∂, MMUÈúÄË¶ÅËøõË°åÊùÉÈôêÊ£ÄÊü•. Â¶ÇÊûúËØ∑Ê±ÇÁöÑÂú∞ÂùÄÊòØÊï∞ÊçÆ, ÂàôÊ£ÄÊü•ËØªÂÜôÊùÉÈôê; Â¶ÇÊûúËØ∑Ê±ÇÁöÑÊòØÂú∞ÂùÄ, ÂàôÊ£ÄÊü•ÂÖ∂ÂèØÊâßË°åÊùÉÈôê.&lt;/p>
&lt;p>ARMv8 È°µË°®È°πÁöÑAPÂ≠óÊÆµÊéßÂà∂ËØ•‰∏çÂêåÂºÇÂ∏∏Á≠âÁ∫ß‰∏ã, È°µÈù¢ÁöÑËØªÂÜôÊùÉÈôê.&lt;/p>
&lt;p>[Ë°®Ê†º]&lt;/p>
&lt;p>ARMv8 È°µË°®È°πÁöÑPNXÂ≠óÊÆµÂíåXN/UXNÂ≠óÊÆµÊù•ËÆæÁΩÆCPUÊòØÂê¶ÂØπËøô‰∏™È°µÈù¢ÊúâÊâßË°åÊùÉÈôê.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>ÂΩìÁ≥ªÁªüÊúâ‰∏§Â•óÈ°µË°®Êó∂, UXNÊòØÁî®Êù•ËÆæÁΩÆÁî®Êà∑Á©∫Èó¥È°µÈù¢ÊòØÂê¶ÊúâÂèØÊâßË°åÊùÉÈôê; PXN Áî®Êù•ËÆæÁΩÆÁâπÊùÉÁ©∫Èó¥ÁöÑÈ°µÈù¢ÊòØÂê¶ÊúâÂèØÊâßË°åÊùÉÈôê.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Ëã•Á≥ªÁªüÂè™Êúâ‰∏ÄÂ•óÈ°µË°®, ÂàôÈÄöËøáXNÂ≠óÊÆµÊéßÂà∂&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="È°µË°®ÁöÑÁªìÊûÑ">È°µË°®ÁöÑÁªìÊûÑ&lt;/h2>
&lt;h3 id="Âú∞ÂùÄÂÆΩÂ∫¶">Âú∞ÂùÄÂÆΩÂ∫¶&lt;/h3>
&lt;p>48bit&lt;/p>
&lt;h3 id="È°µÈù¢Á≤íÂ∫¶">È°µÈù¢Á≤íÂ∫¶&lt;/h3>
&lt;p>È°µÈù¢Á≤íÂ∫¶Ë°®Á§∫‰∏ÄÊ¨°ÊúÄÂ∞èÂàÜÈÖçÂÜÖÂ≠òÂùóÁöÑÂ§ßÂ∞è. AArch64ÊîØÊåÅ‰∏âÁßçÈ°µÁöÑÂ§ßÂ∞è, 4KB, 16KB, 64KB. ÊîØÊåÅÂì™‰∏ÄÁßçÊòØÁî±ÂÆûÁé∞ÂÆö‰πâÁöÑ„ÄÇÂàõÂª∫È°µË°®ÁöÑ‰ª£Á†ÅËÉΩÂ§üËØªÂèñÁ≥ªÁªüÂØÑÂ≠òÂô®&lt;code>ID_AA64MMFR0_EL1&lt;/code>Ôºå‰ª•ÊâæÂá∫Âì™‰∫õÊòØÂèóÊîØÊåÅÁöÑÂ§ßÂ∞è„ÄÇCortex-A53Â§ÑÁêÜÂô®ÊîØÊåÅÊâÄÊúâ‰∏âÁßçÂ∞∫ÂØ∏Ôºå‰ΩÜÊúâ‰∫õÂ§ÑÁêÜÂô®ÁöÑÊó©ÊúüÁâàÊú¨Âπ∂ÈùûÂ¶ÇÊ≠§Ôºå‰æãÂ¶ÇCortex-A57ÔºåÂÆÉ‰∏çÊîØÊåÅ16KÁ≤íÂ∫¶„ÄÇ&lt;/p>
&lt;h3 id="aarch64-È°µË°®È°πÁªìÊûÑ">AArch64 È°µË°®È°πÁªìÊûÑ&lt;/h3>
&lt;h4 id="Êó†ÊïàÈ°µË°®È°π">Êó†ÊïàÈ°µË°®È°π&lt;/h4>
&lt;h4 id="table">table&lt;/h4>
&lt;h4 id="block">block&lt;/h4>
&lt;h3 id="È°µË°®ÁªìÊûÑ4kbÈ°µÈù¢‰∏∫‰æã">È°µË°®ÁªìÊûÑ(4KBÈ°µÈù¢‰∏∫‰æã)&lt;/h3>
&lt;p>‰ª•4KBÈ°µÈù¢Á≤íÂ∫¶, ËôöÊãüÂú∞ÂùÄÂÆΩÂ∫¶‰∏∫ 48‰Ωç. ‰ΩøÁî®4Á∫ßÈ°µË°®.&lt;/p>
&lt;p>48‰ΩçÂú∞ÂùÄÊØèÂ±ÇËΩ¨Êç¢Êúâ9‰∏™Âú∞ÂùÄ‰ΩçÔºåÂç≥ÊØèÂ±Ç512‰∏™Êù°ÁõÆÔºåÊúÄÂêé12‰ΩçÈÄâÊã©4kBÂÜÖÁöÑ‰∏Ä‰∏™Â≠óËäÇÔºåÁõ¥Êé•Êù•Ëá™ÂéüÂßãÂú∞ÂùÄ&lt;/p>
&lt;h2 id="ËôöÊãüÂú∞ÂùÄÂà∞Áâ©ÁêÜÂú∞ÂùÄÁöÑËΩ¨Êç¢ËøáÁ®ã">ËôöÊãüÂú∞ÂùÄÂà∞Áâ©ÁêÜÂú∞ÂùÄÁöÑËΩ¨Êç¢ËøáÁ®ã&lt;/h2>
&lt;p>ÂΩìÂ§ÑÁêÜÂô®‰∏∫Ëé∑ÂèñÊåá‰ª§ÊàñÊï∞ÊçÆËÆøÈóÆÂèëÂá∫‰∏Ä‰∏™64‰ΩçÁöÑËôöÊãüÂú∞ÂùÄÊó∂ÔºåMMUÁ°¨‰ª∂Â∞ÜËôöÊãüÂú∞ÂùÄËΩ¨Êç¢‰∏∫Áõ∏Â∫îÁöÑÁâ©ÁêÜÂú∞ÂùÄ„ÄÇÂØπ‰∫éËôöÊãüÂú∞ÂùÄÔºåÂâç16‰Ωç[63:47]ÂøÖÈ°ªÂÖ®ÈÉ®‰∏∫0Êàñ1ÔºåÂê¶ÂàôÂú∞ÂùÄÂ∞ÜËß¶ÂèëÊïÖÈöú„ÄÇ&lt;/p>
&lt;h3 id="non-secure-and-secure-access">Non-secure and secure access&lt;/h3>
&lt;p>ARMv8-AÊû∂ÊûÑÂÆö‰πâ‰∫Ü‰∏§ÁßçÂÆâÂÖ®Áä∂ÊÄÅ:ÂÆâÂÖ®ÁöÑÂíåÈùûÂÆâÂÖ®ÁöÑ„ÄÇÂÆÉËøòÂÆö‰πâ‰∫Ü‰∏§‰∏™Áâ©ÁêÜÂú∞ÂùÄÁ©∫Èó¥:ÂÆâÂÖ®ÁöÑÂíåÈùûÂÆâÂÖ®ÁöÑ. Ê≠£Â∏∏(ÈùûÂÆâÂÖ®)‰∏ñÁïåÂè™ËÉΩËÆøÈóÆÈùûÂÆâÂÖ®Áâ©ÁêÜÂú∞ÂùÄÁ©∫Èó¥„ÄÇÂÆâÂÖ®‰∏ñÁïåÂèØ‰ª•ËÆøÈóÆ‰∏§‰∏™Áâ©ÁêÜÂú∞ÂùÄÁ©∫Èó¥„ÄÇËøô‰πüÊòØÈÄöËøáËΩ¨Êç¢Ë°®Êù•ÊéßÂà∂ÁöÑ„ÄÇ&lt;/p>
&lt;p>Âú®ÈùûÂÆâÂÖ®Áä∂ÊÄÅ‰∏ãÔºåËΩ¨Êç¢Ë°®‰∏≠ÁöÑNS‰ΩçÂíåNSTable‰ΩçÂ∞ÜË¢´ÂøΩÁï•„ÄÇÂè™ËÉΩËÆøÈóÆÈùûÂÆâÂÖ®ÂÜÖÂ≠ò„ÄÇÂú®ÂÆâÂÖ®Áä∂ÊÄÅ‰∏ãÔºåNS‰ΩçÂíåNSTable‰ΩçÊéßÂà∂ËôöÊãüÂú∞ÂùÄËΩ¨Êç¢‰∏∫ÂÆâÂÖ®Áâ©ÁêÜÂú∞ÂùÄËøòÊòØÈùûÂÆâÂÖ®Áâ©ÁêÜÂú∞ÂùÄ„ÄÇ&lt;/p>
&lt;p>You can use SCR_EL3.SIF Êù•Á¶ÅÁî®ÂÆâÂÖ®‰∏ñÁïåËÆøÈóÆÈùûÂÆâÂÖ®Âú∞ÂùÄ.&lt;/p>
&lt;h2 id="Áõ∏ÂÖ≥ÁöÑÂØÑÂ≠òÂô®">Áõ∏ÂÖ≥ÁöÑÂØÑÂ≠òÂô®&lt;/h2>
&lt;p>‰∏éÂú∞ÂùÄËΩ¨Êç¢Áõ∏ÂÖ≥ÁöÑÂØÑÂ≠òÂô®‰∏ªË¶ÅÊúâ‰ª•‰∏ãÂá†‰∏™:&lt;/p>
&lt;ol>
&lt;li>ËΩ¨Êç¢ÊéßÂà∂ÂØÑÂ≠òÂô®(TCR)&lt;/li>
&lt;li>Á≥ªÁªüÊéßÂà∂ÂØÑÂ≠òÂô®(SCTLR)&lt;/li>
&lt;li>È°µË°®Âü∫Âú∞ÂùÄÂØÑÂ≠òÂô®(TTBR)&lt;/li>
&lt;/ol>
&lt;h3 id="tcr">TCR&lt;/h3>
&lt;p>IPS: ÈÖçÁΩÆÂú∞ÂùÄËΩ¨Êç¢ÂêéËæìÂá∫Áâ©ÁêÜÂú∞ÂùÄÁöÑÊúÄÂ§ßÂÄº&lt;/p>
&lt;p>TxSz: ÈÖçÁΩÆËæìÂÖ•Âú∞ÂùÄÁöÑÊúÄÂ§ßÂÄº, Âç≥ËôöÊãüÂú∞ÂùÄÁöÑÂÆΩÂ∫¶&lt;/p>
&lt;p>TG1: ÈÖçÁΩÆTTBR1È°µË°®ÁöÑÈ°µÈù¢Á≤íÂ∫¶Â§ßÂ∞è&lt;/p>
&lt;p>SHx: ÈÖçÁΩÆTTBRxÁõ∏ÂÖ≥ÂÜÖÂ≠òÁöÑCacheÂÖ±‰∫´Â±ûÊÄß&lt;/p>
&lt;p>ORGNx:&lt;/p>
&lt;p>IRGNx:&lt;/p>
&lt;h3 id="sctlr">SCTLR&lt;/h3>
&lt;p>M: Disable/Enable MMUÂú∞ÂùÄËΩ¨Êç¢&lt;/p>
&lt;p>C: Disable/Enable Data Cache&lt;/p>
&lt;p>I: Disable/Enable Instruction Cache&lt;/p>
&lt;h3 id="ttbr">TTBR&lt;/h3>
&lt;p>Â≠òÂÇ®È°µË°®ÁöÑÂü∫Âú∞ÂùÄ&lt;/p>
&lt;h2 id="aarch32-ËôöÊãüÂÜÖÂ≠òÁ≥ªÁªü">AArch32 ËôöÊãüÂÜÖÂ≠òÁ≥ªÁªü&lt;/h2>
&lt;p>ARMv8 AArch32 ÁöÑËôöÊãüÂÜÖÂ≠òÁ≥ªÁªüÂêëÂêéÂÖºÂÆπARMv7, ‰∏éARMv7ÁöÑÂü∫Êú¨‰∏ÄËá¥.&lt;/p>
- https://wangloo.github.io/posts/armv8/mmu/ - @2019 Notepadium.</description></item><item><title>GICv3 - for ARMV8</title><link>https://wangloo.github.io/posts/armv8/gicv3/</link><pubDate>Sat, 10 Sep 2022 21:51:49 +0800</pubDate><guid>https://wangloo.github.io/posts/armv8/gicv3/</guid><description>Soben's Secret Base https://wangloo.github.io/posts/armv8/gicv3/ -&lt;h1 id="gicv3generic-interrupt-controller---version-3">GICV3(Generic Interrupt Controller - version 3)&lt;/h1>
&lt;h2 id="ÂÖ≥‰∫égic">ÂÖ≥‰∫éGIC&lt;/h2>
&lt;p>GICÂç≥‰∏≠Êñ≠ÊéßÂà∂Âô®, Ë¥üË¥£ÁÆ°ÁêÜ‰∏≠Êñ≠ÁöÑÊé•Êî∂, Â±èËîΩ, Ë∑ØÁî±Á≠âÁõ∏ÂÖ≥‰ªªÂä°, Âπ∂ÂêëÁ≥ªÁªüÁ®ãÂ∫èÂëòÊèê‰æõÈÖçÁΩÆÁöÑÊé•Âè£.&lt;/p>
&lt;p>GIC‰∏éÂºÇÂ∏∏Ê®°ÂûãÂçè‰ΩúÂÆåÊàê‰∏≠Êñ≠ÁöÑÊï¥‰∏™ÁîüÂëΩÂë®Êúü, GIC‰∏ªË¶ÅË¥üË¥£&lt;code>‰∏≠Êñ≠Ê∫ê-‰∫ßÁîüIRQ/FIQ‰ø°Âè∑&lt;/code>ËøôÊÆµË∑Ø, ÂÖ≥‰∫éÂ§ÑÁêÜIRQ/FIQÂàôÊòØÁî±CPUÂÜÖÈÉ®ÁöÑ&lt;em>ÂºÇÂ∏∏Ê®°Âûã&lt;/em>Êù•ÂÆåÊàê.&lt;/p>
&lt;h2 id="ÂØπÊØî-gicv2">ÂØπÊØî GICv2&lt;/h2>
&lt;ul>
&lt;li>ÊîØÊåÅÊõ¥Â§öÁöÑÂ§ÑÁêÜÂô®, Áî®&lt;code>affinity routing&lt;/code> ÊñπÊ°àÊù•ÂÅö‰∏≠Êñ≠Ë∑ØÁî±.&lt;/li>
&lt;li>ÊîØÊåÅ‰∏≠Êñ≠ÂàÜÁªÑ, ‰∏∫‰∫ÜÈÖçÂêàARMv8ÁöÑÂºÇÂ∏∏Á≠âÁ∫ßÊ®°Âûã&lt;/li>
&lt;li>Êñ∞Â¢û‰∏≠Êñ≠Á±ªÂûã: SGI, ËΩØ‰ª∂ÁîüÊàê‰∏≠Êñ≠&lt;/li>
&lt;li>Êñ∞Â¢û‰∏≠Êñ≠Á±ªÂûã: SPI, Shared Peripheral Interrupts&lt;/li>
&lt;li>ÂØπ‰∫éCPU interfaceÁöÑÂØÑÂ≠òÂô®, ÂèØÁõ¥Êé•‰ΩøÁî®Á≥ªÁªüÂØÑÂ≠òÂô®Êé•Âè£(system register interface)Êù•ËÆøÈóÆ, ÊØîmemory-mappedÁöÑÊñπÂºèÂø´.&lt;/li>
&lt;li>ITS, Interrupt Translation Service ÊöÇ‰∏ç‰ªãÁªç&lt;/li>
&lt;li>LPI, Locality-specific Peripheral Interrupts . ÊöÇ‰∏ç‰ªãÁªç&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>GICv3ÊîØÊåÅARMv8-AÊàñARMv8-RÁ≥ªÂàóÂ§ÑÁêÜÂô®, ‰ΩÜÊ≤°ÊúâÂøÖÁÑ∂ÁöÑÁªëÂÆöÂÖ≥Á≥ª. ARMv8-A‰πüÂèØ‰ª•‰ΩøÁî®GICv2.&lt;/p>
&lt;/blockquote>
&lt;h2 id="‰∏≠Êñ≠Á±ªÂûã">‰∏≠Êñ≠Á±ªÂûã&lt;/h2>
&lt;h3 id="locality-specific-peripheral-interrupt-lpi">Locality-specific Peripheral Interrupt (LPI)&lt;/h3>
&lt;p>LPIs are always &lt;a href="https://en.wikipedia.org/wiki/Message_Signaled_Interrupts">message-based interrupts&lt;/a> interrupts. ËøôÈáå‰∏çÂÅö‰ªãÁªç.&lt;a href="https://en.wikipedia.org/wiki/Message_Signaled_Interrupts">wiki&lt;/a>&lt;/p>
&lt;h3 id="private-peripheral-interrupt-ppi">Private Peripheral Interrupt (PPI)&lt;/h3>
&lt;p>PPIÊòØË∑ØÁî±Âà∞&lt;strong>Âçï‰∏™CPU&lt;/strong>ÁöÑÂ§ñËÆæ‰∏≠Êñ≠, ‰∏çÂêåÁöÑCPUÂèØ‰ª•‰ΩøÁî®Áõ∏ÂêåÁöÑ‰∏≠Êñ≠Âè∑. ‰æãÂ¶Ç, ÊâÄÊúâCPUÈÉΩÂèØ‰ª•‰ΩøÁî®‰∏≠Êñ≠Âè∑16Ë°®Á§∫ÁßÅÊúâÁöÑÂÆöÊó∂Âô®‰∏≠Êñ≠.&lt;/p>
&lt;h3 id="shared-peripheral-interrupt-spi">Shared Peripheral Interrupt (SPI)&lt;/h3>
&lt;p>SPIÊòØÂèØË∑ØÁî±Âà∞&lt;strong>‰∏ÄÁªÑCPU&lt;/strong>ÁöÑÂ§ñËÆæ‰∏≠Êñ≠, Distributor Ë¥üË¥£SPIË∑ØÁî±.&lt;/p>
&lt;h3 id="software-generated-interrupt-sgi">Software Generated Interrupt (SGI)&lt;/h3>
&lt;p>SGIÊòØÁî±Êüê‰∏™CPU‰∫ßÁîü, Ë∑ØÁî±Âà∞Á≥ªÁªü‰∏≠ÁöÑ‰∏Ä‰∏™ÊàñÂ§ö‰∏™CPU, ÈÄöÂ∏∏Áî®‰∫éÂ§ÑÁêÜÂô®Èó¥ÈÄö‰ø°.&lt;/p>
&lt;h2 id="gicv3-ÁöÑÁªÑ‰ª∂">GICv3 ÁöÑÁªÑ‰ª∂&lt;/h2>
&lt;p>GICv3Êû∂ÊûÑÁî±‰ª•‰∏ãÈÄªËæëÁªÑ‰ª∂ÊûÑÊàê:&lt;/p>
&lt;ul>
&lt;li>A Distributor&lt;/li>
&lt;li>A Redistributor for each CPU&lt;/li>
&lt;li>A CPU interface for each CPU&lt;/li>
&lt;li>Interrupt Translation Service components (ITS). ÂèØÈÄâ, ÊöÇ‰∏ç‰ªãÁªç&lt;/li>
&lt;/ul>
&lt;p>The Distributor, Redistributor ‰∏ÄËµ∑ÁªÑÊàê‰∫Ü &lt;em>IRI(Interrupt Routing Infrastructure)&lt;/em>.&lt;/p>
&lt;p>&lt;img src="./IRI.png" alt="iri">{width=&amp;ldquo;10px&amp;rdquo;}&lt;/p>
&lt;h3 id="distributor">Distributor&lt;/h3>
&lt;p>ÊéßÂà∂SPIÂíåSGIÁöÑË∑ØÁî±. ÂØπ‰∫é SPI, Êèê‰æõ‰∫Ü‰∏Ä‰∏ãÊé•Âè£:&lt;/p>
&lt;ul>
&lt;li>ÂêØÂä®/Á¶ÅÁî® SPI&lt;/li>
&lt;li>ËÆæÁΩÆ SPI ÁöÑ‰ºòÂÖàÁ∫ß&lt;/li>
&lt;li>ÈÖçÁΩÆÂØπ‰∫é SPI ÁöÑË∑ØÁî±&lt;/li>
&lt;li>ËÆæÁΩÆ SPI ÁöÑËß¶ÂèëÊñπÂºè&lt;/li>
&lt;li>ÁîüÊàê message-based SPI&lt;/li>
&lt;li>‰∏∫ÊØè‰∏™ SPI ÂàÜÁªÑ&lt;/li>
&lt;li>ÊéßÂà∂ SPI ÁöÑ &lt;code>pending and active&lt;/code> Áä∂ÊÄÅ&lt;/li>
&lt;/ul>
&lt;p>ÂØπ‰∫é&lt;code>Distributor&lt;/code>ÁöÑÂ§ßÈÉ®ÂàÜÈÖçÁΩÆÈÄöËøá&lt;code>GICD_CTLR&lt;/code>ÂÆûÁé∞. ÂåÖÊã¨:&lt;/p>
&lt;ul>
&lt;li>ÂêØÁî® Affinity routing&lt;/li>
&lt;li>Á¶ÅÁî®ÂÆâÂÖ®ÊÄß&lt;/li>
&lt;li>‰∏≠Êñ≠ÂàÜÁªÑÁöÑÈÖçÁΩÆ.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ÂÖ≥‰∫éDistributor ÂØÑÂ≠òÂô®ÈÉΩÂê´Êúâ &lt;code>GICD_&lt;/code> ÂâçÁºÄ, ÈÄöËøá &lt;code>memory-mapped&lt;/code> ÊñπÂºèËÆøÈóÆ.&lt;/p>
&lt;/blockquote>
&lt;h3 id="redistributor">Redistributor&lt;/h3>
&lt;ul>
&lt;li>ÂêØÂä®/Á¶ÅÁî® SGI Âíå PPI&lt;/li>
&lt;li>ËÆæÁΩÆ SGI Âíå PPI ÁöÑ‰ºòÂÖàÁ∫ß&lt;/li>
&lt;li>ËÆæÁΩÆ SGI Âíå PPI ÁöÑËß¶ÂèëÊñπÂºè&lt;/li>
&lt;li>‰∏∫ SGI Âíå PPI ÂàÜÈÖçÁªÑ&lt;/li>
&lt;li>ÊéßÂà∂ SGI Âíå PPI ÁöÑ &lt;code>pending&lt;/code> Áä∂ÊÄÅÂíå &lt;code>active&lt;/code> Áä∂ÊÄÅ&lt;/li>
&lt;li>‰∏é‰πãÈìæÊé•ÁöÑ CPU ÁöÑÁîµÊ∫êÁÆ°ÁêÜ.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ÂÖ≥‰∫éRedistributor ÂØÑÂ≠òÂô®ÈÉΩÂê´Êúâ &lt;code>GICR_&lt;/code> ÂâçÁºÄ, ÈÄöËøá &lt;code>memory-mapped&lt;/code> ÊñπÂºèËÆøÈóÆ.&lt;/p>
&lt;/blockquote>
&lt;h3 id="cpu-interface">CPU interface&lt;/h3>
&lt;ul>
&lt;li>Acknowledge ‰∏Ä‰∏™‰∏≠Êñ≠&lt;/li>
&lt;li>ÊâßË°å End Of Interrupt&lt;/li>
&lt;li>Deactivate ‰∏Ä‰∏™‰∏≠Êñ≠&lt;/li>
&lt;li>ËÆæÁΩÆ CPU ÁöÑ‰ºòÂÖàÁ∫ßMask&lt;/li>
&lt;li>ÈÖçÁΩÆ‰∏≠Êñ≠Êä¢Âç†&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>ÂÖ≥‰∫é CPU interface ÂØÑÂ≠òÂô®ÊòØ‰ª• &lt;code>ICC_&lt;/code> ‰∏∫ÂâçÁºÄ, ËøòÊúâ &lt;code>ICV&lt;/code> for vitual interrupt, &lt;code>ICH&lt;/code> for hypervisor configuration.&lt;/p>
&lt;/blockquote>
&lt;h2 id="‰∏≠Êñ≠ÁöÑÁä∂ÊÄÅËΩ¨Êç¢">‰∏≠Êñ≠ÁöÑÁä∂ÊÄÅËΩ¨Êç¢&lt;/h2>
&lt;p>&lt;img src="./int-lifestyle.png" alt="">&lt;/p>
&lt;ol>
&lt;li>ÁîüÊàê‰∏≠Êñ≠. ‰∏≠Êñ≠ÂèØËÉΩÊù•Ëá™Â§ñÈÉ®‰ø°Âè∑, ÊàñËÄÖËΩØ‰ª∂ÁîüÊàê(SGI)&lt;/li>
&lt;li>Distribute. IRI Ë¥üË¥£‰∏≠Êñ≠ÁöÑÂàÜÁªÑ, ‰ºòÂÖàÁ∫ßÂ±èËîΩÁ≠â. Â∞ÜÂêàÈÄÇÁöÑ‰∏≠Êñ≠ÂèëÈÄÅÂà∞CPU Interface.&lt;/li>
&lt;li>Deliver. CPU interface Â∞Ü‰∏≠Êñ≠ÂèëÈÄÅÂà∞ËøûÊé•ÁöÑCPU.&lt;/li>
&lt;li>Activate. CPUËØªÂèñIARÂØÑÂ≠òÂô®, Âç≥ÂèëÈÄÅACK. ËØ•‰∏≠Êñ≠ÁöÑÁä∂ÊÄÅËΩ¨‰∏∫active.&lt;/li>
&lt;li>Priority drop. Â§ÑÁêÜÁ®ãÂ∫èÁªìÊùü‰πãÂêé, ÂÜô&lt;code>ICC_EOIR&lt;/code>ÂØÑÂ≠òÂô®, end of interrupt&lt;/li>
&lt;li>Deactivation. ÂÜô&lt;code>ICC_DIR&lt;/code>ÂØÑÂ≠òÂô®Ê∏ÖÈô§‰∏≠Êñ≠ÁöÑactiveÊ†áÂøó‰Ωç. ‰∏ÄËà¨Êù•ËØ¥, end of interrupt Âíå deactivation ÂèØÈÖçÁΩÆÊàêÂêåÊó∂ÂèëÁîü.&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>&lt;code>ICC_CTLR_ELx.EOImode&lt;/code> ‰ΩçÊéßÂà∂ÊòØÂê¶ end of interrupt ÂêåÊó∂ÂØºËá¥ deactivation.&lt;/p>
&lt;p>‚ùì EOI Âíå deactivated ÂàÜÂºÄËøõË°åÊöÇÊó∂Ëøò‰∏çÁü•ÈÅìÂ∫îÁî®Âú∫ÊôØ.&lt;/p>
&lt;/blockquote>
&lt;h2 id="‰∏≠Êñ≠id-intid">‰∏≠Êñ≠ID: INTID&lt;/h2>
&lt;p>INTID ÊòØ‰∏≠Êñ≠ÁöÑÊ†áËØÜÁ¨¶, ÂÆÉÁöÑÊúÄÂ§ßÂÄºÊòØ&lt;em>ÂÆûÁé∞ÂÆö‰πâ&lt;/em>ÁöÑ, ÂèØ‰ª•Âú®&lt;code>GICD_TYPER.IDbits&lt;/code>‰∏≠ËØªÂèñ„ÄÇ&lt;/p>
&lt;p>INTIDÊåâÁÖß‰∏≠Êñ≠Á±ªÂûãÂàÜÁ±ªÁöÑ, ÂØπÁÖßË°®Â¶Ç‰∏ã:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>INTID&lt;/th>
&lt;th>‰∏≠Êñ≠Á±ªÂûã&lt;/th>
&lt;th>Note&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>0-15&lt;/td>
&lt;td>SGI&lt;/td>
&lt;td>Êú¨Âú∞ÁöÑ, ‰∏çÂêåCPUÂèØ‰ΩøÁî®Âêå‰∏Ä‰∏≠Êñ≠Âè∑‰ª£Ë°®‰∏çÂêå‰∏≠Êñ≠&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>16-31&lt;/td>
&lt;td>PPI&lt;/td>
&lt;td>Êú¨Âú∞ÁöÑ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>32-1019&lt;/td>
&lt;td>SPI&lt;/td>
&lt;td>ÂÖ®Â±ÄÁöÑ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>1020-1023&lt;/td>
&lt;td>ÁâπÊÆä‰∏≠Êñ≠&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>1056-1119&lt;/td>
&lt;td>Êâ©Â±ïÁöÑPPI&lt;/td>
&lt;td>Êú¨Âú∞ÁöÑ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4096 ‚Äì 5119&lt;/td>
&lt;td>Êâ©Â±ïÁöÑSPI&lt;/td>
&lt;td>ÂÖ®Â±ÄÁöÑ&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="ÁâπÊÆä‰∏≠Êñ≠Âè∑">ÁâπÊÆä‰∏≠Êñ≠Âè∑&lt;/h3>
&lt;blockquote>
&lt;p>These INTIDs do not require an end of interrupt or deactivation.&lt;/p>
&lt;/blockquote>
&lt;p>1020:&lt;/p>
&lt;p>1021:&lt;/p>
&lt;p>1022:&lt;/p>
&lt;p>1023: ËØª&lt;code>ICC_IAR1_EL1&lt;/code> ËøîÂõûËØ•ÂÄºË°®ÊòéÂΩìÂâçÁöÑCPU‰∏äÊ≤°ÊúâÂæÖÂ§ÑÁêÜÁöÑ‰∏≠Êñ≠.&lt;/p>
&lt;h2 id="‰∏≠Êñ≠ÂàÜÁªÑ">‰∏≠Êñ≠ÂàÜÁªÑ&lt;/h2>
&lt;p>‰∏∫‰∫ÜÈÖçÂêà ARMv8 ÁöÑÂºÇÂ∏∏Ê®°ÂûãÂíåÂÆâÂÖ®Ê®°Âûã, GICv3 ÊîØÊåÅ‰∏∫ÊØè‰∏™‰∏≠Êñ≠ÈÖçÁΩÆ‰∏çÂêåÁöÑÁªÑ. ‰∏çÂêåÁªÑÁöÑ‰∏≠Êñ≠Âè™ËÉΩË∑ØÁî±Âà∞ÁâπÂÆöÁöÑÂºÇÂ∏∏Á≠âÁ∫ßÂíåÂÆâÂÖ®Áä∂ÊÄÅËøõË°åÂ§ÑÁêÜ.&lt;/p>
&lt;p>ÂÖ±ÂåÖÂê´‰∏â‰∏™ÂàÜÁªÑ: Gourp 0, Secure Group 1, Non-secure Group 1.&lt;/p>
&lt;ul>
&lt;li>Group 0ÁöÑ‰∏≠Êñ≠ÈúÄË¶ÅÂú®EL3 Â§ÑÁêÜ.&lt;/li>
&lt;li>Secure Group1 ÁöÑ‰∏≠Êñ≠ÈúÄË¶ÅÂú® Secure EL1 ÊàñËÄÖ Secure EL2(Â¶ÇÊûúÂêØÁî®‰∫ÜËôöÊãüÂåñ)Â§ÑÁêÜ.&lt;/li>
&lt;li>Non-secure Group 1 ÁöÑ‰∏≠Êñ≠ÈúÄË¶ÅÂú® Non-secure EL2 or Non-secure EL1 if not using virtualization&lt;/li>
&lt;/ul>
&lt;p>ÂêåÊó∂, ‰∏≠Êñ≠‰Ωç‰∫éÂì™‰∏™ÁªÑ‰πüÂÜ≥ÂÆö‰∫ÜÂÖ∂Ëß¶ÂèëÁöÑÊòØFIQËøòÊòØIRQ. ÂØπ‰∫é AArch64 Êù•ËØ¥, ÂØπÂ∫îÂÖ≥Á≥ªÂèØËßÅ‰∏ãË°®:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ÂΩìÂâçÂºÇÂ∏∏Á≠âÁ∫ß&lt;/th>
&lt;th>Group 0 ÁöÑ‰∏≠Êñ≠&lt;/th>
&lt;th>Secure Group 1 ÁöÑ‰∏≠Êñ≠&lt;/th>
&lt;th>Non-secure Group 1&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Secure EL1/0/2&lt;/td>
&lt;td>FIQ&lt;/td>
&lt;td>IRQ&lt;/td>
&lt;td>FIQ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Non-secure EL1/0/2&lt;/td>
&lt;td>FIQ&lt;/td>
&lt;td>FIQ&lt;/td>
&lt;td>IRQ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>EL3&lt;/td>
&lt;td>FIQ&lt;/td>
&lt;td>FIQ&lt;/td>
&lt;td>FIQ&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>Group 0 ÁöÑ‰∏≠Êñ≠, ÈúÄË¶ÅÂú®EL3Â§ÑÁêÜ, ÂÖ∂‰ºòÂÖàÁ∫ßËæÉÈ´ò, ÊâÄ‰ª•ÂùáÂ±û‰∫é FIQ&lt;/li>
&lt;/ul>
&lt;h2 id="‰∏≠Êñ≠Ë∑ØÁî±">‰∏≠Êñ≠Ë∑ØÁî±&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>PPIs are routed directly from the source to the local Redistributor .&lt;/p>
&lt;/li>
&lt;li>
&lt;p>SPIs are routed from the source through the Distributor to the target Redistributor and the associated CPU interface.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>SGIs are generated by software through the CPU interface and Redistributor. They are then routed through the Distributor to one or more target Redistributors and the associated CPU interfaces&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="what-is-affinity-routing">What is Affinity Routing?&lt;/h3>
&lt;p>Affinity routing ÊòØ‰∏ÄÁßçÂü∫‰∫éÂú∞ÂùÄÁöÑÊ†áËØÜÂ§ö‰∏™CPUÁöÑÊñπÊ≥ï, Áî®‰∫é‰∏≠Êñ≠ÁöÑË∑ØÁî±. Affinity value Áî±4‰∏™8bitÂ≠óÊÆµÁªÑÊàê, ÁªìÊûÑÊòØ&lt;code>aff3.aff2.aff1.aff0&lt;/code>.&lt;/p>
&lt;p>Áî±‰∫é PPI ÁöÑ‰∏≠Êñ≠Ê∫êÊòØÁõ¥Ëøû Redistributor ÁöÑ, ÊâÄ‰ª•‰ªÖ SPI Âíå SGI ÂèØ‰ª•‰ΩøÁî® Affinity routing.&lt;/p>
&lt;ul>
&lt;li>ÂØπ‰∫é SPI, ÁõÆÊ†áCPUÁöÑ affinity value ÈÄöËøá&lt;code>GICD_IROUTER&amp;lt;n&amp;gt;&lt;/code> ËÆæÁΩÆ.&lt;/li>
&lt;li>ÂØπ‰∫é SGI, Âú®ÁîüÊàêÊó∂Âç≥ÂèØÂêåÊó∂ÈÖçÁΩÆ, ËØ¶ËßÅ &lt;code>ICC_SGI0R_EL1&lt;/code> Âíå &lt;code>ICC_SGI1R_EL1&lt;/code>.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>Aff3.Aff2.Aff1.Aff0 ‰∏é Aff3.Aff2.Aff2.TargetList&lt;/p>
&lt;p>ÂØπ‰∫éSPI, ÁõÆÊ†áÁöÑCPUÂè™ËÉΩÊòØ‰∏Ä‰∏™, ÊïÖ&lt;code>Aff0&lt;/code>Ë°®Á§∫ËØ•CPUÁöÑID. ËÄåSGIÂèØ‰ª•ÈÖçÁΩÆÂêåÊó∂ÂèëÁªôÂ§ö‰∏™CPU, ÊâÄ‰ª•&lt;code>TargetList&lt;/code>ÊòØÂü∫‰∫é‰ΩçÊìç‰ΩúÁöÑ, ÊØè‰∏™‰ΩçË°®Á§∫‰∏Ä‰∏™CPU.&lt;/p>
&lt;/blockquote>
&lt;h2 id="ÁºñÁ®ãÊåáÂØº">ÁºñÁ®ãÊåáÂØº&lt;/h2>
&lt;h3 id="ÂàùÂßãÂåñ">ÂàùÂßãÂåñ&lt;/h3>
&lt;p>Áî±‰∫é &lt;em>Distributor&lt;/em> Êï¥‰∏™Á≥ªÁªüÂÖ±‰∫´ÁöÑ, ÊâÄ‰ª•ÂøÖÈ°ªÂú®ÂÖ∂‰ªñÊ†∏ÂêØÂä®‰πãÂâç, Áî±‰∏ªÊ†∏ÂÆåÊàêÂàùÂßãÂåñ. ÁÑ∂ÂêéÂΩìÊâÄÊúâÊ†∏ÈÉΩÂêØÂä®Âêé, ÂêÑËá™ÂÆåÊàêÂêÑËá™ &lt;em>Redistributor&lt;/em> Âíå &lt;em>CPU interface&lt;/em> ÁöÑÂàùÂßãÂåñÂ∑•‰Ωú.&lt;/p>
- https://wangloo.github.io/posts/armv8/gicv3/ - @2019 Notepadium.</description></item><item><title>Useful Shell Script Examples</title><link>https://wangloo.github.io/posts/shell/shell-script/</link><pubDate>Wed, 20 Jul 2022 11:54:13 +0800</pubDate><guid>https://wangloo.github.io/posts/shell/shell-script/</guid><description>Soben's Secret Base https://wangloo.github.io/posts/shell/shell-script/ -&lt;h2 id="Âà§Êñ≠ÊâßË°åËÑöÊú¨Êó∂Â∏¶ÁöÑÂèÇÊï∞">Âà§Êñ≠ÊâßË°åËÑöÊú¨Êó∂Â∏¶ÁöÑÂèÇÊï∞&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">if&lt;/span> &lt;span style="color:#ff79c6">[&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">$#&lt;/span> -ne &lt;span style="color:#bd93f9">1&lt;/span> &lt;span style="color:#ff79c6">]&lt;/span>; &lt;span style="color:#ff79c6">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd;font-style:italic">echo&lt;/span> &lt;span style="color:#f1fa8c">&amp;#34;ONE parameter is needed&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd;font-style:italic">exit&lt;/span> -1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">if&lt;/span> &lt;span style="color:#ff79c6">[&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">$1&lt;/span> &lt;span style="color:#ff79c6">==&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;build&amp;#39;&lt;/span> &lt;span style="color:#ff79c6">]&lt;/span>; &lt;span style="color:#ff79c6">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#6272a4"># do something&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">elif&lt;/span> &lt;span style="color:#ff79c6">[&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">$1&lt;/span> &lt;span style="color:#ff79c6">==&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;run&amp;#39;&lt;/span> &lt;span style="color:#ff79c6">]&lt;/span>; &lt;span style="color:#ff79c6">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#6272a4"># do something&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">elif&lt;/span> &lt;span style="color:#ff79c6">[&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">$1&lt;/span> &lt;span style="color:#ff79c6">==&lt;/span> &lt;span style="color:#f1fa8c">&amp;#39;gdb&amp;#39;&lt;/span> &lt;span style="color:#ff79c6">]&lt;/span>; &lt;span style="color:#ff79c6">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#6272a4"># do something&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd;font-style:italic">echo&lt;/span> &lt;span style="color:#f1fa8c">&amp;#34;Not supported command&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>¬†&lt;/p>
&lt;h2 id="Ëá™Âä®Êã∑Ë¥ùÊñá‰ª∂Âà∞sd-card">Ëá™Âä®Êã∑Ë¥ùÊñá‰ª∂Âà∞SD Card&lt;/h2>
&lt;blockquote>
&lt;p>TODO&lt;/p>
&lt;ol>
&lt;li>Ê∑ªÂä†ËøõÂ∫¶Êù°&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">sd_path&lt;/span>&lt;span style="color:#ff79c6">=&lt;/span>&lt;span style="color:#ff79c6">$(&lt;/span>find /media/&lt;span style="color:#8be9fd;font-style:italic">$USER&lt;/span> -maxdepth &lt;span style="color:#bd93f9">1&lt;/span> -type d -name &lt;span style="color:#f1fa8c">&amp;#34;*-*&amp;#34;&lt;/span>&lt;span style="color:#ff79c6">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">while&lt;/span> &lt;span style="color:#ff79c6">[&lt;/span> ! -d &lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">sd_path&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span> &lt;span style="color:#ff79c6">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> sleep &lt;span style="color:#bd93f9">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd;font-style:italic">echo&lt;/span> &lt;span style="color:#f1fa8c">&amp;#34;waiting for inserting SD-Card&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">done&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">echo&lt;/span> &lt;span style="color:#f1fa8c">&amp;#34;SD-Card is inserted&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cp ./output/kernel/kernel.bin &lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">sd_path&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">echo&lt;/span> &lt;span style="color:#f1fa8c">&amp;#34;Copy completely&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>¬†&lt;/p>
&lt;h2 id="Ëé∑ÂèñÊâÄÊúâÊñá‰ª∂‰ø°ÊÅØÂèØÈÄíÂΩíËøõÂÖ•Â≠êÁõÆÂΩï">Ëé∑ÂèñÊâÄÊúâÊñá‰ª∂‰ø°ÊÅØ(ÂèØÈÄíÂΩíËøõÂÖ•Â≠êÁõÆÂΩï)&lt;/h2>
&lt;p>Ëé∑Âèñ&lt;code>dir&lt;/code>Ë∑ØÂæÑ‰∏ãÁöÑÊâÄÊúâÊñá‰ª∂ÁöÑ‰ø°ÊÅØ, ËøôÈáåËé∑ÂèñÁöÑÊòØÊñá‰ª∂ÁöÑ&lt;strong>ÂÆåÊï¥Ë∑ØÂæÑ&lt;/strong>.&lt;/p>
&lt;blockquote>
&lt;p>TODO&lt;/p>
&lt;ol>
&lt;li>Êìç‰ΩúÊï∞ÁªÑ‰∏ãÊ†áÁöÑÊñπÂºèÂèØËÉΩÊúâÂæÖÊîπËøõ? &lt;code>filenum&lt;/code>ÊÑüËßâÊ≤°ÂøÖË¶Å, ÊöÇÊó∂Ëøò‰∏ç‰ºöÊîπ&lt;/li>
&lt;li>ÈÄöËøáÊãºÊé•Ëé∑ÂæóÊñá‰ª∂‰ø°ÊÅØ(Ë∑ØÂæÑ)ÁöÑÊñπÂºè‰πüÊúâÁÇπÊÄ™ÂºÇ&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">dir&lt;/span>&lt;span style="color:#ff79c6">=&lt;/span>./
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">files&lt;/span>&lt;span style="color:#ff79c6">=()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">filenum&lt;/span>&lt;span style="color:#ff79c6">=&lt;/span>&lt;span style="color:#bd93f9">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">function&lt;/span> getfiles&lt;span style="color:#ff79c6">()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">for&lt;/span> file in &lt;span style="color:#f1fa8c">`&lt;/span>ls &lt;span style="color:#8be9fd;font-style:italic">$dir&lt;/span>&lt;span style="color:#f1fa8c">`&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">if&lt;/span> &lt;span style="color:#ff79c6">[&lt;/span> -d &lt;span style="color:#8be9fd;font-style:italic">$file&lt;/span> &lt;span style="color:#ff79c6">]&lt;/span>; &lt;span style="color:#ff79c6">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd;font-style:italic">cd&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">$file&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> getfiles
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd;font-style:italic">cd&lt;/span> ..
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> files&lt;span style="color:#ff79c6">[&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">$filenum&lt;/span>&lt;span style="color:#ff79c6">]=&lt;/span>&lt;span style="color:#ff79c6">$(&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">pwd&lt;/span> &lt;span style="color:#8be9fd;font-style:italic">$file&lt;/span>&lt;span style="color:#ff79c6">)&lt;/span>/&lt;span style="color:#ff79c6">$(&lt;/span>basename &lt;span style="color:#8be9fd;font-style:italic">$file&lt;/span>&lt;span style="color:#ff79c6">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#6272a4"># echo file=$(pwd $file)/$(basename $file)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd;font-style:italic">let&lt;/span> filenum++
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">done&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>¬†&lt;/p>
&lt;h2 id="Â∏¶È¢úËâ≤ÁöÑËæìÂá∫">Â∏¶È¢úËâ≤ÁöÑËæìÂá∫&lt;/h2>
&lt;p>‰ΩøÁî®&lt;a href="https://en.wikipedia.org/wiki/ANSI_escape_code">ANSI escape code&lt;/a>&lt;/p>
&lt;pre tabindex="0">&lt;code>Black 0;30 Dark Gray 1;30
Red 0;31 Light Red 1;31
Green 0;32 Light Green 1;32
Brown/Orange 0;33 Yellow 1;33
Blue 0;34 Light Blue 1;34
Purple 0;35 Light Purple 1;35
Cyan 0;36 Light Cyan 1;36
Light Gray 0;37 White 1;37
&lt;/code>&lt;/pre>&lt;p>Code example:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">RED&lt;/span>&lt;span style="color:#ff79c6">=&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;\033[0;31m&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">GREEN&lt;/span>&lt;span style="color:#ff79c6">=&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;\033[0;32m&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">YELLOW&lt;/span>&lt;span style="color:#ff79c6">=&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;\033[1;33m&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">BLUE&lt;/span>&lt;span style="color:#ff79c6">=&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;\033[0;34m&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">CYAN&lt;/span>&lt;span style="color:#ff79c6">=&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;\033[0;36m&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">NC&lt;/span>&lt;span style="color:#ff79c6">=&lt;/span>&lt;span style="color:#f1fa8c">&amp;#39;\033[0m&amp;#39;&lt;/span> &lt;span style="color:#6272a4"># No Color&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">echo&lt;/span> -e &lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">YELLOW&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">HELLO, YELLOW&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">NC&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">echo&lt;/span> -e &lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">GREEN&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">HELLO, GREEN&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">NC&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">echo&lt;/span> -e &lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">RED&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">HELLO, RED&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">NC&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">echo&lt;/span> -e &lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">BLUE&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">HELLO, BLUE&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">NC&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd;font-style:italic">echo&lt;/span> -e &lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">CYAN&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">HELLO, CYAN&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">NC&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6272a4">#########################################################&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6272a4"># generic functions #####################################&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">function&lt;/span> ERROR&lt;span style="color:#ff79c6">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd;font-style:italic">echo&lt;/span> -e &lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">RED&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">[error] &lt;/span>&lt;span style="color:#8be9fd;font-style:italic">$*&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">NC&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd;font-style:italic">exit&lt;/span> &lt;span style="color:#bd93f9">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">function&lt;/span> INFO &lt;span style="color:#ff79c6">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd;font-style:italic">echo&lt;/span> -e &lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">BLUE&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">[info] &lt;/span>&lt;span style="color:#8be9fd;font-style:italic">$*&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">NC&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">function&lt;/span> WARN &lt;span style="color:#ff79c6">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd;font-style:italic">echo&lt;/span> -e &lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">YELLOW&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">[warn] &lt;/span>&lt;span style="color:#8be9fd;font-style:italic">$*&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">NC&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">function&lt;/span> LOG &lt;span style="color:#ff79c6">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd;font-style:italic">echo&lt;/span> -e &lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">GREEN&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">[log] &lt;/span>&lt;span style="color:#8be9fd;font-style:italic">$*&lt;/span>&lt;span style="color:#f1fa8c">${&lt;/span>&lt;span style="color:#8be9fd;font-style:italic">NC&lt;/span>&lt;span style="color:#f1fa8c">}&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span> &amp;gt;&amp;gt; &lt;span style="color:#8be9fd;font-style:italic">$LOG&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>INFO &lt;span style="color:#f1fa8c">&amp;#34;This is an infomation&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>WARN &lt;span style="color:#f1fa8c">&amp;#34;This is a log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>- https://wangloo.github.io/posts/shell/shell-script/ - @2019 Notepadium.</description></item><item><title>C ËØ≠Ë®Ä‰ΩçÊìç‰ΩúÊäÄÂ∑ß</title><link>https://wangloo.github.io/posts/codestyle/bit-operation-hacks/</link><pubDate>Sun, 03 Jul 2022 09:44:13 +0800</pubDate><guid>https://wangloo.github.io/posts/codestyle/bit-operation-hacks/</guid><description>Soben's Secret Base https://wangloo.github.io/posts/codestyle/bit-operation-hacks/ -&lt;h2 id="Âà§Êñ≠‰∏Ä‰∏™Êï∞ÊòØÂê¶‰∏∫2ÁöÑÂπÇ">Âà§Êñ≠‰∏Ä‰∏™Êï∞ÊòØÂê¶‰∏∫2ÁöÑÂπÇ&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd">unsigned&lt;/span> &lt;span style="color:#8be9fd">int&lt;/span> v;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">if&lt;/span> ((v &lt;span style="color:#ff79c6">&amp;amp;&lt;/span> (v &lt;span style="color:#ff79c6">-&lt;/span> &lt;span style="color:#bd93f9">1&lt;/span>)) &lt;span style="color:#ff79c6">==&lt;/span> &lt;span style="color:#bd93f9">0&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printf(&lt;span style="color:#f1fa8c">&amp;#34;v is a power of 2&lt;/span>&lt;span style="color:#f1fa8c">\n&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#50fa7b">printf&lt;/span>(&lt;span style="color:#f1fa8c">&amp;#34;v is not a power of 2&lt;/span>&lt;span style="color:#f1fa8c">\n&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>¬†&lt;/p>
&lt;h2 id="ÁªüËÆ°‰∏Ä‰∏™Êï∞ÁöÑ‰∫åËøõÂà∂‰∏≠1ÁöÑÊï∞Èáè">ÁªüËÆ°‰∏Ä‰∏™Êï∞ÁöÑ‰∫åËøõÂà∂‰∏≠1ÁöÑÊï∞Èáè&lt;/h2>
&lt;p>‰æùÁÑ∂ÊòØÂà©Áî®&lt;code>v &amp;amp; (v -1)&lt;/code>ÁöÑËøêÁÆóÁªìÊûú‰ºöÂ∞ÜvÁöÑÊúÄ‰Ωé‰ΩçÁöÑ&lt;code>1&lt;/code>(Â¶ÇÊûúÊúâÁöÑËØù)ÁΩÆ&lt;code>0&lt;/code>.&lt;/p>
&lt;p>Âæ™ÁéØÊâßË°åÊ≠§Êìç‰ΩúÂ∞±ÂèØÁªüËÆ°v‰∏≠&lt;code>1&lt;/code>ÁöÑÊï∞Èáè.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd">int&lt;/span> &lt;span style="color:#50fa7b">numberof1&lt;/span>(&lt;span style="color:#8be9fd">int&lt;/span> v) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd">int&lt;/span> count &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#bd93f9">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">while&lt;/span>(v) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> count&lt;span style="color:#ff79c6">++&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> v &lt;span style="color:#ff79c6">=&lt;/span> v &lt;span style="color:#ff79c6">&amp;amp;&lt;/span> (v &lt;span style="color:#ff79c6">-&lt;/span>&lt;span style="color:#bd93f9">1&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">return&lt;/span> count;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>¬†&lt;/p>
&lt;h2 id="Â∞Ü‰∏Ä‰∏™Êï∞Âêë‰∏äÂèñÊï¥‰∏∫2ÁöÑÂπÇ">Â∞Ü‰∏Ä‰∏™Êï∞Âêë‰∏äÂèñÊï¥‰∏∫2ÁöÑÂπÇ&lt;/h2>
&lt;p>Áî®‰∏Ä‰∏™&lt;code>1&lt;/code>‰∏ÄÁõ¥Â∑¶Áßª, Áõ¥Âà∞ÊØîËøô‰∏™Êï∞Â§ß‰∏∫Ê≠¢.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd">uint32_t&lt;/span> &lt;span style="color:#50fa7b">roundup_pow_op_two&lt;/span>(&lt;span style="color:#ff79c6">const&lt;/span> &lt;span style="color:#8be9fd">uint32_t&lt;/span> x) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd">uint32_t&lt;/span> ret &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#bd93f9">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">while&lt;/span> (ret &lt;span style="color:#ff79c6">&amp;lt;&lt;/span> x) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ret &lt;span style="color:#ff79c6">=&lt;/span> ret &lt;span style="color:#ff79c6">&amp;lt;&amp;lt;&lt;/span> &lt;span style="color:#bd93f9">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">return&lt;/span> ret;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>¬†&lt;/p>
&lt;h2 id="Âêë‰∏äÂêë‰∏ãÂØπÈΩê-Ê£ÄÊü•ÊòØÂê¶ÂØπÈΩê">Âêë‰∏ä/Âêë‰∏ãÂØπÈΩê, Ê£ÄÊü•ÊòØÂê¶ÂØπÈΩê&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6272a4">/* uintptr_t ‰ª£Ë°®ÊåáÈíàÁöÑ‰ΩçÊï∞
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6272a4"> * Âä†uintptr_tËΩ¨Êç¢ÁöÑÂéüÂõ†ÊòØ: (void *)‰∏çËÉΩËøõË°åËøêÁÆó
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6272a4"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">#define IS_ALIGNED(X, align) (((uintptr_t)(const void *)(X)) % (align) == 0)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">#define ALIGN_UP(X, align) (((X) + ((align) - 1)) &amp;amp; ~((align) - 1))
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">#define ALIGN_DOWN(x, align) ((X) &amp;amp; ~((align) - 1))
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">#define X (0x12345675)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">#define align (1 &amp;lt;&amp;lt; 2)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd">int&lt;/span> &lt;span style="color:#50fa7b">main&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd">int&lt;/span> v &lt;span style="color:#ff79c6">=&lt;/span> IS_ALIGNED(X, align);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">if&lt;/span> (&lt;span style="color:#bd93f9">0&lt;/span> &lt;span style="color:#ff79c6">==&lt;/span> v) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printf(&lt;span style="color:#f1fa8c">&amp;#34;Given X(0x%x) is not align to 0x%08x&lt;/span>&lt;span style="color:#f1fa8c">\n&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>, X, align);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printf(&lt;span style="color:#f1fa8c">&amp;#34;After align up, new X = 0x%x&lt;/span>&lt;span style="color:#f1fa8c">\n&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>, ALIGN_UP(X, align));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printf(&lt;span style="color:#f1fa8c">&amp;#34;After align down, new X = 0x%x&lt;/span>&lt;span style="color:#f1fa8c">\n&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>, ALIGN_DOWN(X, align));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#ff79c6">else&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printf(&lt;span style="color:#f1fa8c">&amp;#34;Give X(0x%x) is aligned to 0x%08x&lt;/span>&lt;span style="color:#f1fa8c">\n&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>, X, align);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printf(&lt;span style="color:#f1fa8c">&amp;#34;After align up, new X = 0x%x&lt;/span>&lt;span style="color:#f1fa8c">\n&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>, ALIGN_UP(X, align));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printf(&lt;span style="color:#f1fa8c">&amp;#34;After align down, new X = 0x%x&lt;/span>&lt;span style="color:#f1fa8c">\n&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>, ALIGN_DOWN(X, align));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ff79c6">return&lt;/span> &lt;span style="color:#bd93f9">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>¬†&lt;/p>
&lt;h2 id="Ê£ÄÊü•‰∏§‰∏™ÊúâÁ¨¶Âè∑Êï∞ÊòØÂê¶ÂºÇÂè∑">Ê£ÄÊü•‰∏§‰∏™ÊúâÁ¨¶Âè∑Êï∞ÊòØÂê¶ÂºÇÂè∑&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8be9fd">int&lt;/span> x,y;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">if&lt;/span> ((x &lt;span style="color:#ff79c6">^&lt;/span> y) &lt;span style="color:#ff79c6">&amp;lt;&lt;/span> &lt;span style="color:#bd93f9">0&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printf(&lt;span style="color:#f1fa8c">&amp;#34;They have opposite signs&lt;/span>&lt;span style="color:#f1fa8c">\n&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#50fa7b">printf&lt;/span>(&lt;span style="color:#f1fa8c">&amp;#34;They have same signs&lt;/span>&lt;span style="color:#f1fa8c">\n&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>¬†&lt;/p>
&lt;h2 id="Â§ßÂ∞èÁ´ØËΩ¨Êç¢">Â§ßÂ∞èÁ´ØËΩ¨Êç¢&lt;/h2>
&lt;p>¬†&lt;/p>
&lt;h2 id="ÂØπÊüê‰∏™‰ΩçÁöÑgetsetclearÊìç‰Ωú">ÂØπÊüê‰∏™‰ΩçÁöÑget/set/clearÊìç‰Ωú&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">#define GET_BIT(x, bit) ( ((x) &amp;amp; (1ULL &amp;lt;&amp;lt; (bit))) &amp;gt;&amp;gt; (bit) )
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">#define SET_BIT(x, bit) ( (x) |= (1ULL &amp;lt;&amp;lt; (bit)) )
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">#define CLEAR_BIT(x, bit) ( (x) &amp;amp;= ~(1ULL &amp;lt;&amp;lt; (bit)) )
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>Release note:&lt;/p>
&lt;ol>
&lt;li>Ê∑ªÂä†ÂØπ&lt;code>unsigned long long&lt;/code>ÈïøÂ∫¶ÁöÑÊîØÊåÅ&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;p>¬†&lt;/p>
&lt;h2 id="sign-extending-from-a-varaiable-bit-width">Sign extending from a varaiable bit-width&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8be9fd">int&lt;/span> bits &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#bd93f9">2&lt;/span> &lt;span style="color:#ff79c6">*&lt;/span> &lt;span style="color:#bd93f9">8&lt;/span>; &lt;span style="color:#6272a4">// number of bits representing the number in x
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6272a4">&lt;/span> &lt;span style="color:#8be9fd">int&lt;/span> x &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#bd93f9">0xFFC1&lt;/span>; &lt;span style="color:#6272a4">// ready to get sign-extended
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6272a4">&lt;/span> &lt;span style="color:#8be9fd">int&lt;/span> rst; &lt;span style="color:#6272a4">// resulting sign-extended number
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6272a4">&lt;/span> &lt;span style="color:#8be9fd">int&lt;/span> &lt;span style="color:#ff79c6">const&lt;/span> mask &lt;span style="color:#ff79c6">=&lt;/span> &lt;span style="color:#bd93f9">1U&lt;/span> &lt;span style="color:#ff79c6">&amp;lt;&amp;lt;&lt;/span> (bits &lt;span style="color:#ff79c6">-&lt;/span> &lt;span style="color:#bd93f9">1&lt;/span>); &lt;span style="color:#6272a4">// mask can be pre-computed if bits if fixed.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6272a4">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> x &lt;span style="color:#ff79c6">=&lt;/span> x &lt;span style="color:#ff79c6">&amp;amp;&lt;/span> ((&lt;span style="color:#bd93f9">1U&lt;/span> &lt;span style="color:#ff79c6">&amp;lt;&amp;lt;&lt;/span> bits) &lt;span style="color:#ff79c6">-&lt;/span> &lt;span style="color:#bd93f9">1&lt;/span>); &lt;span style="color:#6272a4">// cut x if it holds more bits
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6272a4">&lt;/span> rst &lt;span style="color:#ff79c6">=&lt;/span> (x &lt;span style="color:#ff79c6">^&lt;/span> mask) &lt;span style="color:#ff79c6">-&lt;/span> mask; &lt;span style="color:#6272a4">// excellent trick!
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6272a4">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> printf(&lt;span style="color:#f1fa8c">&amp;#34;INPUT: 0x%x, RESULT: 0x%x&lt;/span>&lt;span style="color:#f1fa8c">\n&lt;/span>&lt;span style="color:#f1fa8c">&amp;#34;&lt;/span>, x, rst);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>¬†&lt;/p>
&lt;h2 id="Â≠óÁ¨¶Â≠óÁ¨¶Êï∞ÁªÑÁöÑÂ§ßÂ∞èÂÜôËΩ¨Êç¢">Â≠óÁ¨¶/Â≠óÁ¨¶Êï∞ÁªÑÁöÑÂ§ßÂ∞èÂÜôËΩ¨Êç¢&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-c" data-lang="c">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">#define TO_LOWER(c) (unsigned char)((c &amp;gt;= &amp;#39;A&amp;#39; &amp;amp;&amp;amp; c &amp;lt;= &amp;#39;Z&amp;#39;) ? (c | 0x20) : c)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">#define TO_UPPER(c) (unsigned char)((c &amp;gt;= &amp;#39;a&amp;#39; &amp;amp;&amp;amp; c &amp;lt;= &amp;#39;z&amp;#39;) ? (c &amp;amp; ~0x20) : c)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">#define TO_LOWER_STR(s, len) { \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6"> for (int i = 0; i &amp;lt; len &amp;amp;&amp;amp; s[i] != &amp;#39;\0&amp;#39;; i++) { \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6"> s[i] = TO_LOWER(s[i]); \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6"> } \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">}
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">#define TO_UPPER_STR(s, len) {\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6"> for (int i = 0; i &amp;lt; len &amp;amp;&amp;amp; s[i] != &amp;#39;\0&amp;#39;; i++) { \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6"> s[i] = TO_UPPER(s[i]); \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6"> } \
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ff79c6">}
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>- https://wangloo.github.io/posts/codestyle/bit-operation-hacks/ - @2019 Notepadium.</description></item><item><title>Stack and Heap</title><link>https://wangloo.github.io/posts/os-learning/stack-and-heap/</link><pubDate>Tue, 28 Jun 2022 16:41:54 +0800</pubDate><guid>https://wangloo.github.io/posts/os-learning/stack-and-heap/</guid><description>Soben's Secret Base https://wangloo.github.io/posts/os-learning/stack-and-heap/ -&lt;p>¬†&lt;/p>
&lt;h2 id="Â†ÜÁöÑÂê´‰πâ">Â†ÜÁöÑÂê´‰πâ&lt;/h2>
&lt;p>Êàë‰ª¨ÈÉΩÁü•ÈÅì&lt;code>malloc&lt;/code>Âä®ÊÄÅÁî≥ËØ∑ÁöÑÂèòÈáèÊòØÂ≠òÊîæÂú®Â†Ü‰∏≠. ÊâÄ‰ª•Áõ∏ÊØîÊ†àÊù•ËØ¥, Â†ÜÊòØÂä®ÊÄÅÁöÑ.&lt;/p>
&lt;p>Â†ÜÂç†ÊçÆËøõÁ®ãËôöÊãüÂú∞ÂùÄÁ©∫Èó¥ÁöÑÂ§ßÈÉ®ÂàÜ, Êàë‰ª¨ÂèØËÉΩÈÄöËøáÂ†ÜÊù•Áî≥ËØ∑&lt;code>1GB&lt;/code>ÁöÑÊï∞ÁªÑ, ‰ΩÜÊòØÊ†àÈÄöÂ∏∏‰∏çË°å
, Â§ßÂ§ö‰πüÂ∞±Âá†ÂÖÜÁöÑÁ©∫Èó¥.&lt;/p>
&lt;p>¬†&lt;/p>
&lt;h2 id="Â†ÜÁ©∫Èó¥ÁöÑÁÆ°ÁêÜ">Â†ÜÁ©∫Èó¥ÁöÑÁÆ°ÁêÜ&lt;/h2>
&lt;p>ËøõÁ®ã‰∏≠Â†ÜÁ©∫Èó¥ÁöÑÁÆ°ÁêÜÊòØ&lt;code>ËøêË°åÂ∫ì&lt;/code>Ë¥üË¥£ÁöÑ, Âú®Linux‰∏≠ÊòØ&lt;code>GLIBC&lt;/code>.&lt;/p>
&lt;p>ËøêË°åÂ∫ìÂú®ÂàùÂßãÂåñÊó∂‰ºöÂÉèÊìç‰ΩúÁ≥ªÁªüÁî≥ËØ∑‰∏ÄÂ§ßÂùóÁöÑÂ†ÜÁ©∫Èó¥, ÂÜç‰∏∫ÊØè‰∏™ËøõË°åÂàÜÂà´ÂàÜÈÖçÈúÄÊ±Ç. ÂΩìÁÑ∂,
Â¶ÇÊûúÊüê‰∫õÁ®ãÂ∫èÁöÑÈúÄÊ±ÇËøáÂ§ß, ËøêË°åÂ∫ì‰πüÂèØ‰ª•‰ΩøÁî®&lt;code>mmap&lt;/code>Á≥ªÁªüË∞ÉÁî®Áõ¥Êé•ÂêëÊìç‰ΩúÁ≥ªÁªüÁî≥ËØ∑, ÁÑ∂Âêé
ËøîÂõûÁªôÁî®Êà∑ËøõÁ®ã.&lt;/p>
&lt;blockquote>
&lt;p>GLIBCÁöÑ&lt;code>malloc&lt;/code>ÂáΩÊï∞ÁöÑÂ§ÑÁêÜÊñπÂºèÊòØ: ÂØπ‰∫éÂ∞è‰∫é&lt;code>128KB&lt;/code>ÁöÑÁî≥ËØ∑, ‰ºö‰ªéËøêË°åÂ∫ì&amp;quot;ÊâπÂèëÁöÑ&amp;quot;Â†ÜÁ©∫Èó¥
ÈáåÂàÜÂá∫‰∏ÄÂùóÊù•; ‰ΩÜËã•Áî≥ËØ∑ÁöÑÁ©∫Èó¥ËøáÂ§ß, Âàô‰ΩøÁî®&lt;code>mmap&lt;/code>Á≥ªÁªüË∞ÉÁî®Êù•ÂàõÂª∫ÂåøÂêçÁ©∫Èó¥ÂàÜÈÖçÁªôÁî®Êà∑.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Linux‰∏≠ËôöÊãüÂú∞ÂùÄÂùó(VMA)ÁöÑÁÆ°ÁêÜ‰ΩøÁî®‰∫ÜÁ∫¢ÈªëÊ†ë, ÂèØ‰ª•Áî®‰∫éËøêË°åÂ∫ìÁÆ°ÁêÜËá™Â∑±ÂêëÊìç‰ΩúÁ≥ªÁªü
&amp;ldquo;ÊâπÂèë&amp;quot;ÁöÑÂ†ÜÁ©∫Èó¥. ‰ΩøÂæóÁî®Êà∑Á®ãÂ∫èÂä®ÊÄÅÁî≥ËØ∑ÂíåÈáäÊîæÂÜÖÂ≠òÊÄßËÉΩÊèêÈ´ò.&lt;/p>
&lt;/blockquote>
- https://wangloo.github.io/posts/os-learning/stack-and-heap/ - @2019 Notepadium.</description></item><item><title>Âä®ÊÄÅÈìæÊé•</title><link>https://wangloo.github.io/posts/os-learning/dynamic-link/</link><pubDate>Sun, 26 Jun 2022 19:50:45 +0800</pubDate><guid>https://wangloo.github.io/posts/os-learning/dynamic-link/</guid><description>Soben's Secret Base https://wangloo.github.io/posts/os-learning/dynamic-link/ -&lt;h2 id="ÈùôÊÄÅÈìæÊé•Â∏¶Êù•ÁöÑÈóÆÈ¢ò">ÈùôÊÄÅÈìæÊé•Â∏¶Êù•ÁöÑÈóÆÈ¢ò&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>ÂÉèÊòØ&lt;code>libc&lt;/code>ËøôÁßçÂá†‰πéÊØè‰∏™Á®ãÂ∫èÈÉΩË¶ÅÁî®Âà∞ÁöÑÂ∫ì, Â¶ÇÊûúÊòØÈùôÊÄÅÁöÑ, ÈÇ£‰πà‰∏ç‰ªÖÊÑèÂ§ñÁùÄÊØè‰∏™Á®ãÂ∫èÁöÑ
ÂèØÊâßË°åÊñá‰ª∂ÂæàÂ§ß, Êµ™Ë¥πÁ£ÅÁõòÁ©∫Èó¥. Âπ∂‰∏îÂΩìÁ®ãÂ∫èÂä†ËΩΩÂà∞ÂÜÖÂ≠òÊó∂, ÂèØËÉΩËÆ∏Â§öÁ®ãÂ∫èÈÉΩ‰ºöÁî®Âà∞&lt;code>printf&lt;/code>
, ‰ΩøÂæóÂÜÖÂ≠ò‰∏≠‰ºöÂ≠òÂú®Â•ΩÂ§ö‰ªΩÁöÑ&lt;code>printf&lt;/code>Ê∫êÁ†Å.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Áª¥Êä§ÂíåÊõ¥Êñ∞Èöæ. ‰∏ÄÊó¶ÈùôÊÄÅÈìæÊé•ÁöÑÂÖ∂‰∏≠‰∏Ä‰∏™ÁõÆÊ†áÊñá‰ª∂Êõ¥Êñ∞, ÊâÄÊúâÁöÑÂèØÊâßË°åÁ®ãÂ∫èÈÉΩË¶ÅÈáçÊñ∞ÈìæÊé•.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>‰∏çÊª°Ë∂≥Â±ÄÈÉ®ÊÄßÂéüÁêÜ. ‰∏äÈù¢ÊèêÂà∞, ÂÜÖÂ≠ò‰∏≠ÂêåÊó∂Â≠òÂú®Â§ö‰ªΩÁöÑ&lt;code>printf&lt;/code>Ê∫êÁ†Å‰ºöÁ†¥Âùè&lt;em>Â±ÄÈÉ®ÊÄßÂéüÁêÜ&lt;/em>ÁöÑ.
ÊòæÁÑ∂Â¶ÇÊûúÊâÄÊúâÁöÑÁ®ãÂ∫èÂÖ±‰∫´‰∏Ä‰ªΩ&lt;code>printf&lt;/code>Ê∫êÁ†ÅÁöÑÊÉ≥Ê≥ïÊõ¥Â•Ω. Âç≥Âä®ÊÄÅÂä†ËΩΩ.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ÂèØÁßªÊ§çÊÄßÂ∑Æ. ÈùôÊÄÅÈìæÊé•, Âè™Ë¶ÅÊúâ‰∏Ä‰∏™‰æùËµñÁõÆÊ†áÊñá‰ª∂ÁöÑÂÆûÁé∞‰∏çÂêå, ËΩØ‰ª∂ÂéÇÂïÜÂ∞±Âæó‰∏ìÈó®ÂèëÂ∏É‰∏Ä‰∏™
ÁâàÊú¨. ËÄåÂä®ÊÄÅÈìæÊé•Âàô‰ø°ËµñÂÆ¢Êà∑ÁîµËÑë‰∏äÁöÑ&lt;em>Âä®ÊÄÅÂ∫ì&lt;/em>, Áõ∏ÂΩì‰∫é‰∏Ä‰∏™‰∏≠Èó¥Â±Ç.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>¬†&lt;/p>
&lt;h2 id="Âä®ÊÄÅÈìæÊé•ÁöÑËøáÁ®ã">Âä®ÊÄÅÈìæÊé•ÁöÑËøáÁ®ã&lt;/h2>
&lt;p>ÂØπÊØîÈùôÊÄÅÈìæÊé•‰ΩøÁî®&lt;code>ld&lt;/code>ÈìæÊé•Âô®Âú®ÁºñËØëÂêéÂç≥ÊâßË°åÈìæÊé•, Âä®ÊÄÅÈìæÊé•ÂàôÊòØÂ∞ÜÈìæÊé•ËøáÁ®ãÊé®ËøüÂà∞&lt;strong>ËøêË°åÊó∂&lt;/strong>,
Âç≥Ë£ÖËΩΩÂà∞ÂÜÖÂ≠òÊó∂.&lt;/p>
&lt;p>ËøôÊ†∑, ÈìæÊé•Âô®Âú®ÈìæÊé•‰∫ßÁîüÂèØÊâßË°åÊñá‰ª∂Êó∂Â∞±Êúâ‰∏§ÁßçÂÅöÊ≥ï:&lt;/p>
&lt;ul>
&lt;li>ÂØπ‰∫éÈùôÊÄÅÁ¨¶Âè∑, ÊåâÁÖßÈùôÊÄÅÈìæÊé•ÁöÑËßÑÂàôËøõË°å&lt;em>Âú∞ÂùÄÂºïÁî®ÈáçÂÆö‰Ωç&lt;/em>&lt;/li>
&lt;li>ÂØπ‰∫éÂä®ÊÄÅÁ¨¶Âè∑, ÈìæÊé•Âô®Âàô‰ªÖÊ†áËÆ∞ÂÖ∂‰∏∫Âä®ÊÄÅÈìæÊé•‰∏≠ÁöÑÁ¨¶Âè∑, ‰∏çËøõË°åÂ§ÑÁêÜ. ËÄåÊòØÁ≠âÂà∞Ë£ÖËΩΩÊó∂Áî±
‰∏ìÈó®ÁöÑ&lt;em>Âä®ÊÄÅÈìæÊé•Âô®&lt;/em>Êù•ÂÆåÊàêÂä®ÊÄÅÁ¨¶Âè∑ÁöÑÈìæÊé•Â∑•‰Ωú.&lt;/li>
&lt;/ul>
&lt;p>‚ÅâÔ∏è ÈìæÊé•Âô®Â¶Ç‰ΩïÁ°ÆÂÆö‰∏Ä‰∏™Á¨¶Âè∑ÊòØÈùôÊÄÅÁöÑorÂä®ÊÄÅÁöÑ?&lt;/p>
&lt;p>Âú®Âä®ÊÄÅÂÖ±‰∫´ÂØπË±°(&lt;em>.so)‰∏≠‰øùÂ≠ò‰∫ÜÂÆåÊï¥ÁöÑ&lt;/em>Âä®ÊÄÅÁ¨¶Âè∑Ë°®*, Ë°®‰∏≠Â≠òÂú®ÁöÑÁ¨¶Âè∑Âç≥‰∏∫Âä®ÊÄÅÁöÑ, Âê¶Âàô‰∏∫ÈùôÊÄÅ.&lt;/p>
&lt;blockquote>
&lt;p>LinuxÁöÑCËØ≠Ë®ÄËøêË°åÂ∫ì&lt;code>glib&lt;/code>ÁöÑÂä®ÊÄÅÈìæÊé•ÁâàÊú¨Âè´&lt;code>libc.so&lt;/code>. ÂÆÉÂú®Â§ñÂ≠ò‰∏äÂè™‰øùÂ≠ò‰∏Ä‰ªΩ, ÊâÄÊúâÁöÑÁ®ãÂ∫è
ÈÉΩÂèØ‰ª•Âú®ËøêË°åÊó∂‰ΩøÁî®ÂÆÉ. ÊâÄ‰ª•ÂçÉ‰∏á‰∏çË¶ÅÂà†ÊéâÂÆÉ.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Âä®ÊÄÅÈìæÊé•Êúâ‰∏ÄÂÆöÁöÑÊÄßËÉΩÊçüÂ§±, Âõ†‰∏∫ÊØèÊ¨°ËøêË°åÁ®ãÂ∫èÊó∂ÈÉΩË¶ÅÈáçÊñ∞ÈìæÊé•, Âπ∂‰∏çÂÉèÈùôÊÄÅÈìæÊé•ÊòØ‰∏ÄÂä≥Ê∞∏ÈÄ∏ÁöÑ.
‰πüÊúâ‰æãÂ¶Ç&lt;code>Âª∂ËøüÁªëÂÆö&lt;/code>ÂØπÊÄßËÉΩËøõË°å‰ºòÂåñÁöÑÊñπÊ≥ï, Â§ßÊ¶Ç‰ªÖÊúâ5%ÁöÑÊçüËÄó, ‰∏éÂ∏¶Êù•ÁöÑ‰æøÂà©Áõ∏ÊØîÂèØ‰ª•ÂøΩÁï•‰∏çËÆ°.&lt;/p>
&lt;/blockquote>
&lt;p>¬†&lt;/p>
&lt;h2 id="Âú∞ÂùÄÊó†ÂÖ≥‰ª£Á†Å-pic">Âú∞ÂùÄÊó†ÂÖ≥‰ª£Á†Å PIC&lt;/h2>
&lt;p>GCCÁîüÊàêÂä®ÊÄÅÂ∫ìÊó∂ÈúÄË¶ÅÊ∑ªÂä†ÂèÇÊï∞&lt;code>-fPIC&lt;/code>, Âê´‰πâÂ∞±ÊòØÁîüÊàêÂú∞ÂùÄÊó†ÂÖ≥Á†Å&lt;/p>
&lt;p>Âú∞ÂùÄÊó†ÂÖ≥Á†ÅÁöÑÂê´‰πâÊòØ‰ª£Á†Å‰∏≠&lt;strong>‰∏çÂåÖÂê´‰ªª‰ΩïÁöÑÁªùÂØπÂú∞ÂùÄÂºïÁî®&lt;/strong>, ÂÖ®ÈÉΩÊòØ&lt;strong>Áõ∏ÂØπÂú∞ÂùÄ&lt;/strong>.&lt;/p>
&lt;ul>
&lt;li>ÂØπ‰∫é&lt;strong>Ê®°ÂùóÂÜÖ&lt;/strong>ÁöÑË∑≥ËΩ¨/Êï∞ÊçÆÂºïÁî®, ‰ΩøÁî®Áõ∏ÂØπÁöÑË∑≥ËΩ¨/Âä†ËΩΩÊåá‰ª§. ‰æãÂ¶ÇARMÊåá‰ª§ÈõÜ‰∏≠ÁöÑ&lt;code>B&lt;/code>, &lt;code>ADR&lt;/code>, ÁªèËøáÊ±áÁºñÂô®‰πãÂêé, ÁõÆÊ†áÁöÑÂú∞ÂùÄÈÉΩ‰ºöËΩ¨‰∏∫Áõ∏ÂØπ‰∫éËØ•Êåá‰ª§(PC)ÁöÑÂÅèÁßª.&lt;/li>
&lt;li>ÂØπ‰∫é&lt;strong>Ê®°ÂùóÈó¥&lt;/strong>ÁöÑË∑≥ËΩ¨/Êï∞ÊçÆÂºïÁî®, ÂÄüÁî®&lt;em>GOTË°®&lt;/em>Êù•Èó¥Êé•ÂÆûÁé∞Âú∞ÂùÄÊó†ÂÖ≥.&lt;/li>
&lt;/ul>
&lt;p>ËÄåÂ¶ÇÊûúËØ•Âä®ÊÄÅÂ∫ì‰∏≠ÂÖ®ÈÉ®‰ΩøÁî®Áõ∏ÂØπÂú∞ÂùÄ, ÈÇ£‰πàÂä†ËΩΩÊó∂‰πüÂ∞±‰∏çÈúÄË¶ÅËøõË°åÈáçÂÆö‰Ωç, Âç≥ÊâÄÊúâÁöÑÁ®ãÂ∫èÈÉΩÂèØ‰ª•
ÂÖ±‰∫´Ëøô‰∫õÂú∞ÂùÄÊó†ÂÖ≥‰ª£Á†Å.&lt;/p>
&lt;blockquote>
&lt;p>‰∏äÈù¢ËØ¥PICÁöÑÂä®ÊÄÅÂ∫ì‰∏çÈúÄË¶ÅÈáçÂÆö‰ΩçÂÖ∂ÂÆûÊòØÈîôËØØÁöÑ, Âè™‰∏çËøáÂÆÉÁöÑÈáçÂÆö‰ΩçËøáÁ®ã‰∏çÈúÄË¶Å‰øÆÊîπ‰ª£Á†ÅÊÆµ,
ËÄåÊòØËÆæÁΩÆ‰∫Ü‰∏Ä‰∏™ÊîæÁΩÆÂú®Êï∞ÊçÆÊÆµÁöÑ&lt;em>GOT&lt;/em>Ë°®Êù•ÂÆûÁé∞‰ª£Á†ÅÊÆµÈÉ®ÂàÜÁöÑÂú∞ÂùÄÊó†ÂÖ≥ÁâπÊÄß.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Áé∞Âú®Ë≤å‰ººGCC ARMÁâàÊú¨Âú®ÁºñËØëÂä®ÊÄÅÂ∫ìÊó∂Âº∫Âà∂‰ΩøÁî®-fPICÈÄâÈ°π, Âê¶Âàô‰ºöÊä•Èîô. ÂØπÊ≠§Êàë‰∏çÊòØ
ÈùûÂ∏∏Á°ÆÂÆö!&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>‰∏ÄËà¨Êù•ËØ¥, ‰∏çÂ∞Ü‰∏ªÁ®ãÂ∫èÁºñËØë‰∏∫Âú∞ÂùÄÊó†ÂÖ≥Á†Å. Âõ†‰∏∫‰∏ªÁ®ãÂ∫è‰∏çÈúÄË¶ÅÂÖ±‰∫´, ËÄå‰∏îÂú∞ÂùÄÊó†ÂÖ≥Á†ÅÁöÑË∞ÉÁî®
ÈúÄË¶Å‰∏§‰∏™Êåá‰ª§: &lt;code>ËÆ°ÁÆóÂú∞ÂùÄ&lt;/code> + &lt;code>Ë∑≥ËΩ¨&lt;/code>. Â§ö‰∫Ü‰∏ÄÊ≠•Ê†πÊçÆÂÅèÁßªÂæóÂà∞ÁªùÂØπÂú∞ÂùÄ.&lt;/p>
&lt;/blockquote>
- https://wangloo.github.io/posts/os-learning/dynamic-link/ - @2019 Notepadium.</description></item></channel></rss>