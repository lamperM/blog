<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/syntax_pastie.css><link rel=stylesheet href=https://gcore.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.1.0/style.css><title>优秀文章阅读</title></head><body><div id=app><div id=sideContainer class=side-container><div class=nav-link-list><div class="a-block nav-link-item"><a href=/posts>最近修改</a></div><div class="a-block nav-link-item"><a href=/categories>分类 Categories</a></div><div class="a-block nav-link-item"><a href=/tags>标签 Tags</a></div><div class="a-block nav-link-item"><a href=/index.xml>RSS Feed</a></div></div></div><div id=extraContainer class=extra-container><div class="a-block nav-link-item" href><div id=fastSearch><input id=searchInput placeholder="Press '/' to focus on me"><ul id=searchResults></ul></div></div><div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }"><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#cache-%e4%bc%aa%e5%85%b1%e4%ba%ab aria-label="Cache 伪共享">Cache 伪共享</a></li></ul></div></details></div></div></div><script src=/js/fuse.js></script>
<script src=/js/fastsearch.js></script><main class=container><article><header><div class=post-title>优秀文章阅读</div></header><h2 id=cache-伪共享>Cache 伪共享</h2><blockquote><p>原地址：<a href=https://mp.weixin.qq.com/s/zeGxBx77TFGtVeMRBVR-Lg>Cache伪共享</a></p></blockquote><p>Cache的操作单位是CacheLine。
当两块内存AB位于同一个CacheLine时，且有两个Cpu核心分别对AB有修改需求，
此时AB都各自被加载到两个Core的Cache中。</p><figure><img src=/fakesharing.jpg width=80%></figure><p>伪共享指的是：若其中一个Core对AB进行修改，那另一个Core内的值变不可信，
需要根据<strong>一致性协议</strong>做出调整（文中举了MESI为例），
使得两边内容一致。如果两边修改的比较频繁，就会导致一致动作经常发生，
<strong>这消耗的时间好似没有Cache存在</strong>，具体的时间损耗依据使用的一致性协议决定。</p></article></body><hr width=100% id=EOF><p style=color:#777>创建于: 2024-02-01T10:00:35, Lastmod: 2024-05-12T20:04:46</p></main></div></body></html>