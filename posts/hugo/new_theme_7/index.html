<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=https://gcore.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.1.0/style.css><title>Hugo 主题创建(7): footer</title></head><body><div id=app><div id=sideContainer class=side-container><div class=nav-link-list><div class="a-block nav-link-item" href>BACK</div><div class="a-block nav-link-item"><a href=/posts>所有文章</a></div><div class="a-block nav-link-item"><a href=/tags>Tags</a></div><div class="a-block nav-link-item"><a href=/index.xml>RSS Feed</a></div><div class="a-block nav-link-item" href><div id=fastSearch><input id=searchInput><ul id=searchResults></ul></div></div><div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }"><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e6%96%87%e4%bb%b6%e5%88%9b%e5%bb%ba%e5%92%8clastmode%e6%97%b6%e9%97%b4 aria-label=文件创建和lastmode时间>文件创建和lastmode时间</a></li></ul></div></details></div></div></div></div><script src=/js/fuse.js></script>
<script src=/js/fastsearch.js></script><main class=container><article><header><div class=post-title>Hugo 主题创建(7): footer</div></header><p>footer属于 partial模板之一, 创建一个新文件<code>footer.html</code>, 然后在baseof模板中,
指定footer内容显示的位置.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>&lt;body&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>    &lt;div id=<span style=color:#a31515>&#34;app&#34;</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>        {{- partial &#34;sidebar.html&#34; . -}}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>        &lt;main class=<span style=color:#a31515>&#34;container&#34;</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>            {{- block &#34;main&#34; . }}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>            {{- end }}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>            {{- partial &#34;footer.html&#34; . -}}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>        &lt;/main&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>        {{- partial &#34;script.html&#34; . -}}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>    &lt;/div&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>&lt;/body&gt;
</span></span></code></pre></div><p>下面将按照功能划分, 添加各种内容到footer模板中.</p><h1 id=文件创建和lastmode时间>文件创建和lastmode时间</h1><blockquote><p>commit: <a href=https://github.com/wangloo/hugo-theme-puer/commit/d263d9af65808ff03b2307abfb4db397ae1bcc2a>https://github.com/wangloo/hugo-theme-puer/commit/d263d9af65808ff03b2307abfb4db397ae1bcc2a</a></p></blockquote><p>文件创建时间是获取的footer中的变量, lastmod其实也可以通过这种方式获取,
但是这样每次修改都要手动更新太复杂, <strong>我们可以借助git追踪的文件的修改时间来作为lastmod</strong>,
默认不是这样的, 需要在config.toml中指定.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>[frontmatter]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>  lastmod = [<span style=color:#a31515>&#39;lastmod&#39;</span>, <span style=color:#a31515>&#39;:git&#39;</span>, <span style=color:#a31515>&#39;:fileModTime&#39;</span>, <span style=color:#a31515>&#39;date&#39;</span>, <span style=color:#a31515>&#39;publishDate&#39;</span>]
</span></span></code></pre></div><p>然后就是在footer.html中引用这两个变量即可:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>&lt;HR width=<span style=color:#a31515>&#34;100%&#34;</span> id=<span style=color:#a31515>&#34;EOF&#34;</span>&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>{{- if not .Lastmod.IsZero -}}
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>    &lt;p style=<span style=color:#a31515>&#34;color:#777;&#34;</span>&gt;创建于: {{ .Date.Format &#34;2006-01-02T15:04:05&#34;}},   Lastmod: {{ .Lastmod.Format &#34;2006-01-02T15:04:05&#34;}}&lt;/p&gt;
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>{{- end -}}
</span></span></code></pre></div></article></body></main></div></body></html>