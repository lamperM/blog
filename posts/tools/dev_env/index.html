<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=https://gcore.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.1.0/style.css><title>我的开发环境构建指南</title></head><body><div id=app><div id=sideContainer class=side-container><div class=nav-link-list><div class="a-block nav-link-item" href>BACK</div><div class="a-block nav-link-item"><a href=/posts>所有文章</a></div><div class="a-block nav-link-item"><a href=/tags>Tags</a></div><div class="a-block nav-link-item"><a href=/index.xml>RSS Feed</a></div><div class="a-block nav-link-item" href><div id=fastSearch><input id=searchInput><ul id=searchResults></ul></div></div><div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }"><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%89%8d%e8%a8%80 aria-label=前言>前言</a></li><li><a href=#%e5%ad%97%e4%bd%93 aria-label=字体>字体</a><ul><li><a href=#fira-code aria-label="Fira Code">Fira Code</a></li><li><a href=#%e9%9c%9e%e9%b9%9c%e6%96%87%e6%a5%b7 aria-label=霞鹜文楷>霞鹜文楷</a></li></ul></li><li><a href=#vscode aria-label=vscode>vscode</a><ul><li><a href=#%e4%b8%bb%e9%a2%98 aria-label=主题>主题</a></li><li><a href=#%e9%85%8d%e7%bd%ae%e5%a4%87%e4%bb%bd aria-label=配置备份>配置备份</a></li></ul></li><li><a href=#vim aria-label=vim>vim</a><ul><li><a href=#vimrc aria-label=vimrc>vimrc</a></li><li><a href=#ycm-%e7%89%b9%e5%88%ab%e6%b3%a8%e6%84%8f aria-label="ycm 特别注意">ycm 特别注意</a><ul><li><a href=#%e4%b8%8b%e8%bd%bd aria-label=下载>下载</a></li><li><a href=#%e7%bc%96%e8%af%91 aria-label=编译>编译</a></li><li><a href=#%e9%85%8d%e7%bd%ae aria-label=配置>配置</a></li><li><a href=#%e4%bc%98%e5%8c%96 aria-label=优化>优化</a></li></ul></li></ul></li><li><a href=#%e7%bb%88%e7%ab%af%e8%bd%af%e4%bb%b6%e5%ae%89%e8%a3%85 aria-label=终端软件安装>终端软件安装</a><ul><li><a href=#%e6%ba%90%e6%9b%bf%e6%8d%a2 aria-label=源替换>源替换</a></li><li><a href=#apt aria-label=apt>apt</a></li><li><a href=#pip3 aria-label=pip3>pip3</a></li></ul></li><li><a href=#shell aria-label=shell>shell</a><ul><li><a href=#zsh aria-label=zsh>zsh</a><ul><li><a href=#oh-my-zsh aria-label=oh-my-zsh>oh-my-zsh</a></li></ul></li><li><a href=#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6 aria-label=配置文件>配置文件</a></li></ul></li><li><a href=#terminal aria-label=terminal>terminal</a></li><li><a href=#ssh-%e5%af%86%e9%92%a5 aria-label="ssh 密钥">ssh 密钥</a></li><li><a href=#tmux aria-label=tmux>tmux</a><ul><li><a href=#reference aria-label=reference>reference</a></li></ul></li></ul></div></details></div></div></div></div><script src=/js/fuse.js></script>
<script src=/js/fastsearch.js></script><main class=container><article><header><div class=post-title>我的开发环境构建指南</div></header><h1 id=前言>前言</h1><p>写这篇博客的背景是<strong>我实在忍受不了每次换新的开发机器都得费好大的劲来完全恢复以前的环境</strong>， 而且，我平常喜欢搜集各种有用的工具、好看的主题，字体这些，如果零零散散的记录，大概率会忘记或者记不得某些细节。</p><p>所以，最后期望达到的是<strong>能够使我每次在新机器上搭建环境只需要看这一篇文章就可以了</strong>。因此这里会记录：</p><ul><li>帮助提升开发效率的小工具</li><li>好看的字体、主题</li><li>配置某些环境的要点及注意事项</li></ul><blockquote><p>🥀 到目前为止，我还未发现一种方式能够完全达到“一键式布置”，这也不是本文的目的。
付出至少半天的时间的一定的，希望未来能发现一种好的方法。</p></blockquote><h1 id=字体>字体</h1><h2 id=fira-code>Fira Code</h2><p>这款字体适合做编程字体，蛮好看的。我在 vscode 和 terminal 下都使用了这款字体。</p><p>详情及安装参考<a href=https://github.com/tonsky/FiraCode>github</a></p><h2 id=霞鹜文楷>霞鹜文楷</h2><p>开源的中文字体，做博客、PPT 不错。</p><p>详情及安装参考<a href=https://github.com/lxgw/LxgwWenKai>github</a></p><h1 id=vscode>vscode</h1><h2 id=主题>主题</h2><h2 id=配置备份>配置备份</h2><h1 id=vim>vim</h1><h2 id=vimrc>vimrc</h2><h2 id=ycm-特别注意>ycm 特别注意</h2><p>YCM 插件对 python, vim 的版本均有要求。</p><h3 id=下载>下载</h3><p>可以使用 vim-plug 等工具下载, 也可以下载源码然后拷贝到<code>.vim</code>目录下</p><h3 id=编译>编译</h3><p>编译用到 python3, 这里是问题最多的一步</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:green># 编译并添加对C的提示支持</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>python3 install.py --clangd-completer --verbose
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>Searching Python 3.8 libraries...
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>...
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>Downloading Clangd from https://github.com/ycm-core/llvm/releases/download/13.0.0/clangd-13.0.0-x86_64-unknown-linux-gnu.tar.bz2...
</span></span></code></pre></div><p>使用<code>--clangd-completer</code>参数时, 脚本会去下载 clangd-14.0.0-x86_64-unknown-linux-gnu.tar.bz2 文件, 比较慢. 也可以<strong>提前根据提示的网站自己手动下载</strong>压缩包.</p><p>下载完成后, 放到本地目录下:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>:~/.vim/plugged/YouCompleteMe/third_party/ycmd/third_party/clangd/cache$ ls
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>clangd-14.0.0-x86_64-unknown-linux-gnu.tar.bz2
</span></span></code></pre></div><p>还需对脚本<code>YouCompleteMe/third_party/ycmd/build.py</code>进行修改, 防止重新下载.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#00f>def</span> DownloadClangd( printer ):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>  ...
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>  MakeCleanDirectory( CLANGD_OUTPUT_DIR )
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>  <span style=color:#00f>if</span> <span style=color:#00f>not</span> p.exists( CLANGD_CACHE_DIR ):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>    os.makedirs( CLANGD_CACHE_DIR )
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>    <span style=color:green># 注释下面的语句</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>    <span style=color:green>#  elif p.exists( file_name ) and not CheckFileIntegrity( file_name, check_sum ):</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>    <span style=color:green>#  printer( &#39;Cached Clangd archive does not match checksum. Removing...&#39; )</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>    <span style=color:green>#  os.remove( file_name )</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>  <span style=color:#00f>if</span> p.exists( file_name ):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>    printer( <span style=color:#a31515>f</span><span style=color:#a31515>&#39;Using cached Clangd: </span><span style=color:#a31515>{</span> file_name <span style=color:#a31515>}</span><span style=color:#a31515>&#39;</span> )
</span></span></code></pre></div><h3 id=配置>配置</h3><p>YCM 配合一个配置文件<code>.ycm_c_c++_conf.py</code>, YCM 搜索的位置在 vimrc 中指定:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vimrc data-lang=vimrc><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>Plug <span style=color:#a31515>&#39;rdnetto/YCM-Generator&#39;</span>, { <span style=color:#a31515>&#39;branch&#39;</span>: <span style=color:#a31515>&#39;stable&#39;</span> }<span>
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span></span><span style=color:#00f>let</span> g:ycm_global_ycm_extra_conf = <span style=color:#a31515>&#34;~/.ycm_c_c++_conf.py&#34;</span><span>
</span></span></span></code></pre></div><p>其内容的 example:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#00f>import</span> os
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#00f>import</span> ycm_core
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>flags = [
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>  <span style=color:#a31515>&#39;-Wall&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>  <span style=color:#a31515>&#39;-Wextra&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:green>#  &#39;-Werror&#39;,</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>  <span style=color:#a31515>&#39;-Wno-long-long&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:green>#  &#39;-Wno-variadic-macros&#39;,</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>  <span style=color:#a31515>&#39;-fexceptions&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>  <span style=color:#a31515>&#39;-ferror-limit=10000&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>  <span style=color:#a31515>&#39;-DNDEBUG&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>  <span style=color:#a31515>&#39;-std=c99&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>  <span style=color:#a31515>&#39;-xc&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>  <span style=color:#a31515>&#39;-isystem/usr/include/&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>  ]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>SOURCE_EXTENSIONS = [ <span style=color:#a31515>&#39;.cpp&#39;</span>, <span style=color:#a31515>&#39;.cxx&#39;</span>, <span style=color:#a31515>&#39;.cc&#39;</span>, <span style=color:#a31515>&#39;.c&#39;</span>, ]
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span><span style=color:#00f>def</span> FlagsForFile( filename, **kwargs ):
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>  <span style=color:#00f>return</span> {
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>  <span style=color:#a31515>&#39;flags&#39;</span>: flags,
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>  <span style=color:#a31515>&#39;do_cache&#39;</span>: <span style=color:#00f>True</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span>  }
</span></span></code></pre></div><h3 id=优化>优化</h3><p>🔻 对于C/C++来说, YCM的使用最好配合<em>compilation database</em> 来使用, 例如<a href=https://github.com/nickdiego/compiledb>compiledb</a>. 否则, 可能头文件的path识别出问题(<a href=https://stackoverflow.com/questions/64277317/youcompleteme-not-work-properly-for-c-headers.>stackoverflow</a>).</p><p>2022年2月13日我使用的compilation database生成工具从<code>compiledb</code>换成了<code>bear</code>, 因为<code>bear</code>更好的支持递归, 即有<code>make -C</code>的情况.</p><p>需要的compilation database生成工具介绍: <a href=https://sarcasm.github.io/notes/dev/compilation-database.html>Compilation database — Sarcasm notebook</a></p><h1 id=终端软件安装>终端软件安装</h1><h2 id=源替换>源替换</h2><h2 id=apt>apt</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>sudo apt install python3-pip
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>sudo apt install tmux
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>sudo apt install fzf
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>sudo apt install zsh
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>sudo apt install cmake
</span></span></code></pre></div><h2 id=pip3>pip3</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:green># CLI 代码高亮</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>sudo pip3 install pygments
</span></span></code></pre></div><h1 id=shell>shell</h1><h2 id=zsh>zsh</h2><h3 id=oh-my-zsh>oh-my-zsh</h3><p>oh-my-zsh可以看作对zsh的配置文件做一层抽象，使配置更方便。
带来的缺点就是速度变慢。</p><blockquote><p>进入git目录下太卡</p><p>TODO： 是主题的原因，可以配置</p></blockquote><h2 id=配置文件>配置文件</h2><ul><li>.bashrc</li><li>.zshrc</li><li>.bash_aliase</li><li>.bash_path</li></ul><h1 id=terminal>terminal</h1><p>ubuntu自带的终端我觉得还不错，有些人说Terminitor不错，分屏功能还是挺常用的！</p><h1 id=ssh-密钥>ssh 密钥</h1><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>ssh-keygen -t rsa -C <span style=color:#a31515>&#34;cnwanglu@icloud.com&#34;</span>
</span></span></code></pre></div><h1 id=tmux>tmux</h1><p>tmux 在远程开发时比较有用。我们在用ssh连到服务器时经常需要有多窗口的需求，
比起现有terminal软件自带的多窗口功能(Xshell,mobaxterm等)，使用tmux
会更加方便。</p><ol><li>窗口创建、切换等方式可以做到统一，不用追随终端软件</li><li>可以保存现场，即便因为网络问题ssh断开，也能随便恢复到之前的状态。因为
tmux是C/S架构，只要服务器上的server不死，永远可以恢复之前状态！</li><li>甚至，tmux提供了将现场保存到本地文件中的功能。</li></ol><h2 id=reference>reference</h2><ol><li><a href=http://louiszhai.github.io/2017/09/30/tmux/>Tmux使用手册</a></li></ol></article></body><hr width=100% id=EOF><p style=color:#777>创建于: 2023-07-17T19:28:12, Lastmod: 2023-09-10T00:29:30</p></main></div></body></html>