<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=https://gcore.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.1.0/style.css><title></title></head><body><div id=app><div id=sideContainer class=side-container><div class=nav-link-list><div class="a-block nav-link-item" href>BACK</div><div class="a-block nav-link-item"><a href=/posts>所有文章</a></div><div class="a-block nav-link-item"><a href=/tags>Tags</a></div><div class="a-block nav-link-item"><a href=/index.xml>RSS Feed</a></div><div class="a-block nav-link-item" href><div id=fastSearch><input id=searchInput placeholder="search posts..."><ul id=searchResults></ul></div></div><div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }"><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#clang%e6%98%af%e4%b8%aa%e5%95%a5 aria-label=Clang是个啥>Clang是个啥</a></li><li><a href=#clangd aria-label=Clangd>Clangd</a><ul><li><a href=#vscode%e9%85%8d%e7%bd%aeclangd%e8%a1%a5%e5%85%a8 aria-label=VSCode配置Clangd补全>VSCode配置Clangd补全</a></li><li><a href=#vim%e9%85%8d%e7%bd%aeclangd%e8%a1%a5%e5%85%a8 aria-label=Vim配置Clangd补全>Vim配置Clangd补全</a></li><li><a href=#clangd%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6 aria-label=Clangd配置文件>Clangd配置文件</a></li></ul></li><li><a href=#clang-format aria-label=Clang-format>Clang-format</a></li><li><a href=#reference aria-label=Reference>Reference</a></li></ul></div></details></div></div></div></div><script src=/js/fuse.js></script>
<script src=/js/fastsearch.js></script><main class=container><article><header><div class=post-title></div></header><h1 id=clang是个啥>Clang是个啥</h1><p><strong>Clang与llvm</strong></p><p>llvm有两种含义：llvm框架和llvm Core</p><ul><li>llvm框架定义了一个编译器的组成架构，此时Clang可以作为框架中针对C/C++语言的前端。
当然llvm框架也并不只是包含这一个前端，也可以有其他的前端。</li><li>llvm Core是除了前端之外的其他构成编译器的部分，包括中端优化和后端。</li></ul><p><strong>Clang与Gcc</strong></p><ul><li>Clang是一个编译器前端，Clang+llvm Core=编译器，Gcc也是一个编译器</li><li>Clang的代码结构更好，扩展性强</li></ul><h1 id=clangd>Clangd</h1><h2 id=vscode配置clangd补全>VSCode配置Clangd补全</h2><p>一般写C代码，用<code>C/C++</code>这个插件来进行自动补全，
效果不太好因为<strong>它是基于代码进行分析</strong>，
理论上不能准确的区别同名函数到底是调用谁的情况。
而且在实践中也经常产生莫名其妙找不到定义的情况。</p><p>“听说”Clangd可以<strong>支持基于编译的分析做代码补全</strong>，
原理上它解析一个调用数据库文件<code>compile_commands.json</code>
来做解析补全。</p><h2 id=vim配置clangd补全>Vim配置Clangd补全</h2><p>我目前使用<code>coc-nvim</code>插件来调用Clangd进行补全。</p><h2 id=clangd配置文件>Clangd配置文件</h2><p>Clangd支持的所有配置项：https://clangd.llvm.org/config.html</p><p>有两种方式对Clangd的配置进行设定：</p><ol><li>全局配置 <code>~/.config/clangd/config.yaml</code></li><li>工程内部 <code>.clangd</code> 仅在工程目录内生效</li></ol><p>以上两个都是YAML类型的文件，我目前使用到了忽略一些编译参数:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>CompileFlags:
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    Remove: [-march=armv8-a] <span style=color:green># invalid target CPU values in clangd-15</span>
</span></span></code></pre></div><h1 id=clang-format>Clang-format</h1><p>代码格式化工具</p><h1 id=reference>Reference</h1><ol><li><a href=https://ahmadsamir.github.io/posts/12-clangd-config-tweaks.html>Clangd config</a></li><li></li></ol></article></body><hr width=100% id=EOF><p style=color:#777>创建于: 0001-01-01T00:00:00, Lastmod: 2023-11-30T17:56:18</p></main></div></body></html>