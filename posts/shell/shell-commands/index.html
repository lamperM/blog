<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=https://gcore.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.1.0/style.css><title>常用的 shell 命令</title></head><body><div id=app><div id=sideContainer class=side-container><div class=nav-link-list><div class="a-block nav-link-item" href>BACK</div><div class="a-block nav-link-item"><a href=/posts>最近修改</a></div><div class="a-block nav-link-item"><a href=/categories>分类 Categories</a></div><div class="a-block nav-link-item"><a href=/tags>标签 Tags</a></div><div class="a-block nav-link-item"><a href=/index.xml>RSS Feed</a></div></div></div><div id=extraContainer class=extra-container><div class="a-block nav-link-item" href><div id=fastSearch><input id=searchInput placeholder="Press '/' to focus on me"><ul id=searchResults></ul></div></div><div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }"><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%bc%80%e5%8f%91 aria-label=开发>开发</a><ul><li><a href=#mkfsext4 aria-label=mkfs.ext4>mkfs.ext4</a></li><li><a href=#dd aria-label=dd>dd</a></li><li><a href=#mount aria-label=mount>mount</a></li><li><a href=#find aria-label=find>find</a></li><li><a href=#%e9%80%9a%e7%94%a8 aria-label=通用>通用</a><ul><li><a href=#--%e7%9a%84%e5%a6%99%e7%94%a8 aria-label="- 的妙用"><code>-</code> 的妙用</a></li></ul></li></ul></li></ul></div></details></div></div></div><script src=/js/fuse.js></script>
<script src=/js/fastsearch.js></script><main class=container><article><header><div class=post-title>常用的 shell 命令</div></header><h2 id=开发>开发</h2><h3 id=mkfsext4>mkfs.ext4</h3><p>格式化文件为ext4分区</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>mkfs.ext4 &lt;file&gt; <span style=color:#888># 将file格式化为ext4</span>
</span></span></code></pre></div><h3 id=dd>dd</h3><p><a href=https://www.runoob.com/linux/linux-comm-dd.html>https://www.runoob.com/linux/linux-comm-dd.html</a></p><h3 id=mount>mount</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sudo mount [file] [dir] <span style=color:#888># 挂载file到dir</span>
</span></span><span style=display:flex><span>sudo umount [dir] 
</span></span><span style=display:flex><span>sudo mount <span style=color:#888># 输出当前已经挂载的分区</span>
</span></span></code></pre></div><h3 id=find>find</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#888># 查找24小时内修改过的文件</span>
</span></span><span style=display:flex><span>find . -mtime <span style=color:#00d;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#888># 查找2小时内修改过的文件</span>
</span></span><span style=display:flex><span>find . -mmin -<span style=color:#080;font-weight:700>$((</span><span style=color:#00d;font-weight:700>2</span>*<span style=color:#00d;font-weight:700>60</span><span style=color:#080;font-weight:700>))</span>
</span></span><span style=display:flex><span><span style=color:#888># 查找24小时内访问过的文件</span>
</span></span><span style=display:flex><span>find . -atime 0s
</span></span></code></pre></div><h3 id=通用>通用</h3><p>执行cp命令时，如果目录下有链接文件，拷贝源文件而不是链接文件，这在链接文件指向相对地址时非常有用。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cp -rL /path/to/ /path/from
</span></span></code></pre></div><p>搜索目录文件内容包含关键字</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#888># n: print line number</span>
</span></span><span style=display:flex><span><span style=color:#888># r: recursive search</span>
</span></span><span style=display:flex><span>grep -nr <span style=color:#d20;background-color:#fff0f0>&#34;pattern&#34;</span>
</span></span></code></pre></div><p>查看当前用的是哪个shell:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#038>echo</span> <span style=color:#369>$0</span>
</span></span></code></pre></div><p>which 查看可执行文件的位置，whereis 除了可执行文件还能搜索其他类型的文件, 不常用, 详见 <code>man whereis</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ which python3
</span></span><span style=display:flex><span>/usr/bin/python3
</span></span></code></pre></div><h4 id=--的妙用><code>-</code> 的妙用</h4><p>一些命令支持使用 <code>-</code> 代替文件名, 输入输出都可以:</p><ul><li>代替标准输出; 一些命令会将<code>-o/-O</code> 后面的<code>-</code>判定为输出到<em>STDOUT</em>, 详见下面示例.</li><li>代替标准输入;</li></ul><p>下面给出两个同时代替输入输出的例子:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#888># 将标准输入(STDIN)的内容作为gcc的输入, 编译后的结果输出到标准输出(STDOUT)</span>
</span></span><span style=display:flex><span><span style=color:#038>echo</span> <span style=color:#d20;background-color:#fff0f0>&#39;void foo() {}&#39;</span> | gcc -x c -o - -
</span></span><span style=display:flex><span><span style=color:#888># 将下载的文件输出到标准输出, 同时作为tar命令的输入文件, 进行解压</span>
</span></span><span style=display:flex><span>wget -O - <span style=color:#d20;background-color:#fff0f0>&#34;https://www.dropbox.com/download?plat=lnx.x86_64&#34;</span> | tar xzf -
</span></span></code></pre></div><blockquote><p><code>-</code> 如何被解析是<strong>取决于命令的实现</strong>, 非标准. 比如 <code>cd -</code> 就有特殊的含义</p></blockquote></article></body><hr width=100% id=EOF><p style=color:#777>创建于: 2022-11-27T14:45:58, Lastmod: 2024-04-22T14:38:42</p><script src=/js/clipboard.js></script></main></div></body></html>