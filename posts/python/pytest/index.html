<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/syntax_pastie.css><link rel=stylesheet href=https://gcore.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.1.0/style.css><title>Pythonï¼šPytestæ¡†æ¶å­¦ä¹ </title></head><body><div id=app><div id=sideContainer class=side-container><div class=nav-link-list><div class="a-block nav-link-item"><a href=/posts>æœ€è¿‘ä¿®æ”¹</a></div><div class="a-block nav-link-item"><a href=/categories>åˆ†ç±» Categories</a></div><div class="a-block nav-link-item"><a href=/tags>æ ‡ç­¾ Tags</a></div><div class="a-block nav-link-item"><a href=/index.xml>RSS Feed</a></div></div></div><div id=extraContainer class=extra-container><div class="a-block nav-link-item" href><div id=fastSearch><input id=searchInput placeholder="Press '/' to focus on me"><ul id=searchResults></ul></div></div><div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }"><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#config aria-label=Config>Config</a></li><li><a href=#marker aria-label=Marker>Marker</a><ul><li><a href=#%e4%bd%bf%e7%94%a8-marker-%e5%af%b9%e7%94%a8%e4%be%8b%e5%88%86%e7%b1%bb aria-label="ä½¿ç”¨ Marker å¯¹ç”¨ä¾‹åˆ†ç±»">ä½¿ç”¨ Marker å¯¹ç”¨ä¾‹åˆ†ç±»</a></li><li><a href=#%e4%bd%bf%e7%94%a8-marker-%e9%85%8d%e7%bd%ae-skip-%e7%94%a8%e4%be%8b aria-label="ä½¿ç”¨ Marker é…ç½® Skip ç”¨ä¾‹">ä½¿ç”¨ Marker é…ç½® Skip ç”¨ä¾‹</a></li></ul></li><li><a href=#%e6%b5%8b%e8%af%95%e5%87%bd%e6%95%b0%e7%9a%84%e5%8f%82%e6%95%b0 aria-label=æµ‹è¯•å‡½æ•°çš„å‚æ•°>æµ‹è¯•å‡½æ•°çš„å‚æ•°</a></li></ul></div></details></div></div></div><script src=/js/fuse.js></script>
<script src=/js/fastsearch.js></script><main class=container><article><header><div class=post-title>Pythonï¼šPytestæ¡†æ¶å­¦ä¹ </div></header><h2 id=config>Config</h2><h2 id=marker>Marker</h2><h3 id=ä½¿ç”¨-marker-å¯¹ç”¨ä¾‹åˆ†ç±»>ä½¿ç”¨ Marker å¯¹ç”¨ä¾‹åˆ†ç±»</h3><p>Maker å¸®åŠ©æˆ‘ä»¬å¯¹ç”¨ä¾‹è¿›è¡Œåˆ†ç±»ï¼ŒåŒºåˆ†ä¸åŒçš„åœºæ™¯å’Œå¹³å°ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä½¿ç”¨ @pytest.mark.smoke æ ‡è®°ä¸€ä¸ªå†’çƒŸæµ‹è¯•</span>
</span></span><span class=line><span class=cl><span class=nd>@pytest</span><span class=o>.</span><span class=n>mark</span><span class=o>.</span><span class=n>smoke</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>test_login</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä½¿ç”¨ @pytest.mark.integration æ ‡è®°ä¸€ä¸ªé›†æˆæµ‹è¯•</span>
</span></span><span class=line><span class=cl><span class=nd>@pytest</span><span class=o>.</span><span class=n>mark</span><span class=o>.</span><span class=n>integration</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>TestPaymentSystem</span><span class=p>:</span>
</span></span></code></pre></div><p>ä¸€ä¸ªç”¨ä¾‹æ”¯æŒæœ‰å¤šä¸ª Markerï¼Œæ¯”å¦‚è¯´æŸä¸ªç”¨ä¾‹å¯èƒ½ smoke å’Œ dailybuild éƒ½è¦è·‘ï¼Œå°±å¯ä»¥ä¸ºå®ƒæŒ‡å®šä¸¤ä¸ª makerã€‚</p><p>Pytest è¿è¡Œæ—¶ï¼Œé€šè¿‡ <code>-m</code>/ <code>--maker</code> å‚æ•°æ¥æŒ‡å®šæœ¬æ¬¡æµ‹è¯•çš„ marker è¡¨è¾¾å¼ã€‚æ”¯æŒä¸æˆ–éçš„ç»„åˆã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ‰§è¡Œæ‰€æœ‰æ ‡è®°ä¸º smoke çš„æµ‹è¯•</span>
</span></span><span class=line><span class=cl>pytest -m smoke
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ‰§è¡Œæ ‡è®°ä¸º smoke æˆ– integration çš„æµ‹è¯•</span>
</span></span><span class=line><span class=cl>pytest -m <span class=s2>&#34;smoke or integration&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ‰§è¡Œæ—¢é slow ä¹Ÿé integration çš„æµ‹è¯•</span>
</span></span><span class=line><span class=cl>pytest -m <span class=s2>&#34;not slow and not integration&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># è¿è¡ŒåŒæ—¶å¸¦æœ‰ unit å’Œ integration çš„æµ‹è¯•</span>
</span></span><span class=line><span class=cl>pytest -m <span class=s2>&#34;unit and integration&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å¤æ‚ç»„åˆç­›é€‰</span>
</span></span><span class=line><span class=cl>pytest -m <span class=s2>&#34;(system or integration) and not unit&#34;</span>  <span class=c1>#è¿è¡Œsystemæˆ–integrationï¼Œä¸”ä¸è¿è¡Œå¸¦æœ‰unitçš„æµ‹è¯•</span>
</span></span></code></pre></div><p>ä»£ç ä¸­ä¹Ÿå¯ä»¥ä¿®æ”¹ Markerã€‚æ¯”å¦‚è¯´åœ¨ config é‡ŒåŠ äº†ä¸€ä¸ªå±æ€§ï¼Œæœ‰è¿™ä¸ªå±æ€§çš„æƒ…å†µä¸‹å°±è‡ªåŠ¨åŠ ä¸Šä¸€ä¸ª markerï¼Œè¿™æ ·å°±ä¸ç”¨åœ¨è¿è¡Œå‘½ä»¤å‚æ•°é‡Œå†™ä¸¤éäº†ã€‚</p><h3 id=ä½¿ç”¨-marker-é…ç½®-skip-ç”¨ä¾‹>ä½¿ç”¨ Marker é…ç½® Skip ç”¨ä¾‹</h3><p>åˆ†ç±»æŒ‰ç†è¯´ç”¨ marker æ­£å‘çš„æŒ‡å®šå°±è¡Œï¼Œä½†æ˜¯ Pytest ä¹Ÿæä¾›äº†åå‘è¿‡æ»¤çš„æ–¹æ³•ï¼Œæ›´åŠ çš„çµæ´»ã€‚ç‰¹åˆ«æ˜¯<code>skipif</code> æˆ‘è§‰å¾—æ›´åŠ é€‚åˆäºå¯¹è¿è¡Œæ—¶å˜é‡çš„æ¡ä»¶è¿‡æ»¤ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># @pytest.mark.skip(è·³è¿‡åŸå› )</span>
</span></span><span class=line><span class=cl><span class=c1># @pytest.mark.skipif(è·³è¿‡æ¡ä»¶,è·³è¿‡åŸå› )</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç¤ºä¾‹</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>TestDemo</span><span class=p>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>workage2</span> <span class=o>=</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>    <span class=n>workage3</span> <span class=o>=</span> <span class=mi>20</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@pytest</span><span class=o>.</span><span class=n>mark</span><span class=o>.</span><span class=n>skip</span><span class=p>(</span><span class=n>reason</span><span class=o>=</span><span class=s2>&#34;æ— ç†ç”±è·³è¿‡&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_demo1</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;æˆ‘è¢«è·³è¿‡äº†&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@pytest</span><span class=o>.</span><span class=n>mark</span><span class=o>.</span><span class=n>skipif</span><span class=p>(</span><span class=n>workage2</span><span class=o>&lt;</span><span class=mi>10</span><span class=p>,</span><span class=n>reason</span><span class=o>=</span><span class=s2>&#34;å·¥ä½œç»éªŒå°‘äº10å¹´è·³è¿‡&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_demo2</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;ç”±äºç»éªŒä¸è¶³ï¼Œæˆ‘è¢«è·³è¿‡äº†&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@pytest</span><span class=o>.</span><span class=n>mark</span><span class=o>.</span><span class=n>skipif</span><span class=p>(</span><span class=n>workage3</span><span class=o>&lt;</span><span class=mi>10</span><span class=p>,</span><span class=n>reason</span><span class=o>=</span><span class=s2>&#34;å·¥ä½œç»éªŒå°‘äº10å¹´è·³è¿‡&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_demo3</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;ç”±äºç»éªŒè¿‡å…³ï¼Œæˆ‘è¢«æ‰§è¡Œäº†&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>test_demo3</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;æˆ‘æ²¡æœ‰è·³è¿‡æ¡ä»¶ï¼Œæ‰€ä»¥æˆ‘è¢«æ‰§è¡Œäº†&#34;</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=æµ‹è¯•å‡½æ•°çš„å‚æ•°>æµ‹è¯•å‡½æ•°çš„å‚æ•°</h2><p>åœ¨ä½¿ç”¨ä¸­æˆ‘çœ‹åˆ°æ¯ä¸ªæµ‹è¯•å‡½æ•°çš„å‚æ•°éƒ½ä¸æ˜¯å›ºå®šçš„ï¼Œè€Œä¸”è¿™ç§è‡ªåŠ¨åŒ–çš„æµ‹è¯•æ¡†æ¶æ‰¾ä¸åˆ°æ¯ä¸ªå‡½æ•°çš„è°ƒç”¨ç‚¹ï¼ŒğŸ¤” è¿™äº›å‚æ•°æ˜¯æ€ä¹ˆå°±å¯ä»¥éšä¾¿æŒ‡å®šï¼Œåœ¨ä¼ å…¥çš„æ—¶å€™åˆèƒ½æ­£ç¡®å‘¢ï¼Ÿ</p></article></body><hr width=100% id=EOF><p style=color:#777>åˆ›å»ºäº: 2024-10-06T19:28:12, Lastmod: 2024-11-20T21:14:21</p><script src=/js/copy-to-clipboard.js></script></main></div></body></html>