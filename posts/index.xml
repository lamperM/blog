<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on Wangloo's BLOG</title><link>https://wangloo.github.io/posts/</link><description>Recent content in Posts on Wangloo's BLOG</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>@2019 Notepadium.</copyright><lastBuildDate>Thu, 09 Mar 2023 17:18:57 +0800</lastBuildDate><atom:link href="https://wangloo.github.io/posts/index.xml" rel="self" type="application/rss+xml"/><item><title>Cè¯­è¨€è‡ªèº«çš„éš¾ç‚¹</title><link>https://wangloo.github.io/posts/c/puzzle/</link><pubDate>Thu, 09 Mar 2023 17:18:57 +0800</pubDate><guid>https://wangloo.github.io/posts/c/puzzle/</guid><description>å‡½æ•°æŒ‡é’ˆ æŒ‡é’ˆçš„æ•°ç»„ or æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆ? &amp;gt;&amp;gt; int (*p)[10] pæ˜¯æŒ‡é’ˆ, æŒ‡å‘é•¿åº¦ä¸º10çš„æ•°ç»„. åŠ æ‹¬å·æ˜¯ä¸ºäº†å¼ºè°ƒpæ˜¯ä¸€ä¸ªæŒ‡é’ˆ, åŒºåˆ«åŒ…å«10ä¸ªæŒ‡é’ˆçš„array. &amp;gt;&amp;gt; int *(p[10]) pæ˜¯æ•°ç»„, å®ƒçš„å…ƒç´ ç±»å‹æ˜¯int *, åŠ æ‹¬å·æ˜¯ä¸ºäº†å¼ºè°ƒpæ˜¯æ•°ç»„. &amp;gt;&amp;gt; int *p[10] ç­‰æ•ˆäºint *(p[10]) åŸºç¡€æ¶æ„ // å‡½æ•°æŒ‡é’ˆ &amp;gt;&amp;gt; int (*f)(int) è¯´æ˜fæ˜¯ä¸€ä¸ªæŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆ, åŠ æ‹¬å·ä¸ºäº†åŒºåˆ«è¿”å›å€¼ä¸ºint*çš„å‡½æ•° &amp;gt;&amp;gt; f = function; å‡½æ•°æŒ‡é’ˆçš„èµ‹å€¼ &amp;gt;&amp;gt; (*f)(x) å‡½æ•°æŒ‡é’ˆæŒ‡å‘å‡½æ•°çš„è°ƒç”¨, å¯ç®€åŒ–ä¸ºf(x). ä½†æ˜¯å®¹æ˜“å°†fè¯¯è®¤ä¸ºæ˜¯å‡½æ•°. // å‡½æ•°æŒ‡é’ˆçš„æ•°ç»„ &amp;gt;&amp;gt; int (*(f[10])) (int) fæ˜¯æ•°ç»„,å…ƒç´ ä¸º10ä¸ªå‡½æ•°æŒ‡é’ˆ. å†…å±‚æ‹¬å·è¯´æ˜fæ˜¯æ•°ç»„,å¤–å±‚æ‹¬å·è¯´æ˜å…ƒç´ ç±»å‹æ˜¯å‡½æ•°æŒ‡é’ˆ &amp;gt;&amp;gt; int (*f[10]) (int) ä¸ä¸Šé¢ç­‰æ•ˆ. ä½†å¤–å±‚æ‹¬å·ä¸èƒ½çœç•¥ &amp;gt;&amp;gt; f[0] = function() èµ‹å€¼ &amp;gt;&amp;gt; (*f[0])() æŒ‡å‘å‡½æ•°çš„è°ƒç”¨, å¯ç®€åŒ–ä¸ºf[0]() // è¿”å›å‡½æ•°æŒ‡é’ˆçš„å‡½æ•° &amp;gt;&amp;gt; void (*signal(int sig, .</description></item><item><title>Cè¯­è¨€ç¨‹åºè®¾è®¡çš„ä¸€äº›ç»éªŒ</title><link>https://wangloo.github.io/posts/c/experience/</link><pubDate>Mon, 27 Feb 2023 19:20:20 +0800</pubDate><guid>https://wangloo.github.io/posts/c/experience/</guid><description>å¤´æ–‡ä»¶çš„å¼•ç”¨å½¢å¼ C ä¸­å¼•ç”¨ä¸€ä¸ªå¤´æ–‡ä»¶æœ‰ä¸¤ç§å½¢å¼ #include &amp;lt;&amp;gt;å’Œ#include &amp;quot;&amp;quot;ï¼Œåœ¨åº”ç”¨å¼€å‘ä¸­ï¼Œéœ€è¦å¼•ç”¨ä¸€äº›ç³»ç»Ÿåº“æ–‡ä»¶ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨&amp;lt;&amp;gt;ï¼Œå¯¹äºè‡ªå·±å®šä¹‰çš„å¤´æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨&amp;quot;&amp;quot;ã€‚
ç„¶è€Œå¯¹äºåº•å±‚è½¯ä»¶çš„å¼€å‘ï¼Œæ¯”å¦‚è¯´æ“ä½œç³»ç»Ÿï¼Œç”¨åˆ°çš„åº“éƒ½æ˜¯è‡ªå·±å·¥ç¨‹ä¸­çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆæ­¤æ—¶ç”¨&amp;quot;&amp;quot;å’Œ&amp;lt;&amp;gt;æœ‰æ—¶éƒ½èƒ½ workï¼Œé‚£ä¹ˆå®ƒä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
æœç´¢ç›¸å…³å…³é”®è¯å¾—åˆ°çš„ç»“è®ºæ˜¯: ä¸¤ç§æ–¹å¼çš„åŒºåˆ«æ˜¯æœç´¢æ–‡ä»¶çš„ä¼˜å…ˆçº§ï¼Œ &amp;quot;&amp;quot;ä¼˜å…ˆæœç´¢çš„å½“å‰ç›®å½•ï¼Œè€Œ&amp;lt;&amp;gt;ä¼˜å…ˆæœç´¢ç³»ç»Ÿåº“æ–‡ä»¶ç›®å½•ã€‚å¯¹äºè¿™ä¸ªç³»ç»Ÿåº“ï¼Œå³é‚£äº›ä½¿ç”¨gcc -I&amp;lt;dir&amp;gt;å‚æ•°æŒ‡å®šçš„è·¯å¾„ã€‚ å½“ç„¶ï¼Œå¦‚æœç¬¬ä¸€ä¼˜å…ˆçº§ä½ç½®æ²¡æœ‰è¢«æ‰¾åˆ°ï¼Œä¹Ÿä¼šåˆ°å¦ä¸€ä¸ªç›®å½•ä¸­æœç´¢ã€‚è¿™ä¹ˆä¸¤ç§æ–¹å¼å‡å¯ï¼Œå®é™…å·¥ç¨‹ä¸­ä¹Ÿæœ‰éƒ¨åˆ†äººæ··åˆä½¿ç”¨ï¼Œæ¯«ä¸åœ¨æ„è§„åˆ™ã€‚ä½†æ˜¯æœ‰æ—¶ä¼šå¯¼è‡´ä¸€äº›ç»†èŠ‚é—®é¢˜ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°-MMDæˆ–è€…ç±»ä¼¼é€‰é¡¹ç”Ÿæˆç›®æ ‡æ–‡ä»¶çš„ä¾èµ–ï¼Œæ–¹ä¾¿å®ç°å¢é‡ç¼–è¯‘ã€‚æ­¤æ—¶å°±å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜ã€‚
å‡è®¾ä½ æœ‰ä¸€ä¸ªå¤´æ–‡ä»¶inc/father.h, å®ƒé‡Œé¢ä¼šå¼•ç”¨inc/child.h, å¯¹äºæ ¹ç›®å½•ä¸‹çš„æºæ–‡ä»¶main.cï¼Œå…¶å¼•ç”¨è¯­å¥è¯¥å¦‚ä½•å†™å‘¢ï¼Ÿä»¥ä¸‹åˆ—å‡ºçš„å‡ ç§å½¢å¼éƒ½å¯ä»¥ï¼Œä»»æ„çš„æ’åˆ—ç»„åˆ
// ç¼–è¯‘å‚æ•°: -I. -MMD // main.c #include &amp;#34;inc/father.h&amp;#34;#include &amp;lt;inc/father.h&amp;gt; // father.h #include &amp;#34;inc/child.h&amp;#34;#include &amp;lt;inc/child.h&amp;gt;#include &amp;#34;child.h&amp;#34;#include &amp;lt;child.h&amp;gt; å¦‚æœ main.c æ˜¯ä½¿ç”¨ç³»ç»Ÿåº“è·¯å¾„(-I.)æ¥æ‰¾åˆ°çš„ father.h, å³ä¸Šé¢ main.c çš„ç¬¬ 2 ç§æƒ…å†µï¼Œé‚£ä¹ˆå…¶ç”Ÿæˆä¾èµ–æ–‡ä»¶çš„å½¢å¼å†…å®¹éƒ½æ˜¯ç»å¯¹è·¯å¾„ï¼ŒåŒ…æ‹¬ father.h ä¸­çš„å¼•ç”¨ï¼ˆå› ä¸ºå³ä¾¿ child.h æ˜¯ç›¸å¯¹è·¯å¾„æ‰¾åˆ°çš„ï¼Œç›¸å¯¹çš„ä¹Ÿæ˜¯ father.hï¼Œå…¶åŸºå‡†å°±æ˜¯ç»å¯¹è·¯å¾„ï¼‰ã€‚ä¾‹å¦‚:main.o: main.c /home/xx/father.h /home/xx/child.h å¦åˆ™å³ä»¥ç›¸å¯¹è·¯å¾„æ‰¾åˆ° father.h,å³ä¸Šè¯´ main.c çš„ç¬¬ 1 ç§ï¼Œé‚£ä¹ˆç”Ÿæˆ father.h ä¾èµ–çš„æ–¹å¼ä¸€å®šæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œä½† child.h çš„å½¢å¼å´å–å†³äºå…¶æœ¬èº«. ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ child.h çš„å¯»æ‰¾æ–¹å¼æ˜¯ç»å¯¹çš„ï¼ˆä¸Šé¢çš„ç¬¬ 1,2,4 ç§ï¼‰ï¼Œé‚£ä¹ˆä¾èµ–æ–‡ä»¶çš„å½¢å¼å°±æ˜¯main.o: main.c inc/father.h /home/xx/child.h. å¦‚æœ child.h çš„å¯»æ‰¾æ–¹å¼æ˜¯ç›¸å¯¹çš„(ä¸Šé¢çš„ç¬¬ 3 ç§)ï¼Œé‚£ä¹ˆä¾èµ–æ–‡ä»¶çš„å½¢å¼æ˜¯main.</description></item><item><title>è¡Œç»“æŸç¬¦åœ¨windowså’Œlinuxçš„åŒºåˆ«</title><link>https://wangloo.github.io/posts/c/end-of-line/</link><pubDate>Sat, 24 Dec 2022 01:35:24 +0800</pubDate><guid>https://wangloo.github.io/posts/c/end-of-line/</guid><description>ä½¿ç”¨VIM æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ—¶, æœ‰æ—¶ä¼šçœ‹åˆ°ä¾‹å¦‚ ^M è¿™ç±»å­—ç¬¦å‡ºç°. ä¸‹é¢æˆ‘ä¼šæŒ–ä¸€ä¸‹å…¶å‡ºç°çš„åŸå› .
EOL å­—ç¬¦ EOL æˆ–è€…è¯´ end-of-line è¡¨ç¤ºä¸€ä¸ªæ–°è¡Œçš„å¼€å§‹.
EOL å­—ç¬¦åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸­æ˜¯ä¸åŒçš„. æœ¬æ–‡ä¸­ä»…ä»¥ Linux å’Œ Windows ä¸ºä¾‹è¯´æ˜.
Windowsä¸­æ˜¯ä»¥è¯»åˆ°å›è½¦&amp;lt;CR&amp;gt;å’Œæ¢è¡Œ&amp;lt;LF&amp;gt; è¡¨ç¤º EOL. Linux ä¸­ä»…ä»¥æ¢è¡Œä½œä¸ºEOL å›è½¦&amp;lt;CR&amp;gt; : Carriage return. å°†å…‰æ ‡å›åˆ°è¡Œé¦–, å¯¹åº”Cè¯­è¨€ä¸­çš„ \r æ¢è¡Œ&amp;lt;LF&amp;gt; : Line feed. å°†å…‰æ ‡ä¸‹ç§»ä¸€è¡Œ, å¯¹åº”Cè¯­è¨€ä¸­çš„ \n åœ¨ Linux ä¸­æ‰“å¼€ Windows ä¸‹çš„æ–‡ä»¶å°†å¤šä½™çš„å›è½¦é€šå¸¸æ˜¾ç¤ºæˆ ^M æˆ–è€… Control-M
Ref End Of Line Characters</description></item><item><title>æµ…è°ˆ errno çš„çº¿ç¨‹å®‰å…¨é—®é¢˜</title><link>https://wangloo.github.io/posts/os/errno_thread_safe/</link><pubDate>Wed, 21 Dec 2022 19:08:22 +0800</pubDate><guid>https://wangloo.github.io/posts/os/errno_thread_safe/</guid><description>æˆ‘å§‹ç»ˆä»¥ä¸ºï¼ŒCåº“ä¸­å¸¸ç”¨çš„ errno ä»…æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œä½¿ç”¨äº†å…¨å±€å˜é‡å°±æ— æ³•ä¿è¯çº¿ç¨‹å®‰å…¨äº†ï¼Œå› ä¸ºå…¨å±€å˜é‡åœ¨æ‰€æœ‰çº¿ç¨‹ä¸­éƒ½æ˜¯å…±äº«çš„ã€‚
è¦å®ç°çº¿ç¨‹å®‰å…¨çš„errno å°±å¿…é¡»å°†å…¶è®¾ç½®ä¸ºçº¿ç¨‹ç§æœ‰çš„å˜é‡ï¼Œä¸‹é¢å°±æ¥çœ‹çœ‹GCCæ˜¯å¦‚ä½•å·§å¦™çš„å®ç°çš„ã€‚
æ­£æ–‡ ç°åœ¨çš„errnoå®šä¹‰å¹¶éä¸€ä¸ªå…¨å±€å˜é‡, è€Œæ˜¯ä¸€ä¸ªå®å®šä¹‰, ä»¥ä¸‹æ˜¯åœ¨usr/include/errnoä¸­çš„å£°æ˜:
extern int *__errno_location (void); # define errno (*__errno_location ()) è¿™ç§æ–¹å¼ä¸‹å…¶å®ç°åŸç†å¤§æ¦‚æ˜¯: __errno_location å‡½æ•°è¿”å›ä¸€ä¸ªintæŒ‡é’ˆ, è€Œè¿™ä¸ªå‡½æ•°çš„å®ç°ä¸­, è¿”å›çš„å°±æ°å¥½æ˜¯å®é™…çš„errno å˜é‡(ä¸å®åŒå)çš„åœ°å€, æ‰€ä»¥å¯¹å…¶è§£å¼•ç”¨å°±ç›¸å½“äºå¯¹å…¶å€¼è¿›è¡Œæ“ä½œ. æ‰€ä»¥, è¿™ç§å®šä¹‰è§„åˆ™ä¸‹, å·¦å€¼å’Œå³å€¼è¡¨è¾¾å¼å‡æˆç«‹.
errno = 10; // *__errno_location () = 10 int x = errno; // x = *__errno_location (); __errno_location çš„å®ç°å°±è‡³å…³é‡è¦, å› ä¸ºå¦‚æœå…¶è¿”å›çš„å˜é‡åœ°å€ä¸åŒ…å«ä»»ä½•æŠ€å·§çš„è¯, å°±å’ŒåŸå…ˆç›´æ¥å®šä¹‰å…¨å±€å˜é‡çš„æ–¹å¼æ²¡å·®äº†, è¯´åˆ°åº•èƒ½å¦å®ç°çº¿ç¨‹å®‰å…¨, è¿˜å¾—çœ‹å®é™…ä¿å­˜errnoçš„å˜é‡æ˜¯å¦ä¸ºçº¿ç¨‹ç‹¬æœ‰çš„. ç›®å‰è¿˜æ²¡æœ‰å‘æ˜åˆ°å…¶ç²¾é«“, åªæ˜¯å¥—å£³è€Œå·².
ä»¥ä¸‹ç»™å‡º/csu/errno-loc.cä¸­__errno_location çš„å®ç°, ä¸æˆ‘ä»¬é¢„æœŸä¸€è‡´, è¿”å›å˜é‡çš„åœ°å€. è€ŒåŒåå˜é‡errnoåˆ™å®šä¹‰åœ¨/csu/errno.cä¸­, å†³å®šäº†èƒ½å¤Ÿå®ç°errnoçš„çº¿ç¨‹å®‰å…¨.
int * __errno_location (void) { return &amp;amp;errno; } __thread int errno; &amp;ldquo;__thread&amp;rdquo; æ˜¯GCCæä¾›çš„æ‰©å±•å‰ç¼€, è¡¨ç¤ºè¯¥å˜é‡å°†è¢«åº“å¤„ç†ä¸ºçº¿ç¨‹ç§æœ‰çš„, æ³¨æ„è¿™ä¸€æ­¥æ˜¯Cåº“å®Œæˆçš„, å¯¹ç¨‹åºå‘˜é€æ˜.</description></item><item><title>git å®å…¸</title><link>https://wangloo.github.io/posts/git/</link><pubDate>Tue, 13 Dec 2022 17:39:42 +0800</pubDate><guid>https://wangloo.github.io/posts/git/</guid><description>åˆå¹¶æ“ä½œ: git merge merge æœ‰ä¸¤ç§æ–¹å¼:
fast-forward three-way merger Fast-forward Merge å‡è®¾åˆå¹¶çš„åŒæ–¹ä¸ºmainä¸ºdev, å¦‚æœå…¶ä¸­ä¸€ä¸ªæ˜¯å¦ä¸€ä¸ªçš„ç¥–å…ˆ, æ­¤æ—¶ç›´æ¥ç§»åŠ¨ HEAD åˆ°å‰æ–¹å³å¯, ç§°ä¸º fast-forward.
ä¾‹å¦‚, å½“å‰åœ¨ main, æ‰§è¡Œgit merge devçš„è¿‡ç¨‹å¦‚ä¸‹:
main main | | M1 --- M2 ===&amp;gt; M1 --- M2 -- F1 \ | \--- F1 dev | dev three-way Merge åˆå¹¶çš„ä¸¤è€…ä¸æ„æˆç›´æ¥çš„ç¥–å…ˆ-å­©å­å…³ç³», äº§ç”Ÿäº†åˆ†å‰. æ­¤æ—¶è¿›è¡Œåˆå¹¶å°±éœ€è¦æœ‰ä¸ªåŸºå‡†(å‚è€ƒ), å¯¹äºä¸¤è¾¹ç›¸è¾ƒäºåŸºå‡†çš„æ¯ä¸ª diff æ¥è¯´:
åˆå¹¶çš„ä¸¤è€…éƒ½åœ¨åŸºå‡†ä¸Šè¿›è¡Œäº†æ”¹åŠ¨, ä¸”æ”¹åŠ¨ä¸ä¸€è‡´, æ ‡è®°ä¸ºå†²çª å¦‚æœè¯¥ diffä»…åœ¨å…¶ä¸­ä¸€æ–¹æœ‰æ”¹åŠ¨, é‚£ä¹ˆå°±ä¿ç•™æ­¤æ¬¡æ”¹åŠ¨ åˆå¹¶æ—¶ä½¿ç”¨çš„å‚è€ƒå°±æ˜¯ä¸¤ä¸ªåˆå¹¶ commit çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ, è¿™ç§å€ŸåŠ©ä¸‰ä¸ª commit(main, dev, å…¬å…±ç¥–å…ˆ)æ‰èƒ½å®Œæˆçš„åˆå¹¶æ“ä½œå°±å«åš three-way merge.</description></item><item><title>GNU äºŒè¿›åˆ¶å·¥å…·é›†</title><link>https://wangloo.github.io/posts/os/gnu_tools/</link><pubDate>Sat, 03 Dec 2022 19:08:22 +0800</pubDate><guid>https://wangloo.github.io/posts/os/gnu_tools/</guid><description>..
nm - åˆ—å‡ºç¬¦å· nm (GNU Binary Utilities) (sourceware.org)</description></item><item><title>Makefile ä¸€äº›æŠ€å·§</title><link>https://wangloo.github.io/posts/c/makefile_tricks/</link><pubDate>Sat, 03 Dec 2022 19:08:22 +0800</pubDate><guid>https://wangloo.github.io/posts/c/makefile_tricks/</guid><description>ææ€–çš„ç©ºæ ¼ Makefile ä¸­çš„å˜é‡ç»“åˆå¾ˆå¸¸è§ï¼Œä¾‹å¦‚$(FIXDEP)=$(FIXDEP_PATH)/build/fixdep.
ç‰¹åˆ«æ˜¯å½“æˆ‘ä»¬è¿™äº›è¯­å¥æ˜¯ä»æŸäº›åœ°æ–¹ç²˜è´´è¿‡æ¥ï¼Œè¦ç‰¹åˆ«æ³¨æ„å˜é‡ä¸­æ˜¯å¦æœ‰ç©ºæ ¼ï¼ŒMakefile éå¸¸é‡è§†è¿™ä¸ªã€‚å‡å¦‚$(FIXDEP_PATH)ä¸­æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œé‚£ä¹ˆ$(FIXDEP)å°±å˜æˆä¸¤ä¸ªå®äº†ï¼ˆä¸çŸ¥é“å«å®åˆä¸åˆé€‚ï¼‰ã€‚è€Œä¸” Make çš„æ‰§è¡Œè¿‡ç¨‹å¾ˆéš¾æ£€æŸ¥å‡ºæ¥ã€‚
è§„åˆ™çš„æ‰§è¡Œé¡ºåº å¦‚æœä¸ä»å‘½ä»¤è¡Œä¼ å…¥ç›®æ ‡, Makefile ä¸­å®šä¹‰çš„è§„åˆ™å…¶å®æ˜¯ä»¥ä»ä¸Šè€Œä¸‹çš„é¡ºåºæ‰§è¡Œçš„, ä½†æ˜¯æˆ‘ä¹ æƒ¯æŠŠ all è¿™ç§é»˜è®¤è§„åˆ™æ”¾åœ¨æœ€ä¸‹é¢, æ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¾ˆå¤š Makefile ä¼šåœ¨å¼€å¤´å†™ä¸€å¥è§„åˆ™all:, ä½œç”¨å°±æ˜¯å‘Šè¯‰ make é»˜è®¤(ä¸æ˜¾å¼æŒ‡å®š)çš„ç›®æ ‡æ˜¯all.
Busybox æ ¹ç›®å½• Makefile ä¸­çš„åšæ³•ç¤ºä¾‹
# That&amp;#39;s our default target when &amp;gt;none is given on the command line .PHONY: _all _all: ä½¿ç”¨ shell å˜é‡ Make å°† $$var è½¬ä¹‰ä¸º$var, ä¾› shell å¤„ç†.
demo(æºè‡ª 6.828 æ ¹ç›®å½•GNUmakefile):
handin-check: @if test -n &amp;#34;`git status -s`&amp;#34;; then \ git status -s; \ read -p &amp;#34;Untracked files will not be handed in.</description></item><item><title>Uboot: å¸¸ç”¨å‘½ä»¤</title><link>https://wangloo.github.io/posts/os/uboot/commands/</link><pubDate>Sun, 27 Nov 2022 22:03:48 +0800</pubDate><guid>https://wangloo.github.io/posts/os/uboot/commands/</guid><description>..
ç¯å¢ƒå˜é‡ç›¸å…³ å†…å­˜æ“ä½œ ç½‘ç»œæ“ä½œ EMMCå’ŒSDå¡ BOOTæ“ä½œæŒ‡ä»¤ bootm go å…¶ä»–å‘½ä»¤ å¯åŠ¨ç›¸å…³
md
mmcinfo
cp</description></item><item><title>vimæ’ä»¶YCM: å®‰è£…å’Œé…ç½®</title><link>https://wangloo.github.io/posts/vim/ycm-install/</link><pubDate>Sun, 27 Nov 2022 21:50:39 +0800</pubDate><guid>https://wangloo.github.io/posts/vim/ycm-install/</guid><description>YCM æ’ä»¶å¯¹ python, vimçš„ç‰ˆæœ¬å‡æœ‰è¦æ±‚
ä¸‹è½½ å¯ä»¥ä½¿ç”¨vim-plugç­‰å·¥å…·ä¸‹è½½, ä¹Ÿå¯ä»¥ä¸‹è½½æºç ç„¶åæ‹·è´åˆ°.vimç›®å½•ä¸‹
ç¼–è¯‘ ç¼–è¯‘ç”¨åˆ°python3, è¿™é‡Œæ˜¯é—®é¢˜æœ€å¤šçš„ä¸€æ­¥
# ç¼–è¯‘å¹¶æ·»åŠ å¯¹Cçš„æç¤ºæ”¯æŒ python3 install.py --clangd-completer --verbose Searching Python 3.8 libraries... ... Downloading Clangd from https://github.com/ycm-core/llvm/releases/download/13.0.0/clangd-13.0.0-x86_64-unknown-linux-gnu.tar.bz2... ä½¿ç”¨--clangd-completerå‚æ•°æ—¶, è„šæœ¬ä¼šå»ä¸‹è½½clangd-14.0.0-x86_64-unknown-linux-gnu.tar.bz2æ–‡ä»¶, æ¯”è¾ƒæ…¢. ä¹Ÿå¯ä»¥æå‰æ ¹æ®æç¤ºçš„ç½‘ç«™è‡ªå·±æ‰‹åŠ¨ä¸‹è½½å‹ç¼©åŒ….
ä¸‹è½½å®Œæˆå, æ”¾åˆ°æœ¬åœ°ç›®å½•ä¸‹:
:~/.vim/plugged/YouCompleteMe/third_party/ycmd/third_party/clangd/cache$ ls clangd-14.0.0-x86_64-unknown-linux-gnu.tar.bz2 è¿˜éœ€å¯¹è„šæœ¬YouCompleteMe/third_party/ycmd/build.pyè¿›è¡Œä¿®æ”¹, é˜²æ­¢é‡æ–°ä¸‹è½½.
def DownloadClangd( printer ): ... MakeCleanDirectory( CLANGD_OUTPUT_DIR ) if not p.exists( CLANGD_CACHE_DIR ): os.makedirs( CLANGD_CACHE_DIR ) # æ³¨é‡Šä¸‹é¢çš„è¯­å¥ # elif p.exists( file_name ) and not CheckFileIntegrity( file_name, check_sum ): # printer( &amp;#39;Cached Clangd archive does not match checksum.</description></item><item><title>å¸¸ç”¨çš„ shell å‘½ä»¤</title><link>https://wangloo.github.io/posts/shell/shell-commands/</link><pubDate>Sun, 27 Nov 2022 14:45:58 +0800</pubDate><guid>https://wangloo.github.io/posts/shell/shell-commands/</guid><description>æˆ‘ä½¿ç”¨çš„ shell æ˜¯ Bash
mount ç›¸å…³ mount è¾“å‡ºå½“å‰å·²ç»æŒ‚åœ¨çš„åˆ†åŒº
where and which which æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½®
$ which python3 /usr/bin/python3 whereis é™¤äº†å¯æ‰§è¡Œæ–‡ä»¶è¿˜èƒ½æœç´¢å…¶ä»–ç±»å‹çš„æ–‡ä»¶, ä¸å¸¸ç”¨, è¯¦è§ man whereis
- çš„å¦™ç”¨ ä¸€äº›å‘½ä»¤æ”¯æŒä½¿ç”¨ - ä»£æ›¿æ–‡ä»¶å, è¾“å…¥è¾“å‡ºéƒ½å¯ä»¥:
ä»£æ›¿æ ‡å‡†è¾“å‡º; ä¸€äº›å‘½ä»¤ä¼šå°†-o/-O åé¢çš„-åˆ¤å®šä¸ºè¾“å‡ºåˆ°STDOUT, è¯¦è§ä¸‹é¢ç¤ºä¾‹. ä»£æ›¿æ ‡å‡†è¾“å…¥; ä¸‹é¢ç»™å‡ºä¸¤ä¸ªåŒæ—¶ä»£æ›¿è¾“å…¥è¾“å‡ºçš„ä¾‹å­:
# å°†æ ‡å‡†è¾“å…¥(STDIN)çš„å†…å®¹ä½œä¸ºgccçš„è¾“å…¥, ç¼–è¯‘åçš„ç»“æœè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º(STDOUT) echo &amp;#39;void foo() {}&amp;#39; | gcc -x c -o - - # å°†ä¸‹è½½çš„æ–‡ä»¶è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º, åŒæ—¶ä½œä¸ºtarå‘½ä»¤çš„è¾“å…¥æ–‡ä»¶, è¿›è¡Œè§£å‹ wget -O - &amp;#34;https://www.dropbox.com/download?plat=lnx.x86_64&amp;#34; | tar xzf - - å¦‚ä½•è¢«è§£ææ˜¯å–å†³äºå‘½ä»¤çš„å®ç°, éæ ‡å‡†. æ¯”å¦‚ cd - å°±æœ‰ç‰¹æ®Šçš„å«ä¹‰</description></item><item><title>Cè¯­è¨€ 'inline' å…³é”®å­—</title><link>https://wangloo.github.io/posts/c/inline/</link><pubDate>Thu, 24 Nov 2022 01:35:24 +0800</pubDate><guid>https://wangloo.github.io/posts/c/inline/</guid><description>TODO: inline çš„å‘å±•å†ç¨‹: Myth and reality about inline in C99 â€“ Jens Gustedt&amp;rsquo;s Blog (wordpress.com)
GNU89: å‡½æ•°çš„å®ç°ä¹‹å‰æ·»åŠ ä¸åŒçš„å…³é”®å­—:
inline: è¡¨æ˜è¿™ä¸ªå‡½æ•°å¯èƒ½è¢«ä¼˜åŒ–. å¦‚æœæ²¡æœ‰è¢«ä¼˜åŒ–, ç¼–è¯‘å™¨å°±ä¼šè§†ä¸ºä¸€ä¸ªå¸¸è§„å‡½æ•°çš„å®šä¹‰.
extern inline: è¡¨æ˜è¿™ä¸ªå‡½æ•°å¯èƒ½è¢«ä¼˜åŒ–. å¦‚æœæ²¡æœ‰è¢«ä¼˜åŒ–, ç¼–è¯‘å™¨å°±å°†è¿™ä¸ªå‡½æ•°çš„å®šä¹‰è½¬æ¢ä¸ºè¯¥å‡½æ•°çš„å£°æ˜, å³ extern inline func(); å› æ­¤å½“æ­¤å‡½æ•°è¢«è°ƒç”¨æ—¶, å¯ä»¥è°ƒç”¨ä¸€ä¸ªå¤–éƒ¨çš„å‡½æ•°æ¥æ›¿ä»£. å¦‚æœæ²¡æœ‰å‡½æ•°è°ƒç”¨å®ƒ, é‚£ä¹ˆä¹Ÿå¯ä»¥æ²¡æœ‰å¤–éƒ¨çš„æ›¿ä»£å‡½æ•°å®ç°.
static inline: è¡¨æ˜è¿™ä¸ªå‡½æ•°å¯èƒ½è¢«ä¼˜åŒ–. å¦‚æœæ²¡æœ‰è¢«ä¼˜åŒ–, ç¼–è¯‘å™¨å°±ä¼šè§†ä¸ºä¸€ä¸ªå¸¸è§„é™æ€å‡½æ•°.
C99: å‡½æ•°çš„å®ç°ä¹‹å‰æ·»åŠ ä¸åŒçš„å…³é”®å­—:
inline: ç­‰æ•ˆäºgnu89ä¸­çš„extern inline extern inline: ç­‰æ•ˆäºgnu89ä¸­çš„inline static inline: ä¸gnu89ç›¸åŒå«ä¹‰. C++: åªæœ‰inlineä¸€ä¸ªå…³é”®å­—, å¦‚æœä¸èƒ½ä¼˜åŒ–å°±å®šä¹‰ä¸ºæ™®é€šå‡½æ•°
Ref:
c++ - What does extern inline do?</description></item><item><title>Cè¯­è¨€å·¥å…·å®</title><link>https://wangloo.github.io/posts/c/c-macros/</link><pubDate>Thu, 24 Nov 2022 01:35:24 +0800</pubDate><guid>https://wangloo.github.io/posts/c/c-macros/</guid><description>è®¡ç®—æ•°ç»„å…ƒç´ çš„ä¸ªæ•° #define nelem(array) sizeof(array)/sizeof(array[0])</description></item><item><title>x86/ARMv8 å‡½æ•°è°ƒç”¨çº¦å®š</title><link>https://wangloo.github.io/posts/os/function-call-conventions/</link><pubDate>Mon, 21 Nov 2022 10:30:35 +0800</pubDate><guid>https://wangloo.github.io/posts/os/function-call-conventions/</guid><description>ç¬¦åˆè°ƒç”¨çº¦å®šä½¿å¾—è°ƒç”¨å‡½æ•°èƒ½å¤Ÿæ­£å¸¸è·å–å‚æ•°, calleeç»“æŸä¹‹åèƒ½å¤Ÿå›åˆ°åŸæ¥ä½ç½®ç»§ç»­æ‰§è¡Œ.
X86 è°ƒç”¨çº¦å®š å‡½æ•°è°ƒç”¨ x86æ¶æ„ä¸­, å‡½æ•°è°ƒç”¨ä»¥ä¸€æ¡callæŒ‡ä»¤ä¸ºåˆ†ç•Œ.
åœ¨callæŒ‡ä»¤æ‰§è¡Œä¹‹å‰, æ‰€æœ‰çš„å‚æ•°å¿…é¡»éƒ½èººåœ¨æ ˆä¸­, å‚æ•°å…¥æ ˆçš„è§„åˆ™æ˜¯: ç¬¬ä¸€ä¸ªå‚æ•°æœ€åå…¥æ ˆ.
å¦å¤–, æ‰§è¡ŒcallæŒ‡ä»¤ä¹‹å‰, å¿…é¡»ç¡®ä¿æ ˆæŒ‡é’ˆespæ˜¯16-byteå¯¹é½. è¿™é¡¹å·¥ä½œæ˜¯ç¼–è¯‘å™¨å®Œæˆçš„, å¦‚æœå®ƒåˆ¤æ–­å‚æ•°å…¥æ ˆä¹‹åçš„esp ä¸æ»¡è¶³å¯¹é½æ¡ä»¶, åˆ™ä¼šæ‰‹åŠ¨è°ƒæ•´espä½¿ä¹‹å¯¹é½. å®ç°æ–¹å¼è§ä¸‹é¢ä¾‹å­.
call æŒ‡ä»¤çš„è¯­ä¹‰æ˜¯:
push pc+1 ;push next insttuction mov pc, func ;set pc = new function call æŒ‡ä»¤ä¹‹åçš„ä¸‹ä¸€æ¡æŒ‡ä»¤å°±æ˜¯calleeçš„å†…å®¹äº†, è‡³æ­¤å°±ç®—æ˜¯è¿›å…¥æ–°å‡½æ•°çš„åœ°ç›˜.
ä½†æ˜¯åœ¨æ‰§è¡Œæ–°çš„ä»»åŠ¡ä¹‹å‰, calleeè¿˜éœ€è¦å®Œæˆæ ˆçš„è½¬æ¢, å› ä¸ºæ­¤æ—¶ä½¿ç”¨çš„æ ˆè¿˜æ˜¯callerçš„.
push ebp ;preserve location of caller&amp;#39;s stack mov ebp, esp ;new ebp is old esp æ­¤æ—¶espä¹Ÿå°±æ˜¯æ ˆæŒ‡é’ˆç­‰äºebp, è¿™æ˜¯calleeæ ˆçš„åˆå§‹æ¡ä»¶. ä¸‡äº‹ä¿±å¤‡, å¯ä»¥å¼€å§‹æ‰§è¡Œcalleeçš„å®é™…ä»»åŠ¡äº†.
ebpåœ¨æ•´ä¸ªå‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­æ˜¯å›ºå®šçš„, å¥½å¤„æ˜¯: èƒ½å¤Ÿå¿«é€Ÿçš„æˆ–è€…å‡½æ•°å‚æ•°, è¿”å›åœ°å€.
å‡½æ•°è¿”å› calleeæ‰§è¡Œå®Œæ¯•å, éœ€è¦è¿”å›åˆ°callerç»§ç»­æ‰§è¡Œ. åˆšæ‰è¯´è¿‡, calleeçš„è¿”å›åœ°å€åœ¨æ ˆä¸­, æ‰€ä»¥æˆ‘ä»¬è¦åšçš„æ˜¯æ‰¾åˆ°è¿”å›åœ°å€æ‰€åœ¨çš„ä½ç½®, ç„¶åä½¿pc = è¿”å›åœ°å€.</description></item><item><title>äºŒçº§æŒ‡é’ˆæ“ä½œé“¾è¡¨</title><link>https://wangloo.github.io/posts/c/pointers-pointers-list/</link><pubDate>Sun, 20 Nov 2022 23:40:30 +0800</pubDate><guid>https://wangloo.github.io/posts/c/pointers-pointers-list/</guid><description>é—®é¢˜æºäºæˆ‘åœ¨çŸ¥ä¹åˆ·åˆ°çš„ä¸€ä¸ªå›ç­”: èƒ½åˆ†äº«ä½ CæŒ‡é’ˆç”¨å¾—æœ€çµæ´»ï¼ˆé£˜ï¼‰çš„ä¸€æ¬¡å—?
æ–‡ä¸­æåˆ°äº†Linuså…³äºæ— å¤´èŠ‚ç‚¹å•é¡¹é“¾è¡¨çš„åˆ é™¤æ“ä½œç»™å‡ºçš„ä¸€ç§æ–°çš„æ€è·¯, æˆ‘è§‰å¾—å¯¹ç†è§£æŒ‡é’ˆéå¸¸æœ‰å¸®åŠ©, æ‰€ä»¥åœ¨è¿™é‡Œè¯¦ç»†æè¿°ä¸€ä¸‹è¿™ä»¶äº‹.
ä»æˆ‘å­¦ä¹ æ•°æ®ç»“æ„èµ·, å¯¹ä¸å«å¤´èŠ‚ç‚¹çš„å•å‘é“¾è¡¨çš„åˆ é™¤æ“ä½œ, åšæ³•å¸¸æ˜¯: å€Ÿç”¨preæŒ‡é’ˆæœç´¢. è¿™ç§æƒ…å†µä¸‹é¿å…ä¸äº†å¯¹äºé“¾è¡¨ä¸­ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„ç‰¹åˆ¤(ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ²¡æœ‰pre).
Linusæåˆ°äº†ä¸€ç§å€ŸåŠ©äºŒçº§æŒ‡é’ˆé¿å…è¯¥åˆ†æ”¯çš„æ–¹æ³•.
void remove_if(node ** head, remove_fn rm) { for (node** curr = head; *curr; ) { node * entry = *curr; if (rm(entry)) { *curr = entry-&amp;gt;next; free(entry); } else curr = &amp;amp;entry-&amp;gt;next; } } æŒ‡é’ˆçš„å†…å®¹å°±æ˜¯åœ°å€, int *p = a ä¹Ÿå°±æ„å‘³ç€å˜é‡p ä¸­ä¿å­˜ç€å˜é‡açš„åœ°å€. æ‰€ä»¥å‚æ•°headåœ¨å†…å­˜ä¸­çš„å«ä¹‰ä¸º:
å‡å¦‚è¦åˆ é™¤node2, é‚£ä¹ˆæ”¹å˜*currå®é™…ä¸Šå°±æ˜¯æ”¹äº†node1çš„nextæˆå‘˜.</description></item><item><title>å¤§å°ç«¯é—®é¢˜</title><link>https://wangloo.github.io/posts/os/big-little-endian/</link><pubDate>Thu, 17 Nov 2022 10:30:35 +0800</pubDate><guid>https://wangloo.github.io/posts/os/big-little-endian/</guid><description>å¤§å°ç«¯é—®é¢˜çš„ç”±æ¥ ä¸ºä»€ä¹ˆè®¡ç®—æœºä¸–ç•Œéœ€è¦åŒºåˆ†å¤§å°ç«¯? å†…å­˜é‡Œå­˜å–çš„å•ä½æ˜¯å­—èŠ‚, å¦‚æœæ‰€æœ‰çš„æ•°æ®ç±»å‹é•¿åº¦éƒ½æ˜¯ä¸€ä¸ªå­—èŠ‚, é‚£å°±å®Œå…¨ä¸éœ€è¦å¤§å°ç«¯äº†, æ¯ä¸ªå˜é‡éƒ½ä»…å æ®å•ç‹¬ä¸€ä¸ªå­—èŠ‚.
ä¾‹å¦‚, ä¸‰ä¸ªå˜é‡ a=10, b=20, c=30, åœ¨å†…å­˜ä¸­çš„å¸ƒå±€å¯èƒ½å°±æ˜¯:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ 10 â”‚ a â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ 20 â”‚ b â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ 30 â”‚ c â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ä½†æ˜¯æˆ‘ä»¬æœ€å¸¸ä½¿ç”¨çš„æ•°æ®ç±»å‹è‚¯å®šæœ‰è¶…è¿‡ä¸€ä¸ªå­—èŠ‚çš„, intç±»å‹åœ¨64ä½çš„ç³»ç»Ÿä¸­å°±å 4ä¸ªå­—èŠ‚. ä¾‹å¦‚å˜é‡a=0xaabbccdd
ä¸€ä¸ªå˜é‡çš„å¤§å°ä¸€æ—¦è¶…è¿‡4ä¸ªå­—èŠ‚, å†…å­˜çš„å­˜å–åˆæ˜¯ä»¥å­—èŠ‚ä½å•ä½çš„, é‚£ä¹ˆè¦æŠŠå®ƒå¡åˆ°å†…å­˜é‡Œå°±å¿…ç„¶ä¼šäº§ç”Ÿä¸¤ç§ä¸åŒå­˜æ”¾æ–¹å¼: å…ˆæ”¾0xaaè¿˜æ˜¯å…ˆæ”¾0xdd
é¦–å…ˆ, 0xddæ˜¯å˜é‡açš„ä½8ä½, 0xaaæ˜¯æœ€é«˜8ä½, è¿™æ˜¯ç¡®å®šçš„.
å¦‚æœå…ˆæ”¾0xaa, å³ä½åœ°å€æ”¾é«˜ä½, å°±å«åšå¤§ç«¯, å¦‚å·¦å›¾;
å¦‚æœå…ˆæ”¾0xdd, å³ä½åœ°å€æ”¾ä½ä½, å°±å«å°ç«¯, å¦‚å³å›¾.</description></item><item><title>æ“ä½œç³»ç»Ÿâ€”â€”ä¸Šä¸‹æ–‡åˆ‡æ¢</title><link>https://wangloo.github.io/posts/os/context/</link><pubDate>Mon, 14 Nov 2022 22:13:06 +0800</pubDate><guid>https://wangloo.github.io/posts/os/context/</guid><description>æœ¬æ–‡åŸºäºAArch64æ‰§è¡Œç¯å¢ƒ, ä»‹ç»ç°ä»£æ“ä½œç³»ç»Ÿä¸­ä¸Šä¸‹æ–‡åˆ‡æ¢çš„ç›¸å…³å†…å®¹.
ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡ï¼Ÿ ä¸Šä¸‹æ–‡åˆç§°â€œç°åœºâ€,
ä¸ºä»€ä¹ˆéœ€è¦ä¸Šä¸‹æ–‡åˆ‡æ¢? (TODO: ä¸ºä»€ä¹ˆè¯´çº¿ç¨‹æ˜¯è°ƒåº¦çš„å•ä½?)
ç°ä»£æ“ä½œç³»ç»Ÿä¸­åŒæ—¶å­˜åœ¨ç€æˆåƒä¸Šç™¾ä¸ªçº¿ç¨‹, ä½†æ˜¯ä¸€ä¸ªCPUåŒä¸€æ—¶åˆ»åªèƒ½è¿è¡Œä¸€ä¸ªçº¿ç¨‹, ä»–ä»¬æ˜¯è½®æµçš„å ç”¨CPU, ä¹Ÿå«å¹¶å‘æ‰§è¡Œ. (TODO: å¦‚ä½•æŸ¥çœ‹çº¿ç¨‹åˆ‡æ¢çš„é—´éš”?) çº¿ç¨‹é«˜é¢‘ç‡çš„åˆ‡æ¢, æ“ä½œç³»ç»Ÿæ˜¯å¦‚ä½•ä¿è¯åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæ‰§è¡Œçš„çº¿ç¨‹æ—¶, å®ƒèƒ½å¤Ÿç»§ç»­ä¸Šæ¬¡çš„å·¥ä½œå‘¢?
ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡? æˆ‘ä»¬æ­£åœ¨çœ‹ä¸€æœ¬ä¹¦çš„æ—¶å€™å¦‚æœè¢«å…¶ä»–çš„äº‹æƒ…æ‰“æ–­, è¿”å›æ—¶ä¸ºäº†èƒ½å¤Ÿä»ä¸Šæ¬¡è¢«æ‰“æ–­çš„ä½ç½®ç»§ç»­è¯», å°±è¦åœ¨è¢«æ‰“æ–­çš„æ—¶å€™è®°ä¸‹æ¥å½“å‰æ˜¯è¯»åˆ°äº†å“ªä¸ªç¬¬å‡ é¡µçš„ç¬¬å‡ è¡Œ.
æ“ä½œç³»ç»Ÿå¯¹å¾…çº¿ç¨‹ä¹Ÿæ˜¯å¦‚æ­¤, éœ€è¦ä¿å­˜çš„ç”¨äºæ¢å¤çº¿ç¨‹æ‰§è¡Œçš„ä¿¡æ¯å°±ç§°ä¸ºçº¿ç¨‹çš„ä¸Šä¸‹æ–‡.
é‚£ä¹ˆå¯¹äºçº¿ç¨‹æ¥è¯´éœ€è¦è®°ä¸‹çš„å†…å®¹æœ‰ä»€ä¹ˆå‘¢? å¯„å­˜å™¨å’Œæ ˆå³å¯. æ‹¿AArch64æ¶æ„æ¥è·ç¦», çº¿ç¨‹çš„ä¸Šä¸‹æ–‡å°±æ˜¯:
é€šç”¨å¯„å­˜å™¨x0-x29: å‡½æ•°è°ƒç”¨çš„å‚æ•°, æŸäº›è®¡ç®—è¿‡ç¨‹çš„ä¸­é—´å€¼, éƒ½è¦ç”¨åˆ°è¿™äº›å¯„å­˜å™¨. çº¿ç¨‹çš„æ‰§è¡Œæµå¯èƒ½åœ¨ä»»ä½•æ—¶å€™è¢«æ‰“æ–­, å½“ç„¶è¿™äº›å†…å®¹ä¹Ÿä¸èƒ½ä¸¢. é€šç”¨å¯„å­˜å™¨lr(x30): lr ä¿å­˜ç€è¿”å›åœ°å€, å³å½“å‰å‡½æ•°ç»“æŸä¹‹åè¯¥è¿”å›åˆ°å“ªæ‰§è¡Œ. æ ˆé¡¶æŒ‡é’ˆ sp: æ ˆçš„é‡è¦æ€§æ— éœ€å¤šè¨€. ä½†æ˜¯éœ€è¦è¯´æ˜çš„æ˜¯æˆ‘ä»¬ä¿å­˜æ ˆçš„æ–¹å¼å¹¶éå°†æ ˆä¸­çš„æ‰€æœ‰å†…å®¹ä¿å­˜, è€Œæ˜¯ä¿å­˜æ ˆçš„ä½ç½®å³å¯. å› ä¸ºæ“ä½œç³»ç»Ÿæœ‰åˆ«çš„æœºåˆ¶(TODO), èƒ½å¤Ÿä¿è¯å³ä¾¿çº¿ç¨‹ä¸åœ¨æ‰§è¡Œ, å±äºè¯¥çº¿ç¨‹çš„æ ˆä¹Ÿä¸ä¼šè¢«ç ´å. ç¨‹åºè®¡æ•°å™¨ pc: è¢«æ‰“æ–­çš„çº¿ç¨‹å¦‚æœå†æ¬¡æ‰§è¡Œ, ä»å“ªé‡Œæ‰§è¡Œå‘¢? æ˜¾ç„¶æ˜¯è¢«æ‰“æ–­æŒ‡ä»¤çš„ä¸‹ä¸€æ¡(æˆ–è€…é‡æ–°æ‰§è¡Œå½“å‰). è¿™ä¸ªæŒ‡ä»¤çš„åœ°å€å½“ç„¶ä¹Ÿéœ€è¦è¢«ä¿å­˜å¥½. PSTATE: æƒ³ä¸€ä¸‹, æœ‰äº†ä»¥ä¸Šçš„å†…å®¹å°±èƒ½å¤Ÿä¿è¯çº¿ç¨‹å®Œæ•´çš„æ¢å¤ä¹‹å‰çš„ç¯å¢ƒå—? å…¶ä»–çš„ä¾‹å¦‚ä¸­æ–­æ˜¯å¼€è¿˜æ˜¯å…³, æœ‰å“ªäº›æ ‡å¿—ä½(NZCV)è¢«è®¾ç½®äº†. è¿™äº›ä¿¡æ¯åœ¨AArch64ä¸­æ˜¯ä¿å­˜åœ¨PSTATEçš„å„ä¸ªå­—æ®µä¸­. å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæœ‰ä¸€ä¸ªé€‚å½“çš„é€»è¾‘, åœ¨çº¿ç¨‹åˆ‡æ¢å‡ºå»çš„æ—¶å€™å°†ä¸Šä¸‹æ–‡ä¿å­˜èµ·æ¥, ç„¶åæ¢å¤æ–°çº¿ç¨‹çš„ä¸Šä¸‹æ–‡, æ˜¯ä¸æ˜¯çº¿ç¨‹åˆ‡æ¢è¿™ä»¶äº‹å°±èƒ½åšåˆ°äº†. å¦‚ä½•ç»„ç»‡è¿™ä¸ªä¿å­˜å’Œæ¢å¤çš„è¿‡ç¨‹åœ¨ä¸‹é¢ä¼šä»‹ç»åˆ°.
Linux å¦‚ä½•å¤„ç†ä¸Šä¸‹æ–‡åˆ‡æ¢ å¦ä¸€ç§å¤„ç†ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ€è·¯ åç¨‹çš„ä¸Šä¸‹æ–‡ åç¨‹æ˜¯ç”¨æˆ·çº§åˆ«çš„çº¿ç¨‹,
åç¨‹ä¹‹é—´çš„åˆ‡æ¢ä¸è¿›å…¥å†…æ ¸ åˆ‡æ¢åç¨‹åªèƒ½æ˜¯æŸä¸ªåç¨‹ä¸»åŠ¨æ”¾å¼ƒæ§åˆ¶æƒ æˆ‘ä»¬åœ¨è¿™é‡Œè®¨è®ºä¸€ä¸‹åç¨‹åˆ‡æ¢æ—¶éœ€è¦ä¿å­˜çš„ä¸Šä¸‹æ–‡æ˜¯å¦ä¸çº¿ç¨‹æœ‰æ‰€ä¸åŒ.</description></item><item><title>åŸºäºARM64å®ç°setjmp/longjmp</title><link>https://wangloo.github.io/posts/c/setjmp_and_longjmp/</link><pubDate>Tue, 01 Nov 2022 23:38:54 +0800</pubDate><guid>https://wangloo.github.io/posts/c/setjmp_and_longjmp/</guid><description>ä»‹ç» setjmp() and longjmp() æ˜¯ä¸€å¯¹ç»„åˆä½¿ç”¨çš„å‡½æ•°, å¯ä»¥å®ç°å…¨å±€çš„goto.
setjmp() æ„é€ ä¸€ä¸ªè¿è¡Œç¯å¢ƒ, è°ƒç”¨longjmp() åˆ™å°†æ‰§è¡Œæµåˆ‡æ¢åˆ°è¯¥ç¯å¢ƒ.
/* setjmp() ä¿å­˜å½“å‰çš„è¿è¡Œç¯å¢ƒ(ä¸Šä¸‹æ–‡)åˆ° env å‚æ•°ä¸­ */ int setjmp(jmp_buf env); /* longjmp() å°†æ§åˆ¶æµåˆ‡æ¢åˆ° env æŒ‡å®šçš„è¿è¡Œç¯å¢ƒ */ void longjmp(jmp_buf env, int val); ä½¿ç”¨æ–¹æ³• #include &amp;lt;setjmp.h&amp;gt;#include &amp;lt;stdio.h&amp;gt; jmp_buf e; void foo() { longjmp(e, 1); } int main(void) { int ret; /* After calling longjmp(), the execution flow back to setjmp(), and setjmp() will return not 0. */ ret = setjmp(e); if (ret == 0) { printf(&amp;#34;Return from setjmp\n&amp;#34;); foo(); } else { printf(&amp;#34;Return from longjmp\n&amp;#34;); } return 0; } åŸºäº AArch64 çš„å®ç° éœ€è¦ä¿å­˜çš„ä¸Šä¸‹æ–‡åŒ…æ‹¬</description></item><item><title>Armv8 Kernel Monitor</title><link>https://wangloo.github.io/posts/os/monitor/</link><pubDate>Fri, 28 Oct 2022 22:56:19 +0800</pubDate><guid>https://wangloo.github.io/posts/os/monitor/</guid><description>Kernel Monitor æ˜¯ä»€ä¹ˆ Kernel Monitor æ˜¯ä¸€ä¸ªé€‚é…æˆ‘ä»¬å¾®å†…æ ¸æ“ä½œç³»ç»Ÿçš„ Kernel è°ƒè¯•å’Œç›‘æ§ç³»ç»Ÿ. å®ƒèƒ½å®ç°å†…æ ¸çš„åŠ¨æ€è°ƒè¯•å’Œç›‘æ§. åŒæ—¶, å®ƒè¿˜æ¥ç®¡å†…æ ¸çš„åŒæ­¥å¼‚å¸¸å’Œç³»ç»Ÿé”™è¯¯, ä½¿å¼€å‘è€…èƒ½å¤Ÿäº†è§£å‘ç”Ÿå¼‚å¸¸æ—¶ç³»ç»Ÿçš„çŠ¶æ€.
Kernel Monitor å…·æœ‰ä¸€å®šçš„å¯æ‰©å±•æ€§, ä¾‹å¦‚é€šè¿‡ç»Ÿè®¡å†…æ ¸ä¸­å­˜å‚¨çš„ TCB æ¥å®æ—¶ç›‘æ§ç³»ç»Ÿä¸­æ‰€æœ‰çº¿ç¨‹çš„çŠ¶æ€. å¯æ ¹æ®å¼€å‘è€…çš„éœ€æ±‚æ·»åŠ ç»Ÿè®¡çš„å¯¹è±¡, å¦‚ Endpoint, Capabilityç­‰.
Â Kernel Monitor æ€»ä½“è®¾è®¡ Kernel Monitor ç³»ç»ŸåŒ…å« Clinet å’Œ Server ä¸¤ä¸ªéƒ¨åˆ†. ç®€å•æ¥è¯´, Client è´Ÿè´£å¤„ç†ç”¨æˆ·è¾“å…¥, å¹¶å°†è¾“å…¥è¿›è¡Œè§£æ, å°è£…ä¸º ä¸€ç³»åˆ—åŸºç¡€å‘½ä»¤. å‘é€ç»™ Server. Server è´Ÿè´£æ‰§è¡Œè¿™äº› åŸºç¡€çš„å‘½ä»¤, å¦‚è®¾ç½®æ–­ç‚¹, æŸ¥çœ‹æŸä¸ªåœ°å€çš„å€¼ç­‰.
æ•´ä¸ªç³»ç»Ÿæœ‰ä¸¤ç§æ¶æ„: æœ¬åœ° Monitor å’Œè¿œç¨‹ Monitor.
æœ¬åœ°monitor å’Œè¿œç¨‹ monitor çš„åŒºåˆ«æ˜¯: Monitor Client çš„ä½ç½®åœ¨å“ª, æ˜¯å¦ä¸ Server åœ¨åŒä¸€ä¸ªæœºå™¨ä¸Š.
å…ˆè¯´ Monitor Server, å®ƒå¿…é¡»åµŒå…¥è¦è°ƒè¯•çš„ Kernel ä¸­, ä½äºä¸€ä¸ªåœ°å€ç©ºé—´, æ–¹ä¾¿æ“ä½œ Kernel çš„å†…å­˜.</description></item><item><title>ARMv8-A MMUä»‹ç»</title><link>https://wangloo.github.io/posts/armv8/mmu/</link><pubDate>Thu, 29 Sep 2022 08:01:33 +0800</pubDate><guid>https://wangloo.github.io/posts/armv8/mmu/</guid><description>Introduction MMU: ä¸“ç”¨äºå°†è™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€. é€šå¸¸é…åˆåˆ†é¡µæœºåˆ¶æ¥å·¥ä½œ.
é¡µè¡¨: é¡µè¡¨ä¸­çš„è¡¨é¡¹åŒ…å«æä¾›è™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€ä¹‹é—´çš„æ˜ å°„.
MMUå°±æ˜¯ç›´æ¥è®¿é—®é¡µè¡¨, å¹¶ä¸”é€šè¿‡å°†é¢‘ç¹ä½¿ç”¨çš„æ˜ å°„ç¼“å­˜åˆ°TLBä¸­.
MMU çš„ç»“æ„ MMUæ˜¯ä¸€ç§ç¡¬ä»¶, å¯ä»¥é€šè¿‡åœ¨é€‚å½“çš„å®‰å…¨çŠ¶æ€ä¸‹å¯¹å…¶è¿›è¡Œé…ç½®. æ¯ä¸ªCoreéƒ½æœ‰è‡ªå·±çš„MMU, æ¯ä¸ªMMUåŒ…æ‹¬:
ä¸€ä¸ªTLB, ç¼“å­˜æœ€è¿‘è®¿é—®çš„æ˜ å°„. ä¸€ä¸ªTable Walk Unit, ä»å†…å­˜ä¸­æŸ¥è¯¢é¡µè¡¨, å¾—åˆ°æœ€ç»ˆçš„è™šæ‹Ÿåœ°å€-ç‰©ç†åœ°å€çš„æ˜ å°„. MMU æ§åˆ¶ç€æ•´ä¸ªç³»ç»Ÿçš„ç¼“å­˜ç­–ç•¥, å†…å­˜å±æ€§å’Œè®¿é—®æƒé™. MMUå¼€å¯å, è½¯ä»¶å‘å‡ºçš„æ‰€æœ‰å†…å­˜è®¿é—®éƒ½ä½¿ç”¨è™šæ‹Ÿåœ°å€, è¦æ±‚MMUä¸ºæ¯æ¬¡è®¿é—®è¿›è¡Œåœ°å€è½¬æ¢.
MMU çš„é…ç½® åœ¨å¯ç”¨MMUå‰, å¿…é¡»å‘ŠçŸ¥å…¶é¡µè¡¨å­˜æ”¾çš„ä½ç½®.
MMU åœ°å€è½¬æ¢çš„è¿‡ç¨‹ å¯¹äºæ¯ä¸ªè½¬æ¢è¯·æ±‚, MMUé¦–å…ˆæ£€æŸ¥TLBæ˜¯å¦å·²ç»å¯¹è¯¥åœ°å€ç¼“å­˜, å¦‚æœè¯¥åœ°å€æœªç¼“å­˜, åˆ™éœ€è¦éå†é¡µè¡¨.
é¡µè¡¨éå†å•å…ƒåœ¨é¡µè¡¨ä¸­æœç´¢ç›¸å…³çš„æ˜ å°„è¡¨é¡¹.
ä¸€æ—¦æ‰¾åˆ°æ˜ å°„, MMUå°±ä¼šæ£€æŸ¥æƒé™å’Œå±æ€§. å†³å®šå…è®¸æœ¬æ¬¡è®¿é—®, æˆ–è€…å‘å‡ºæ•…éšœä¿¡å·. è‹¥æœªæ‰¾åˆ°æ˜ å°„, åˆ™è§¦å‘ç¼ºé¡µå¼‚å¸¸. é¡µè¡¨çš„å·¥ä½œåŸç† é¡µè¡¨çš„å·¥ä½œæ–¹å¼æ˜¯å°†è™šæ‹Ÿåœ°å€ç©ºé—´å’Œç‰©ç†åœ°å€ç©ºé—´åˆ’åˆ†ä¸ºå¤§å°ç›¸ç­‰çš„å—, ç§°ä¸ºé¡µé¢.
é¡µè¡¨ä¸­çš„æ¯ä¸ªè¡¨é¡¹å¯¹åº”ç€ä¸€å—è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­çš„å—, è¡¨é¡¹çš„å€¼å°±æ˜¯è¿™å—è™šæ‹Ÿåœ°å€ç©ºé—´å¯¹åº”çš„ç‰©ç†åœ°å€å—, ä»¥åŠè®¿é—®ç‰©ç†åœ°å€æ—¶è¦ä½¿ç”¨çš„å±æ€§.
åœ¨æŸ¥è¡¨è¿‡ç¨‹ä¸­, å°†è™šæ‹Ÿåœ°å€åˆ†ä¸ºä¸¤éƒ¨åˆ†:
é«˜é˜¶ä½ç”¨ä½œé¡µè¡¨çš„ç´¢å¼•. ç”¨æ¥æ‰¾åˆ°å¯¹åº”çš„ç‰©ç†å— ä½åœ°å€æ˜¯å—å†…çš„åç§»é‡, ä¸ä¼šå› ä¸ºæ˜ å°„è€Œæ”¹å˜. é¡µè¡¨é¡¹ä¸­çš„ç‰©ç†åœ°å€ä¸è¯¥åç§»ç»„åˆå½¢æˆç”¨äºè®¿é—®å†…å­˜çš„ç‰©ç†åœ°å€. å¤šçº§é¡µè¡¨ å®é™…å®ç°ä¸­, å¤šé‡‡ç”¨å¤šçº§é¡µè¡¨çš„æ–¹æ¡ˆ, å„çº§é¡µè¡¨è‡ªå®šå‘ä¸‹ç»„æˆæ ‘çš„å½¢å¼, åä½œå®ç°è™šæ‹Ÿåˆ°ç‰©ç†åœ°å€çš„è½¬æ¢.
æ ‘ä¸­çš„åˆ†æ”¯æˆä¸ºé¡µç›®å½•, é¡µç›®å½•ä¸­çš„è¡¨é¡¹ä¸æ˜¯ç›´æ¥å­˜å‚¨ç›®æ ‡ç‰©ç†åœ°å€, è€Œæ˜¯ä¸‹ä¸€çº§é¡µè¡¨çš„åœ°å€; æœ€åä¸€çº§é¡µè¡¨çš„è¡¨é¡¹ä¸­ä¿å­˜ç€ç›®æ ‡ç‰©ç†åœ°å€.</description></item><item><title>AArch64/32 å¼‚å¸¸è¿”å›è¿‡ç¨‹</title><link>https://wangloo.github.io/posts/armv8/exception_return/</link><pubDate>Sat, 24 Sep 2022 21:19:01 +0800</pubDate><guid>https://wangloo.github.io/posts/armv8/exception_return/</guid><description>ARMv8 å¼‚å¸¸è¿”å›æŒ‡ä»¤ å½“å¼‚å¸¸å¤„ç†ç¨‹åºç»“æŸåï¼Œéœ€è¦æ‰§è¡Œå¼‚å¸¸è¿”å›æŒ‡ä»¤æ¢å¤è¿›å…¥å¼‚å¸¸ä¹‹å‰çš„çŠ¶æ€.
å…·ä½“è¦åšçš„äº‹æƒ…åŒ…æ‹¬:
æ¢å¤å‘ç”Ÿå¼‚å¸¸å‰çš„PC
ä»SPSRä¸­æ¢å¤PSTATEå¯„å­˜å™¨(ç°åœº)
å¼‚å¸¸è¿”å›çš„æŒ‡ä»¤æ ¹æ®å½“å‰æ‰§è¡ŒçŠ¶æ€ä¸ºAArch32è¿˜æ˜¯AArch64æœ‰æ‰€ä¸åŒ.
AArch32 AArch32çš„å¼‚å¸¸è¿”å›æŒ‡ä»¤åœ¨ä¸åŒçš„æ¨¡å¼ä¸‹ä¹Ÿæœ‰æ‰€ä¸åŒ:
è‹¥å¼‚å¸¸æ˜¯åœ¨Hypæ¨¡å¼ä¸‹å¤„ç†: ä»…å¯æ‰§è¡ŒERETæŒ‡ä»¤ä»å¼‚å¸¸è¿”å›.
è‹¥å¼‚å¸¸æ˜¯åœ¨å…¶ä»–æ¨¡å¼ä¸‹å¤„ç†, AArch32æä¾›äº†ä»¥ä¸‹çš„å¼‚å¸¸è¿”å›æŒ‡ä»¤:
ERET æŒ‡ä»¤
ä½¿ç”¨å¸¦Såç¼€çš„æ•°æ®å¤„ç†æŒ‡ä»¤ç›´æ¥æ“ä½œPC(ä¾‹å¦‚, MOVS, PC, LR), æ¢å¤PSTATE
RFE æŒ‡ä»¤: RFE &amp;lt;Rn&amp;gt;. ä»åŸºå€å¯„å­˜å™¨æŒ‡å‘çš„åœ°å€ä¾æ¬¡åŠ è½½PCå’ŒPSTATE
LDM æŒ‡ä»¤: LDM &amp;lt;Rn&amp;gt; {pc..}. è‹¥ç›®æ ‡å¯„å­˜å™¨ä¸­åŒ…å«PC, åˆ™ä¼šåŒæ—¶æ¢å¤PSTATE
AArch64 AArch64ä¸‹ç»Ÿä¸€ä½¿ç”¨ ERET æŒ‡ä»¤è¿›è¡Œå¼‚å¸¸è¿”å›.
æŒ‡ä»¤æ ¼å¼åŠç”¨æ³•å‚è€ƒ ERET ERETæŒ‡ä»¤å®Œæˆäº†:
ä»ELR_ELxä¸­æ¢å¤PCæŒ‡é’ˆ
ä»SPSR_ELxä¸­æ¢å¤PSTATEå¯„å­˜å™¨çš„çŠ¶æ€.
LDM(Load Multiple) æ ¼å¼: LDM &amp;lt;Rn&amp;gt; {registers}
å«ä¹‰: ä»åŸºå€å¯„å­˜å™¨&amp;lt;Rn&amp;gt;æŒ‡å‘çš„åœ°å€å¼€å§‹ä¾æ¬¡åŠ è½½å¤šä¸ªå¯„å­˜å™¨å€¼.</description></item><item><title>GNU Cå†…è”æ±‡ç¼–å­¦ä¹ ç¬”è®°</title><link>https://wangloo.github.io/posts/c/inline-asm/</link><pubDate>Sat, 24 Sep 2022 16:48:58 +0800</pubDate><guid>https://wangloo.github.io/posts/c/inline-asm/</guid><description>è¯­å¥ç»“æ„ asm asm-qualifiers ( AssemblerTemplate : OutputOperands : InputOperands : Clobbers : GotoLabels) The asm keyword is a GNU extension. å½“ä½¿ç”¨ç¼–è¯‘é€‰é¡¹ -ansi æˆ– -std æ—¶, ä½¿ç”¨ __asm__ä»£æ›¿ asm.
Qualifiers volatile: é¿å…ç¼–è¯‘å™¨çš„è¿‡åˆ†ä¼˜åŒ– goto inline Parameters AssemblerTemplate: å­—ç¬¦ä¸², æ±‡ç¼–ä»£ç çš„æ¨¡æ¿
OutputOperands: è¾“å‡ºæ“ä½œæ•°; æŒ‡ä»¤å°†ä¼šä¿®æ”¹çš„å˜é‡é›†åˆ
InputOperands: è¾“å…¥æ“ä½œæ•°; æŒ‡ä»¤å°†è¯»å–çš„å˜é‡é›†åˆ
Clobbers: ???TODO
GotoLabels: ä»…å½“ qualifiers ä½¿ç”¨gotoæ—¶, å£°æ˜labelé›†åˆ.
The total number of input + output + goto operands is limited to 30.</description></item><item><title>GICv3 ä»‹ç»</title><link>https://wangloo.github.io/posts/armv8/gicv3/</link><pubDate>Sat, 10 Sep 2022 21:51:49 +0800</pubDate><guid>https://wangloo.github.io/posts/armv8/gicv3/</guid><description>GICV3(Generic Interrupt Controller - version 3) å…³äºGIC GICå³ä¸­æ–­æ§åˆ¶å™¨, è´Ÿè´£ç®¡ç†ä¸­æ–­çš„æ¥æ”¶, å±è”½, è·¯ç”±ç­‰ç›¸å…³ä»»åŠ¡, å¹¶å‘ç³»ç»Ÿç¨‹åºå‘˜æä¾›é…ç½®çš„æ¥å£.
GICä¸å¼‚å¸¸æ¨¡å‹åä½œå®Œæˆä¸­æ–­çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸ, GICä¸»è¦è´Ÿè´£ä¸­æ–­æº-äº§ç”ŸIRQ/FIQä¿¡å·è¿™æ®µè·¯, å…³äºå¤„ç†IRQ/FIQåˆ™æ˜¯ç”±CPUå†…éƒ¨çš„å¼‚å¸¸æ¨¡å‹æ¥å®Œæˆ.
å¯¹æ¯” GICv2 æ”¯æŒæ›´å¤šçš„å¤„ç†å™¨, ç”¨affinity routing æ–¹æ¡ˆæ¥åšä¸­æ–­è·¯ç”±. æ”¯æŒä¸­æ–­åˆ†ç»„, ä¸ºäº†é…åˆARMv8çš„å¼‚å¸¸ç­‰çº§æ¨¡å‹ æ–°å¢ä¸­æ–­ç±»å‹: SGI, è½¯ä»¶ç”Ÿæˆä¸­æ–­ æ–°å¢ä¸­æ–­ç±»å‹: SPI, Shared Peripheral Interrupts å¯¹äºCPU interfaceçš„å¯„å­˜å™¨, å¯ç›´æ¥ä½¿ç”¨ç³»ç»Ÿå¯„å­˜å™¨æ¥å£(system register interface)æ¥è®¿é—®, æ¯”memory-mappedçš„æ–¹å¼å¿«. ITS, Interrupt Translation Service æš‚ä¸ä»‹ç» LPI, Locality-specific Peripheral Interrupts . æš‚ä¸ä»‹ç» GICv3æ”¯æŒARMv8-Aæˆ–ARMv8-Rç³»åˆ—å¤„ç†å™¨, ä½†æ²¡æœ‰å¿…ç„¶çš„ç»‘å®šå…³ç³». ARMv8-Aä¹Ÿå¯ä»¥ä½¿ç”¨GICv2.
ä¸­æ–­ç±»å‹ Locality-specific Peripheral Interrupt (LPI) LPIs are always message-based interrupts interrupts. è¿™é‡Œä¸åšä»‹ç».wiki
Private Peripheral Interrupt (PPI) PPIæ˜¯è·¯ç”±åˆ°å•ä¸ªCPUçš„å¤–è®¾ä¸­æ–­, ä¸åŒçš„CPUå¯ä»¥ä½¿ç”¨ç›¸åŒçš„ä¸­æ–­å·.</description></item><item><title>æ­¦å™¨åº“: shell scripts</title><link>https://wangloo.github.io/posts/shell/shell-script/</link><pubDate>Wed, 20 Jul 2022 11:54:13 +0800</pubDate><guid>https://wangloo.github.io/posts/shell/shell-script/</guid><description>â„¹ï¸ ä»¥ä¸‹å‘½ä»¤/è„šæœ¬çš„æ‰§è¡Œç¯å¢ƒå‡ä¸º Bash.
ç»Ÿè®¡ä»£ç é‡ ä½¿ç”¨åˆ°çš„å‘½ä»¤åŒ…å«: find, wc, xargs, sortç­‰
åˆ—å‡ºæ‰€æœ‰çš„æ–‡ä»¶åŠå…¶ä»£ç è¡Œæ•°, åªç»Ÿè®¡.cå’Œ.h, è¿‡æ»¤./scriptsç›®å½•.
find -name &amp;#39;*.[c|h]&amp;#39; ! -path &amp;#39;./scripts/*&amp;#39; | xargs wc -l +å°†å†…å®¹æŒ‰ç…§ä»£ç è¡Œæ•°é™åºæ’åˆ—
find -name &amp;#39;*.[c|h]&amp;#39; ! -path &amp;#39;./scripts/*&amp;#39; | xargs wc -l | sort -rn è‹¥ä»…åˆ—å‡ºæ€»çš„ä»£ç è¡Œæ•°, å»é™¤ç©ºè¡Œ
(find ./ -name &amp;#39;*.[c|h]&amp;#39; -print0 | xargs -0 cat) | sed &amp;#39;/^\s*$/d&amp;#39; | wc -l Â åˆ¤æ–­æ‰§è¡Œè„šæœ¬æ—¶å¸¦çš„å‚æ•° if [ $# -ne 1 ]; then echo &amp;#34;ONE parameter is needed&amp;#34; exit -1 fi if [ $1 == &amp;#39;build&amp;#39; ]; then # do something elif [ $1 == &amp;#39;run&amp;#39; ]; then # do something elif [ $1 == &amp;#39;gdb&amp;#39; ]; then # do something else echo &amp;#34;Not supported command&amp;#34; fi Â è‡ªåŠ¨æ‹·è´æ–‡ä»¶åˆ°SD Card TODO</description></item><item><title>C è¯­è¨€ä½æ“ä½œæŠ€å·§</title><link>https://wangloo.github.io/posts/codestyle/bit-operation-hacks/</link><pubDate>Sun, 03 Jul 2022 09:44:13 +0800</pubDate><guid>https://wangloo.github.io/posts/codestyle/bit-operation-hacks/</guid><description>åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦ä¸º2çš„å¹‚ unsigned int v; if ((v &amp;amp; (v - 1)) == 0) printf(&amp;#34;v is a power of 2\n&amp;#34;); else printf(&amp;#34;v is not a power of 2\n&amp;#34;); Â ç»Ÿè®¡ä¸€ä¸ªæ•°çš„äºŒè¿›åˆ¶ä¸­1çš„æ•°é‡ ä¾ç„¶æ˜¯åˆ©ç”¨v &amp;amp; (v -1)çš„è¿ç®—ç»“æœä¼šå°†vçš„æœ€ä½ä½çš„1(å¦‚æœæœ‰çš„è¯)ç½®0.
å¾ªç¯æ‰§è¡Œæ­¤æ“ä½œå°±å¯ç»Ÿè®¡vä¸­1çš„æ•°é‡.
int numberof1(int v) { int count = 0; while(v) { count++; v = v &amp;amp; (v -1); } return count; } Â å°†ä¸€ä¸ªæ•°å‘ä¸Šå–æ•´ä¸º2çš„å¹‚ ç”¨ä¸€ä¸ª1ä¸€ç›´å·¦ç§», ç›´åˆ°æ¯”è¿™ä¸ªæ•°å¤§ä¸ºæ­¢.
uint32_t roundup_pow_of_two(const uint32_t x) { uint32_t ret = 1; while (ret &amp;lt; x) { ret = ret &amp;lt;&amp;lt; 1; } return ret; } Linuxå†…æ ¸ä¸­ä½¿ç”¨äº†ä¸€ç§æ›´å¿«çš„æ–¹æ¡ˆ, amazing!</description></item><item><title>Stack and Heap</title><link>https://wangloo.github.io/posts/os/stack-and-heap/</link><pubDate>Tue, 28 Jun 2022 16:41:54 +0800</pubDate><guid>https://wangloo.github.io/posts/os/stack-and-heap/</guid><description>Â å †çš„å«ä¹‰ æˆ‘ä»¬éƒ½çŸ¥é“mallocåŠ¨æ€ç”³è¯·çš„å˜é‡æ˜¯å­˜æ”¾åœ¨å †ä¸­. æ‰€ä»¥ç›¸æ¯”æ ˆæ¥è¯´, å †æ˜¯åŠ¨æ€çš„.
å †å æ®è¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´çš„å¤§éƒ¨åˆ†, æˆ‘ä»¬å¯èƒ½é€šè¿‡å †æ¥ç”³è¯·1GBçš„æ•°ç»„, ä½†æ˜¯æ ˆé€šå¸¸ä¸è¡Œ , å¤§å¤šä¹Ÿå°±å‡ å…†çš„ç©ºé—´.
Â å †ç©ºé—´çš„ç®¡ç† è¿›ç¨‹ä¸­å †ç©ºé—´çš„ç®¡ç†æ˜¯è¿è¡Œåº“è´Ÿè´£çš„, åœ¨Linuxä¸­æ˜¯GLIBC.
è¿è¡Œåº“åœ¨åˆå§‹åŒ–æ—¶ä¼šåƒæ“ä½œç³»ç»Ÿç”³è¯·ä¸€å¤§å—çš„å †ç©ºé—´, å†ä¸ºæ¯ä¸ªè¿›è¡Œåˆ†åˆ«åˆ†é…éœ€æ±‚. å½“ç„¶, å¦‚æœæŸäº›ç¨‹åºçš„éœ€æ±‚è¿‡å¤§, è¿è¡Œåº“ä¹Ÿå¯ä»¥ä½¿ç”¨mmapç³»ç»Ÿè°ƒç”¨ç›´æ¥å‘æ“ä½œç³»ç»Ÿç”³è¯·, ç„¶å è¿”å›ç»™ç”¨æˆ·è¿›ç¨‹.
GLIBCçš„mallocå‡½æ•°çš„å¤„ç†æ–¹å¼æ˜¯: å¯¹äºå°äº128KBçš„ç”³è¯·, ä¼šä»è¿è¡Œåº“&amp;quot;æ‰¹å‘çš„&amp;quot;å †ç©ºé—´ é‡Œåˆ†å‡ºä¸€å—æ¥; ä½†è‹¥ç”³è¯·çš„ç©ºé—´è¿‡å¤§, åˆ™ä½¿ç”¨mmapç³»ç»Ÿè°ƒç”¨æ¥åˆ›å»ºåŒ¿åç©ºé—´åˆ†é…ç»™ç”¨æˆ·.
Linuxä¸­è™šæ‹Ÿåœ°å€å—(VMA)çš„ç®¡ç†ä½¿ç”¨äº†çº¢é»‘æ ‘, å¯ä»¥ç”¨äºè¿è¡Œåº“ç®¡ç†è‡ªå·±å‘æ“ä½œç³»ç»Ÿ &amp;ldquo;æ‰¹å‘&amp;quot;çš„å †ç©ºé—´. ä½¿å¾—ç”¨æˆ·ç¨‹åºåŠ¨æ€ç”³è¯·å’Œé‡Šæ”¾å†…å­˜æ€§èƒ½æé«˜.</description></item><item><title>åŠ¨æ€é“¾æ¥</title><link>https://wangloo.github.io/posts/os/dynamic-link/</link><pubDate>Sun, 26 Jun 2022 19:50:45 +0800</pubDate><guid>https://wangloo.github.io/posts/os/dynamic-link/</guid><description>é™æ€é“¾æ¥å¸¦æ¥çš„é—®é¢˜ åƒæ˜¯libcè¿™ç§å‡ ä¹æ¯ä¸ªç¨‹åºéƒ½è¦ç”¨åˆ°çš„åº“, å¦‚æœæ˜¯é™æ€çš„, é‚£ä¹ˆä¸ä»…æ„å¤–ç€æ¯ä¸ªç¨‹åºçš„ å¯æ‰§è¡Œæ–‡ä»¶å¾ˆå¤§, æµªè´¹ç£ç›˜ç©ºé—´. å¹¶ä¸”å½“ç¨‹åºåŠ è½½åˆ°å†…å­˜æ—¶, å¯èƒ½è®¸å¤šç¨‹åºéƒ½ä¼šç”¨åˆ°printf , ä½¿å¾—å†…å­˜ä¸­ä¼šå­˜åœ¨å¥½å¤šä»½çš„printfæºç .
ç»´æŠ¤å’Œæ›´æ–°éš¾. ä¸€æ—¦é™æ€é“¾æ¥çš„å…¶ä¸­ä¸€ä¸ªç›®æ ‡æ–‡ä»¶æ›´æ–°, æ‰€æœ‰çš„å¯æ‰§è¡Œç¨‹åºéƒ½è¦é‡æ–°é“¾æ¥.
ä¸æ»¡è¶³å±€éƒ¨æ€§åŸç†. ä¸Šé¢æåˆ°, å†…å­˜ä¸­åŒæ—¶å­˜åœ¨å¤šä»½çš„printfæºç ä¼šç ´åå±€éƒ¨æ€§åŸç†çš„. æ˜¾ç„¶å¦‚æœæ‰€æœ‰çš„ç¨‹åºå…±äº«ä¸€ä»½printfæºç çš„æƒ³æ³•æ›´å¥½. å³åŠ¨æ€åŠ è½½.
å¯ç§»æ¤æ€§å·®. é™æ€é“¾æ¥, åªè¦æœ‰ä¸€ä¸ªä¾èµ–ç›®æ ‡æ–‡ä»¶çš„å®ç°ä¸åŒ, è½¯ä»¶å‚å•†å°±å¾—ä¸“é—¨å‘å¸ƒä¸€ä¸ª ç‰ˆæœ¬. è€ŒåŠ¨æ€é“¾æ¥åˆ™ä¿¡èµ–å®¢æˆ·ç”µè„‘ä¸Šçš„åŠ¨æ€åº“, ç›¸å½“äºä¸€ä¸ªä¸­é—´å±‚.
Â åŠ¨æ€é“¾æ¥çš„è¿‡ç¨‹ å¯¹æ¯”é™æ€é“¾æ¥ä½¿ç”¨ldé“¾æ¥å™¨åœ¨ç¼–è¯‘åå³æ‰§è¡Œé“¾æ¥, åŠ¨æ€é“¾æ¥åˆ™æ˜¯å°†é“¾æ¥è¿‡ç¨‹æ¨è¿Ÿåˆ°è¿è¡Œæ—¶, å³è£…è½½åˆ°å†…å­˜æ—¶.
è¿™æ ·, é“¾æ¥å™¨åœ¨é“¾æ¥äº§ç”Ÿå¯æ‰§è¡Œæ–‡ä»¶æ—¶å°±æœ‰ä¸¤ç§åšæ³•:
å¯¹äºé™æ€ç¬¦å·, æŒ‰ç…§é™æ€é“¾æ¥çš„è§„åˆ™è¿›è¡Œåœ°å€å¼•ç”¨é‡å®šä½ å¯¹äºåŠ¨æ€ç¬¦å·, é“¾æ¥å™¨åˆ™ä»…æ ‡è®°å…¶ä¸ºåŠ¨æ€é“¾æ¥ä¸­çš„ç¬¦å·, ä¸è¿›è¡Œå¤„ç†. è€Œæ˜¯ç­‰åˆ°è£…è½½æ—¶ç”± ä¸“é—¨çš„åŠ¨æ€é“¾æ¥å™¨æ¥å®ŒæˆåŠ¨æ€ç¬¦å·çš„é“¾æ¥å·¥ä½œ. â‰ï¸ é“¾æ¥å™¨å¦‚ä½•ç¡®å®šä¸€ä¸ªç¬¦å·æ˜¯é™æ€çš„oråŠ¨æ€çš„?
åœ¨åŠ¨æ€å…±äº«å¯¹è±¡(.so)ä¸­ä¿å­˜äº†å®Œæ•´çš„åŠ¨æ€ç¬¦å·è¡¨*, è¡¨ä¸­å­˜åœ¨çš„ç¬¦å·å³ä¸ºåŠ¨æ€çš„, å¦åˆ™ä¸ºé™æ€.
Linuxçš„Cè¯­è¨€è¿è¡Œåº“glibçš„åŠ¨æ€é“¾æ¥ç‰ˆæœ¬å«libc.so. å®ƒåœ¨å¤–å­˜ä¸Šåªä¿å­˜ä¸€ä»½, æ‰€æœ‰çš„ç¨‹åº éƒ½å¯ä»¥åœ¨è¿è¡Œæ—¶ä½¿ç”¨å®ƒ. æ‰€ä»¥åƒä¸‡ä¸è¦åˆ æ‰å®ƒ.
åŠ¨æ€é“¾æ¥æœ‰ä¸€å®šçš„æ€§èƒ½æŸå¤±, å› ä¸ºæ¯æ¬¡è¿è¡Œç¨‹åºæ—¶éƒ½è¦é‡æ–°é“¾æ¥, å¹¶ä¸åƒé™æ€é“¾æ¥æ˜¯ä¸€åŠ³æ°¸é€¸çš„. ä¹Ÿæœ‰ä¾‹å¦‚å»¶è¿Ÿç»‘å®šå¯¹æ€§èƒ½è¿›è¡Œä¼˜åŒ–çš„æ–¹æ³•, å¤§æ¦‚ä»…æœ‰5%çš„æŸè€—, ä¸å¸¦æ¥çš„ä¾¿åˆ©ç›¸æ¯”å¯ä»¥å¿½ç•¥ä¸è®¡.</description></item><item><title>ELF æ–‡ä»¶çš„é“¾æ¥ä¸åŠ è½½</title><link>https://wangloo.github.io/posts/os/elf-format/</link><pubDate>Mon, 20 Jun 2022 16:21:27 +0800</pubDate><guid>https://wangloo.github.io/posts/os/elf-format/</guid><description>ELF is a file format Files in ELF format includes:
Type description å®ä¾‹ Relocatable File è¿™äº›æ–‡ä»¶åŒ…å«äº†ä»£ç å’Œdata, å¯ä»¥è¢«ç”¨æ¥é“¾æ¥æˆå¯æ‰§è¡Œæ–‡ä»¶æˆ–å…±äº«ç›®æ ‡æ–‡ä»¶. .o, .a Executable File ç›´æ¥å¯æ‰§è¡Œçš„æ–‡ä»¶ /bin/ls Shared Object File Including code and data. é“¾æ¥å™¨å¯å°†å…¶ä¸å…¶ä»–Relocatable Fileæˆ–Shared Object Fileç»“åˆ, ç”Ÿæˆæ–°çš„ç›®æ ‡æ–‡ä»¶. åŠ¨æ€é“¾æ¥å™¨å¯å°†å…¶ä¸Executable Fileç»“åˆ, ä½œä¸ºè¿›ç¨‹æ˜ åƒçš„ä¸€éƒ¨åˆ†æ¥è¿è¡Œ. .so Core Dump File Restore critical infomation when process is terminated unexpectedly core dump ğŸ“Œ file command in Linux can output the format of a file.</description></item><item><title>å†™é«˜è´¨é‡çš„Cè¯­è¨€å·¥ç¨‹çš„æŠ€å·§</title><link>https://wangloo.github.io/posts/codestyle/improve_quality/</link><pubDate>Tue, 14 Jun 2022 17:59:22 +0800</pubDate><guid>https://wangloo.github.io/posts/codestyle/improve_quality/</guid><description>æ·»åŠ æ›´å¤šçš„ç¼–è¯‘é€‰é¡¹(comiler options)æ¥é˜²æ­¢bug å¯¹äºæˆ‘å¸¸ç”¨çš„GCC, æ¨èå¼€å¯ä¸€ä¸‹çš„compiler options:
-Wall: enable a lot of common warnings
-Wno-format-truncation: warns about the snprintf output buffer not being large enough for a corresponding â€œ%sâ€ in the format string.
-Werror: turn warnings into errors.
Â åŠ¨æ€ç”³è¯·çš„ç©ºé—´åˆ°åº•è¦ä¸è¦é‡Šæ”¾ When using a barebones embedded OS, you absolutely need to tightly manage your memory.
ä½†æ˜¯, å¦‚æœä½ æ˜¯å†™åº”ç”¨ä¸šåŠ¡çš„ä»£ç , ç‰¹åˆ«æ˜¯åœ¨å†…å­˜è¶³å¤Ÿçš„åœºæ™¯ä¸‹. æœ€å¥½ä¸è¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜, å› ä¸ºå½“çº¿ç¨‹/è¿›ç¨‹é€€å‡ºæ—¶, æ“ä½œç³»ç»Ÿä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬é‡Šæ”¾. æŸäº›æƒ…å†µä¸‹, é‡Šæ”¾å†…å­˜çš„æ“ä½œä¼šå¾ˆå¤§ç¨‹åº¦ä¸Šå¢åŠ é€»è¾‘çš„å¤æ‚åº¦.
å¦‚æœä½ æ˜¯ä¸€ä¸ªå†…æ ¸ç¨‹åºå‘˜, åˆ™å¿…é¡»æ‰‹åŠ¨çš„é‡Šæ”¾.</description></item><item><title>MicroKernel Learning: SeL4</title><link>https://wangloo.github.io/posts/microkernel/sel4/</link><pubDate>Sat, 04 Jun 2022 11:52:51 +0800</pubDate><guid>https://wangloo.github.io/posts/microkernel/sel4/</guid><description>seL4 Capabilities In seL4, capabilities are stored in C-space. C-space is a hierarchical data structure very similar to page table.
page table is a mapping from virtual address to physical address. C-space is a mapping from object ID to capability. Kernel object is made up of several C-nodes, just like a page table made up of individual page tables. Each C-nodes is an array of cap slots, which contain capability.</description></item><item><title>ä½¿ç”¨ HuGo æ­å»ºä¸ªäººç½‘ç«™</title><link>https://wangloo.github.io/posts/hugo/</link><pubDate>Sat, 21 May 2022 17:39:42 +0800</pubDate><guid>https://wangloo.github.io/posts/hugo/</guid><description>HuGo åŸºç¡€å­¦ä¹  æœ¬ç« å°†è§£ç­”Hugoæ˜¯ä»€ä¹ˆ, ä»¥åŠHugoæ˜¯å¦‚ä½•å·¥ä½œçš„. åªæœ‰äº†è§£Hugoçš„å·¥ä½œæœºåˆ¶ä¹‹å, æ‰èƒ½å‘æŒ¥æƒ³è±¡åŠ›è¿›è¡ŒDIY.
æœ¬ç« å†…å®¹å¤§å¤šæ¥è‡ªå®˜æ–¹æ‰‹å†Œæˆ–è€…æœç´¢å¼•æ“æä¾›çš„ç»“æœ.
Hugo é¡¹ç›®ç›®å½•ç»“æ„ ä¸€ä¸ªhugo é¡¹ç›®é€šå¸¸åŒ…å«ä»¥ä¸‹å†…å®¹:
. â”œâ”€â”€ archetypes â”œâ”€â”€ config.toml â”œâ”€â”€ content â”œâ”€â”€ data â”œâ”€â”€ layouts â”œâ”€â”€ public â”œâ”€â”€ static â””â”€â”€ themes è¿™é‡Œé¢æœ‰äº›æ˜¯å¿…é¡»çš„, æœ‰äº›æ˜¯å¯é€‰çš„.
archetypes
å®šä¹‰æ–°åˆ›å»ºpostæ—¶, headerçš„æ ¼å¼.
asserts
Note: assets directory is not created by default.
config
Hugo uses the config.toml, config.yaml, or config.json (if found in the site root) as the default site config file.
The user can choose to override that default with one or more site config files using the command-line --config switch.</description></item><item><title>2019 Stanford Commencement Timcook</title><link>https://wangloo.github.io/posts/motivation/2019-stanford-commencement-timcook/</link><pubDate>Wed, 18 May 2022 19:32:38 +0800</pubDate><guid>https://wangloo.github.io/posts/motivation/2019-stanford-commencement-timcook/</guid><description>Content Fourteen years ago, Steve stood on this stage and told your predecessors &amp;ldquo;Your time is limited. So don&amp;rsquo;t waste is living someone else&amp;rsquo;s life.&amp;rdquo;
So what is true then is true now. Don&amp;rsquo;t waste your time living someone else&amp;rsquo;s life. Don&amp;rsquo;t try to emulate the people who came before you to the exclusion of everything else, contorting into a shape that doesn&amp;rsquo;t fit.
Graduates, the fact is, when your time comes, and it will, you will never be ready.</description></item><item><title>Html Css Learning note (0)</title><link>https://wangloo.github.io/posts/html-css/0/</link><pubDate>Tue, 17 May 2022 11:02:04 +0800</pubDate><guid>https://wangloo.github.io/posts/html-css/0/</guid><description>Get start What is HTML&amp;amp;CSS? HTML is resonsible for the content of the page. That&amp;rsquo;s the text, images, buttons, etc.
CSS is resonsible for the presentation of the content. That&amp;rsquo;s the color, layout, etc.
Web designers create the overall look and fell of a website.
Web developers implement the design using HTML, CSS and JavaScript code.
Configure VIM as HTML code-editor Finally in the arms of vscode ğŸ™‰</description></item><item><title>æˆ‘çš„ vim è°ƒæ•™éšç¬”</title><link>https://wangloo.github.io/posts/vim/basic/</link><pubDate>Mon, 09 May 2022 19:28:12 +0800</pubDate><guid>https://wangloo.github.io/posts/vim/basic/</guid><description>Search a word quickly: put cursor on the word, press / and press &amp;lt;C-R&amp;gt; &amp;lt;C-W&amp;gt;.
Â ç¼©å†™çš„å«ä¹‰(Meaning of abbreviations) Operation
d - delete y - yank(copy, å› ä¸ºcè¢«å äº†) c - change r - replace v - visual select Scope or location
i - inside a - around f - forward t - to Object
w - word s - sentence p - paragraph Â ä¹¦ç­¾: Bookmark ma: create bookmark a inside file.</description></item><item><title>reveal.js Tutorial</title><link>https://wangloo.github.io/posts/revealjs/</link><pubDate>Sun, 08 May 2022 19:34:44 +0800</pubDate><guid>https://wangloo.github.io/posts/revealjs/</guid><description>Change code theme Default use monokai.css. see å®˜æ–¹æ–‡æ¡£
ä¿®æ”¹éœ€è¦ä¸‹è½½æ–°çš„cssæ”¾åˆ°plugin/highlight/ç›®å½•ä¸‹.
å…¶ä»–å¯ç”¨çš„cssåœ¨highlight.jsä»“åº“ä¸­ä¸‹è½½.
Align Slide Align å–æ¶ˆcenterå¯¹é½æ–¹å¼:
Reveal.initialize({ ... center: false, ... }) æ‰€æœ‰slideå·¦å¯¹é½: https://github.com/hakimel/reveal.js/issues/1897
ç”¨markdownå†™çš„æ–¹å¼ä¸‹ä½¿æŸä¸€å¹»ç¯ç‰‡å·¦å¯¹é½: https://github.com/hakimel/reveal.js/issues/890#issuecomment-129735291</description></item><item><title>A64 æŒ‡ä»¤é›†</title><link>https://wangloo.github.io/posts/armv8/a64_isa/</link><pubDate>Sat, 07 May 2022 21:19:01 +0800</pubDate><guid>https://wangloo.github.io/posts/armv8/a64_isa/</guid><description>Load/Store æŒ‡ä»¤ #1 Basic Load/Store Addressing mode Base register - w0=[x1] ldr w0, [x1] Offset addressing mode - w0=[x1+12] ldr w0, [x1, 12] Pre-index addressing mode - x1+=12; w0=[x1] ldr w0, [x1, 12]! Post-index addressing mode - w0=[x1]; x1+=12 ldr w0, [x1], 12 Load/store instruction example // load a byte from x1 ldrb w0, [x1] // load a signed byte from x1 ldrsb w0, [x1] // store a 32-bit word to address in x1 str w0, [x1] // load two 32-bit words from stack, then add 8-byte to sp ldp w0, w1, [sp], 8 // store two 64-bit words at [sp-96] and subtract 96-byte from sp.</description></item><item><title>ARMv8-A å¯„å­˜å™¨</title><link>https://wangloo.github.io/posts/armv8/register/</link><pubDate>Sat, 07 May 2022 20:19:44 +0800</pubDate><guid>https://wangloo.github.io/posts/armv8/register/</guid><description>å¯„å­˜å™¨åˆ†ç±» é€šç”¨å¯„å­˜å™¨ x0-x7 å‚æ•°å¯„å­˜å™¨: Restore function parameters and return vaule. x9-x15 caller-saved ä¸´æ—¶å¯„å­˜å™¨: callee é»˜è®¤å¯ä»¥ç›´æ¥ä½¿ç”¨æ¥ä¿å­˜ä¸´æ—¶å˜é‡, ä¸éœ€è¦ä¿å­˜å’Œæ¢å¤. å¦‚æœ caller åœ¨é‡Œé¢å­˜å‚¨äº†éä¸´æ—¶ä¿¡æ¯, é‚£ä¹ˆåœ¨å‡½æ•°è°ƒç”¨ä¹‹å‰åº”å½“ç”± caller è´Ÿè´£ä¿å­˜. x19-x28 callee-saved å¯„å­˜å™¨: callee åº”è¯¥é¿å…ä½¿ç”¨. å¦‚æœå¿…é¡»è¦ä½¿ç”¨ï¼Œé‚£ä¹ˆåœ¨è¿”å›å‰å¿…é¡»æ¢å¤. special registers: x8 restore indirect result. Commonly used when returning a struct. x18 platform reserved register. x29 frame pointer register(FP). x30 link register(LR). All general-purpose register xN is 64-bit width. They all have corresponding wN register using the lower 32-bit of xN.</description></item><item><title>Numberical Analysis Exam</title><link>https://wangloo.github.io/posts/numberical-analysis/</link><pubDate>Sat, 07 May 2022 18:04:58 +0800</pubDate><guid>https://wangloo.github.io/posts/numberical-analysis/</guid><description>è€ƒè¯•å¤§çº² ğŸ¯ To Reader:
This blog is JUST FOR EXAMINATION! If you are interested in numberical analysis, please quit this web. I try to sort out the knowledge points of the course, just to pass the exam.
Based on the course of Professor Zhong Erjie of UESTC.
ğŸ’¢ I hate mathematics!
Â ç¬¬äºŒç«  éçº¿æ€§æ–¹ç¨‹/æ–¹ç¨‹ç»„çš„æ±‚è§£ 1. äºŒåˆ†æ³•åŠè¿­ä»£ äºŒåˆ†æ³•è¯¯å·®ä¼°è®¡å®šç† 2. ä¸åŠ¨ç‚¹è¿­ä»£ ä¸åŠ¨ç‚¹åŠä¸åŠ¨ç‚¹è¿­ä»£çš„æ¦‚å¿µ è¿­ä»£æ ¼å¼çš„é€‰æ‹©? æ˜¯å¦æ”¶æ•›? è¿­ä»£çš„åˆå€¼æ˜¯å¦åˆé€‚? 3. ç‰›é¡¿æ³•è§£éçº¿æ€§æ–¹ç¨‹ èƒŒæ™¯: å¦‚æœå‡½æ•°f(x)æ˜¯çº¿æ€§çš„, é‚£ä¹ˆå®ƒçš„æ±‚æ ¹é—®é¢˜å°±ä¼šç®€åŒ–.</description></item><item><title>LaTeX Vim Tutorial</title><link>https://wangloo.github.io/posts/latex-vim-tutorial/</link><pubDate>Wed, 04 May 2022 17:07:51 +0800</pubDate><guid>https://wangloo.github.io/posts/latex-vim-tutorial/</guid><description>Use plugin vimtex Vim build-in support of LaTeX files is just OK. When we need more excellent exprience, good plugins is very recommended.
vimtex is a nice and modern vim plugin for LaTeX files.
Useful Futures of vimtex IMO
&amp;lt;leader&amp;gt;ll Complier. By default, it will auto-complier when you type :w. &amp;lt;leader&amp;gt;lt Open content tree as a sidebar. &amp;lt;leader&amp;gt;lv View PDF with configured PDF viewer. &amp;lt;leader&amp;gt;li File information. cse Change surrounding \begin \end environment.</description></item><item><title>Portability Issues</title><link>https://wangloo.github.io/posts/reading-notes/expert_c_programming/portability_issues/</link><pubDate>Sun, 01 May 2022 16:41:35 +0800</pubDate><guid>https://wangloo.github.io/posts/reading-notes/expert_c_programming/portability_issues/</guid><description>When reading C standard documents, we usually see phrases like &amp;ldquo;Implementation-defined&amp;rdquo;, &amp;ldquo;Unspecified&amp;rdquo;,.etc.
So, what do they really mean?
æœ¯è¯­ æˆ‘ä»¬å°†è¿™äº›éš¾ä»¥ç›´æ¥ç†è§£çš„è¯æ±‡ç§°ä¸ºæœ¯è¯­ï¼Œåœ¨ANSI Cä¸­ï¼Œæœ¯è¯­å¯ä»¥åˆ†ä¸ºæè¿°ä¸å¯ç§»æ¤ä»£ç (unportable), åä»£ç (bad), å¯ç§»æ¤çš„ä»£ç (portable)ä¸‰ç±».
unportable code Implementation-defined
éœ€è¦ç”±ç¼–è¯‘å™¨è®¾è®¡è€…å†³å®šé‡‡å–ä½•ç§è¡Œä¸ºï¼Œä»–ä»¬å¯èƒ½ä¸åŒï¼Œä½†éƒ½ä¸èƒ½è¯´æ˜¯é”™è¯¯çš„.
ä¾‹å¦‚ï¼šå½“æ•´å‹æ•°å³ç§»æ—¶ï¼Œæ˜¯å¦éœ€è¦æ‰©å±•ç¬¦å·ä½. å³ç§»ä»£æ›¿é™¤æ³•å¯èƒ½å¯¼è‡´çš„ç¾éš¾.
unspecified
åœ¨æŸäº›æ­£ç¡®æƒ…å†µä¸‹çš„åšæ³•ï¼Œæ ‡å‡†å¹¶æœªæ˜ç¡®è§„å®šåº”è¯¥æ€æ ·åš.
ä¾‹å¦‚ï¼šå‚æ•°æ±‚å€¼çš„é¡ºåº.
bad code undefined
åœ¨æŸäº›ä¸æ­£ç¡®æƒ…å†µä¸‹çš„åšæ³•ï¼Œä½†æ ‡å‡†å¹¶æœªè§„å®šåº”è¯¥æ€æ ·åšã€‚æ„å‘³ç€ä½ å¯ä»¥é‡‡å–ä»»ä½•è¡ŒåŠ¨ï¼Œå¯ä»¥ä»€ä¹ˆéƒ½ä¸åšï¼Œä¹Ÿå¯ä»¥å‘å‡ºä¸€æ¡è­¦å‘Šä¿¡æ¯, æˆ–è€…ç»ˆæ­¢CPUé‡å¯ç­‰ç­‰. ä½ ç”šè‡³å¯ä»¥å‘å°„æ ¸å¯¼å¼¹(åªè¦ä½ å®‰è£…äº†èƒ½å‘å°„æ ¸å¯¼å¼¹çš„ç¡¬ä»¶ç³»ç»Ÿ).
ä¾‹å¦‚ï¼šå½“ä¸€ä¸ªæœ‰ç¬¦å·æ•´æ•°æº¢å‡ºæ—¶è¯¥é‡‡å–ä»€ä¹ˆè¡ŒåŠ¨.
constraint
è¿™æ˜¯ä¸€ä¸ªå¿…é¡»éµå®ˆçš„é™åˆ¶æˆ–è¦æ±‚. å¦‚æœä½ ä¸éµå®ˆ, é‚£ä¹ˆä½ çš„ç¨‹åºçš„è¡Œä¸ºå°±ä¼šå˜æˆå¦‚ä¸Šæ‰€è¯´çš„undefined. è¿™å‡ºç°äº†ä¸€ç§å¾ˆæœ‰æ„æ€çš„æƒ…å†µ: åˆ†è¾¨æŸç§ä¸œè¥¿æ˜¯å¦æ˜¯ä¸€ä¸ªconstaintæ˜¯å¾ˆå®¹æ˜“çš„, å› ä¸ºæ¯ä¸ªæ ‡å‡†çš„ä¸»é¢˜éƒ½é™„æœ‰ä¸€ä¸ªconstraintå°èŠ‚, åˆ—å‡ºäº†æ‰€æœ‰çš„çº¦æŸæ¡ä»¶ã€‚
ä¾‹å¦‚: %æ“ä½œç¬¦çš„æ“ä½œæ•°å¿…é¡»ä¸ºæ•´å‹. æ‰€ä»¥,åœ¨éæ•´å‹æ•°æ®ä¸Šä½¿ç”¨%æ“ä½œç¬¦è‚¯å®šä¼šå¯¼è‡´undefined.
portable code strictly conforming
ä¸¥æ ¼éµå®ˆæ ‡å‡†çš„. ç¬¦åˆè¯¥æ¡ä»¶çš„ç¨‹åºåº”å½“æ˜¯:
åªä½¿ç”¨å·²ç¡®å®šçš„ç‰¹æ€§ ä¸çªç ´ä»»ä½•ç”±ç¼–è¯‘å™¨å®ç°(Implementation-defined)çš„é™åˆ¶. ä¸ä½¿ç”¨unspecifiedå’Œundefinedç‰¹æ€§ è¿™æ ·è§„å®šçš„ç›®çš„æ˜¯æœ€å¤§ç¨‹åºä¿è¯ä»£ç çš„å¯ç§»æ¤æ€§. ä½†ç¬¦åˆè¯¥æœ¯è¯­çš„ä»£ç å¹¶ä¸å¸¸è§, ä¾‹å¦‚INT_MAXçš„å€¼åœ¨ä¸åŒæ¶æ„çš„æœºå™¨ä¸Šç»“æœå¯èƒ½ä¸åŒ.
comforming
éµå¾ªæ ‡å‡†çš„; ä¸€ä¸ªéµå¾ªæ ‡å‡†çš„ç¨‹åºå¯ä»¥ä¾èµ–ä¸€äº›å¯¹äºæŸç§ç¼–è¯‘å™¨ç‰¹æœ‰çš„ä¸å¯ç§»æ¤çš„ç‰¹æ€§. è¿™æ ·ä¸€ä¸ªç¨‹åºå¯¹äºæŸä¸ªç¼–è¯‘å™¨å¯èƒ½æ˜¯éµå¾ªæ ‡å‡†çš„, ä½†å¯¹äºå¦å¤–ä¸€ä¸ªç¼–è¯‘å™¨åˆæ˜¯ä¸éµå¾ªæ ‡å‡†çš„.</description></item><item><title>Third Blog</title><link>https://wangloo.github.io/posts/third-blog/</link><pubDate>Sun, 01 May 2022 16:41:35 +0800</pubDate><guid>https://wangloo.github.io/posts/third-blog/</guid><description/></item><item><title>GCC '-M' and Related Parameters</title><link>https://wangloo.github.io/posts/c/gcc_-m_related/</link><pubDate>Tue, 26 Apr 2022 19:08:22 +0800</pubDate><guid>https://wangloo.github.io/posts/c/gcc_-m_related/</guid><description>As we all know, there are huge number of parameters for GCC. With them, we can make many things possible. Now we talk about -M and related ones. After reading this article, you will know the meaning of there magic parameters. And I will put some little demos follows. Finally, we will see what can they do in really project. Let&amp;rsquo;s go ahead.
å®ä¾‹è§„åˆ™ ä»¥ä¸‹çš„åˆ†æéƒ½æ˜¯åŸºäºè¿™æ ·ä¸€ä¸ªç”Ÿæˆç›®æ ‡æ–‡ä»¶çš„è§„åˆ™, åº”è¯¥æ¥è¯´å…·æœ‰ä¸€å®šçš„é€šç”¨æ€§ã€‚
build/obj/main.o: src/main.c $(CC) $(CFLAGS) $(INCLUDES) -c $&amp;lt; -o $@ main.</description></item><item><title>Second Blog</title><link>https://wangloo.github.io/posts/second-blog/second-blog/</link><pubDate>Tue, 26 Apr 2022 15:32:11 +0800</pubDate><guid>https://wangloo.github.io/posts/second-blog/second-blog/</guid><description>This is my second blog.
Wish you have a good life.
happy smile sunset</description></item><item><title>First Blog</title><link>https://wangloo.github.io/posts/first-blog/first-blog/</link><pubDate>Tue, 26 Apr 2022 15:13:07 +0800</pubDate><guid>https://wangloo.github.io/posts/first-blog/first-blog/</guid><description>This is my first blog. This is my first blog. This is my first blog. This is my first blog. This is my first blog. This is my first blog. This is my first blog. This is my first blog. This is my first blog. This is my first blog. This is my first blog. This is my first blog. This is my first blog. This is my first blog. This is my first blog.</description></item><item><title/><link>https://wangloo.github.io/posts/os/arm64-linux-qemu/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://wangloo.github.io/posts/os/arm64-linux-qemu/</guid><description>ç¼–è¯‘Linux æºç  ä¸Šæµ·äº¤é€šå¤§å­¦é•œåƒç«™
# get linux source code wget http://ftp.sjtu.edu.cn/sites/ftp.kernel.org/pub/linux/kernel/ # extract tar xvf linux-4.12.1.tar.gz # enter dir cd linux-4.12.1/ # generate .config make ARCH=arm64 CROSS_COMPILE=aarch64-none-linux-gnu- defconfig make ARCH=arm64 CROSS_COMPILE=aarch64-none-linux-gnu- menuconfig # compile make ARCH=arm64 CROSS_COMPILE=aarch64-none-linux-gnu- Image -j16 æ„å»ºæ ¹æ–‡ä»¶ç³»ç»Ÿ ä½¿ç”¨ Busybox æ„å»º, ä¸‹è½½æºç æ—¶å¯èƒ½æ¯”è¾ƒæ…¢, æš‚æ—¶æ²¡æœ‰å‘ç°å›½å†…é•œåƒç«™
# Download busybox source code wget https://busybox.net/downloads/busybox-1.35.0.tar.bz2 # menuconfig - generate .config make ARCH=arm64 CROSS_COMPILE=aarch64-none-linux-gnu- menuconfig # compile make ARCH=arm64 CROSS_COMPILE=aarch64-none-linux-gnu- -j16 make ARCH=arm64 CROSS_COMPILE=aarch64-none-linux-gnu- install # create rootfs cd .</description></item><item><title/><link>https://wangloo.github.io/posts/os/trace/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://wangloo.github.io/posts/os/trace/</guid><description>åè¯è§£é‡Š probe ä¸€ä¸ªprobeæ˜¯ä¸€ä¸ªä½ç½®æˆ–è€…æ´»åŠ¨, åŠ¨æ€è¿½è¸ªå·¥å…·å¯ä»¥åœ¨probeä¸Šç»‘å®šä¸€äº›action. ä¾‹å¦‚è®°å½•æ ˆå¸§ä½ç½®, æŸ¥çœ‹å‚æ•°ç­‰.
probeå°±åƒæ˜¯ä¸€ä¸ªå¯ç¼–ç¨‹çš„ä¼ æ„Ÿå™¨, ä½ å¯ä»¥ä¸ºä»–è®¾å®šè§¦å‘çš„äº‹ä»¶æˆ–è€…æŒ‡ä»¤. å½“probe è§¦å‘æ—¶, å¯ä»¥æ‰§è¡Œä½ æå‰ç»‘å®šçš„å‡½æ•°, äº†è§£æ­¤æ—¶ç³»ç»Ÿçš„çŠ¶æ€</description></item></channel></rss>